;---------------------------------------------------------------------------
; CTech Jimmy LP
[Statedef 900]
type    = S
movetype= A
physics = S
ctrl = 0
velset = 0,0
movehitpersist = 1
anim = 900

[State 0, VarSet]
type = VarSet
trigger1 = !Time
trigger1 = PrevStateNo != [901,903]
v = 5
value = 0

[State 0, Explod]
type = Explod
trigger1 = AnimElem = 4
anim = 901 + (Var(5)>=2)
id = 3000
pos = 0,0
postype = p1
bindtime = 9
sprpriority = -9
ownpal = 1
removeongethit = 1

[State 0, Snd Whistle]
type = PlaySnd
trigger1 = AnimElem = 4
value = S900,0
channel = 0

[State 0, Helper Jimmy]
type = Helper
triggerall = Var(5) <= 1
triggerall = !NumHelper(910)
trigger1 = AnimElem = 2 && MoveHit
trigger2 = AnimElem = 5 && !MoveContact && !Var(51)
trigger3 = AnimElem = 6; && MoveGuarded
name = "Collision Chaos Past"
ID = 910
stateno = 910
pos = max(min(160,ifelse(Var(5),p2dist x*0.5,16)),0),0
postype = p1
ownpal = 1
[State 0, Helper Lee]
type = Helper
triggerall = Var(5) >= 2
triggerall = !NumHelper(920)
trigger1 = AnimElem = 2 && MoveHit
trigger2 = AnimElem = 5 && !MoveContact && !Var(51)
trigger3 = AnimElem = 6; && MoveGuarded
name = "Quartz Quandrant Good Future"
ID = 920
stateno = 920
pos = -128 + max(min(128,p2dist x*0.25),0),0
postype = p1
ownpal = 1

[State 0, CtrlSet]
type = CtrlSet
trigger1 = AnimElem = 7
value = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; CTech Jimmy SP
[Statedef 901]
type    = S
movetype= A
physics = S
movehitpersist = 1
anim = 900

[State 0, VarSet]
type = VarSet
trigger1 = !Time
v = 5
value = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = !Time
value = 900

;---------------------------------------------------------------------------
; CTech Lee LK
[Statedef 902]
type    = S
movetype= A
physics = S
movehitpersist = 1
anim = 900

[State 0, VarSet]
type = VarSet
trigger1 = !Time
v = 5
value = 2

[State 0, ChangeState]
type = ChangeState
trigger1 = !Time
value = 900

;---------------------------------------------------------------------------
; CTech Lee SK
[Statedef 903]
type    = S
movetype= A
physics = S
movehitpersist = 1
anim = 900

[State 0, VarSet]
type = VarSet
trigger1 = !Time
v = 5
value = 3

[State 0, ChangeState]
type = ChangeState
trigger1 = !Time
value = 900

;---------------------------------------------------------------------------
; H - Jimmy
[Statedef 910]
type    = S
movetype= I
physics = N
sprpriority = 5
anim = 911

[State 0, VarSet]
type = VarSet
trigger1 = !Time
v = 5
value = Parent,Var(5)%2

[State 0, ChangeAnim]
type = ChangeAnim
triggerall = Anim = 911
trigger1 = AnimElem = 22
trigger1 = !MoveHit
trigger2 = AnimElemNo(0) = [2,23]
trigger2 = Root,StateNo = [2000,3000)
value = Anim
elem = 24
[State 0, ChangeAnim]
type = ChangeAnim
triggerall = Anim = 911
trigger1 = AnimElemNo(0) = [2,18]
trigger1 = Parent,MoveType = H && Parent,StateNo != [120,160)
trigger2 = AnimElem = 20, 8
trigger2 = !MoveContact
value = 19101
elem = 6
[State 0, ChangeAnim]
type = ChangeAnim
triggerall = Anim = 911
triggerall = Var(5) = 0
trigger1 = AnimElem = 2, 3
value = Anim
elem = AnimElemNo(0)+1
[State 0, ChangeAnim]
type = ChangeAnim
triggerall = Anim = 911
trigger1 = AnimElemNo(0) = 23
trigger1 = RoundState > 2 && Parent,Win && !Parent,Var(58)
value = Anim
elem = 23

[State 0, Explod Hello I'm Here]
type = Explod
trigger1 = !Time
anim = 910
pos = -8 * 9,-24 * 9
postype = p1
vel = 8,24
removetime = 8
sprpriority = 0
ontop = 0
shadow = -1
[State 0, Explod Go Fuck Yourself]
type = Explod
trigger1 = AnimTime = -1
anim = 912
postype = p1
vel = -12,-12
removetime = 32
sprpriority = 0
ontop = 0
shadow = -1
[State 0, Explod I WIN]
type = Explod
triggerall = Anim = 911
trigger1 = AnimElemNo(0) = 23
trigger1 = RoundState = 4 && Parent,StateNo = 182
anim = 18200 + (Parent,Life >= 1000) + 3*(Parent,Life<1000&&EnemyNear,Var(58)=0&&(EnemyNear,Name="TERI"||EnemyNear,Name="TERX"||EnemyNear,Name="TERK"))
postype = p1
removetime = -1
scale = 1,1
sprpriority = 5
shadow = -1
[State 0, VarSet]
type = ParentVarSet
trigger1 = AnimElemNo(0) = 23
trigger1 = RoundState = 4 && Parent,StateNo = 182
trigger1 = Random < 333
trigger1 = !((Enemy,Name="TERI"||Enemy,Name="TERX"||Enemy,Name="TERK")&&!Enemy,Var(58))
v = 5
value = 910
[State 0, Var Combo Cooldown Jimmy]
type = ParentVarSet
trigger1 = 1 
v = 48
value = 1

[State 0, Explod Knife FX 1]
type = Explod
triggerall = Anim = 911
trigger1 = AnimElem = 4
anim = 914
postype = p1
bindtime = 666
ownpal = 1
removeongethit = 1
[State 0, Explod Knife FX 2]
type = Explod
triggerall = Anim = 911
trigger1 = AnimElem = 5
anim = 915
postype = p1
bindtime = 666
ownpal = 1
sprpriority = 6
removeongethit = 1
[State 0, Explod Knife FX 3]
type = Explod
triggerall = Anim = 911
trigger1 = AnimElem = 9
anim = 916
postype = p1
bindtime = 666
ownpal = 1
sprpriority = 6
removeongethit = 1
[State 0, Explod Knife FX 4]
type = Explod
triggerall = Anim = 911
trigger1 = AnimElem = 10
anim = 917
postype = p1
bindtime = 666
ownpal = 1
sprpriority = 6
removeongethit = 1
[State 0, Explod Knife FX 5]
type = Explod
triggerall = Anim = 911
trigger1 = AnimElem = 18
anim = 918
postype = p1
bindtime = 666
ownpal = 1
removeongethit = 1
[State 0, Explod Knife FX 6]
type = Explod
triggerall = Anim = 911
trigger1 = AnimElem = 19
anim = 919
postype = p1
bindtime = 666
ownpal = 1
removeongethit = 1

[State 0, Snd Voice Exert 1]
type = PlaySnd
triggerall = Anim = 911
trigger1 = AnimElem = 3
value = S11000,200 + random%3
channel = 0
[State 0, Snd Voice Exert 2]
type = PlaySnd
triggerall = Anim = 911
trigger1 = AnimElem = 8
value = S11000,203 + random%3
channel = 0
[State 0, Snd Voice Exert 3]
type = PlaySnd
triggerall = Anim = 911
trigger1 = AnimElem = 17
value = S11000,206 + random%9
channel = 0
[State 0, Snd Voice Success]
type = PlaySnd
trigger1 = AnimElem = 22, 1 && MoveHit
trigger1 = RoundState = 2
value = S11001,200 + random%8
channel = 0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = AnimElemNo(0) < 20
value = ,NT,ST,HT
time = 1
[State 0, NotHitBy]
type = NotHitBy
trigger1 = AnimElemNo(0) >= 20
value = SCA
time = 1

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 911
time = 666
[State 0, ChangeState]
type = ChangeState
trigger1 = MoveReversed
value = 911

[State 0, PlayerPush]
type = PlayerPush
triggerall = Anim = 911
trigger1 = AnimElemNo(0) <= 20
value = 1

[State 0, Var Jimmy Cooldown]
type = ParentVarSet
trigger1 = !Time
v = 41
value = 400

[State 0, Snd Whoosh]
type = PlaySnd
trigger1 = Time = 0
trigger2 = AnimTime = -1
value = F2,3
[State 0, Snd SLASH]
type = PlaySnd
triggerall = Anim = 911
trigger1 = AnimElem = 3
trigger2 = AnimElem = 8
value = F0,6
[State 0, Snd SLASH]
type = PlaySnd
triggerall = Anim = 911
trigger1 = AnimElem = 17
value = F0,7

[State 0, VelMul]
type = VelMul
triggerall = Anim = 911
trigger1 = AnimElemNo(0) <= 17
x = 0.8
[State 0, VelMul]
type = VelMul
triggerall = Anim = 911
trigger1 = AnimElemNo(0) = [6,7]
trigger2 = AnimElemNo(0) = [10,16]
trigger3 = AnimElemNo(0) = [18,19]
x = 0.8
[State 0, VelMul]
type = VelMul
trigger1 = Anim = 911
trigger1 = AnimElemNo(0) >= 20
trigger2 = Anim != 911
x = 0
[State 0, Vel]
type = VelSet
triggerall = Anim = 911
trigger1 = AnimElemNo(0) = 3
trigger2 = AnimElemNo(0) = 8
x = 3.5 * (1 + Var(5))
[State 0, Vel]
type = VelSet
triggerall = Anim = 911
trigger1 = AnimElemNo(0) = 17
x = 2.5 * (1 + Var(5))

[State 0, Counter Check Reset]
type = VarSet
trigger1 = !MoveHit
v = 10
value = Parent,Var(10) * !Root,Var(51)
ignorehitpause = 1
[State 0, Scaling Reset]
type = VarSet
trigger1 = !MoveHit
fv = 10
value = max(Parent,FVar(8) + (Var(10)=1)*const(BC.CounterBonus),const(BC.ScalingMin))
ignorehitpause = 1
[State 0, Var Damage Value]
type = VarSet
trigger1 = !Time
v = 12
value = 32

[State 0, HitDef]
type = HitDef
trigger1 = !MoveContact && !MoveReversed && AnimElemNo(0) < 18
trigger2 = AnimElem = 9
attr = S,SA
hitflag = MAF
guardflag = M
animtype = medium
priority = 3,Hit
damage = Ceil(Var(12) * FVar(10)),Ceil(96*0.33*const(BC.ChipLight))
guardpoints = floor((32 + Var(12)) * 0.5)
pausetime = 6,6
sparkno = 25 + random%4
guard.sparkno = 40
sparkxy = -40+Floor(P2Dist X*0.5),-48+Floor(P2Dist Y*0.5)
hitsound = 1,7
guardsound = 5,1
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
guard.hittime = 8
yaccel = 0.5
air.fall = 1
ground.velocity = -4,0
air.velocity = -1.5 - Var(5),-3.5 - (AnimElemNo(0) = 9)
getpower = floor(Var(12)*Root,Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Root,Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 18
attr = S,SA
hitflag = MAF
guardflag = M
animtype = heavy
priority = 3,Hit
damage = Ceil(Var(12) * FVar(10)),Ceil(96*0.33*const(BC.ChipLight))
guardpoints = floor((32 + Var(12)) * 0.5)
pausetime = 6,12
sparkno = ifelse(Var(10)=2,30,25 + random%4)
guard.sparkno = 40
sparkxy = -40+Floor(P2Dist X*0.5),-48+Floor(P2Dist Y*0.5)
hitsound = 1,8
guardsound = 5,1
ground.type = Low
ground.slidetime = 16
ground.hittime = 16
guard.hittime = 12
yaccel = 0.5
fall = Var(5) && !(Var(10) = 2 || Var(11) >= 2)
ground.velocity = -4,-4 * Var(5)
air.velocity = -4,-2
getpower = floor(Var(12)*Root,Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Root,Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0

[State 0, Var Dire Counter Stack On]
type = ParentVarSet
triggerall = Var(8) = 1 && Var(10) = 2
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
v = 11
value = 2
ignorehitpause = 1

[State 0, HitAdd]
type = ParentVarAdd
triggerall = Var(8) = 1
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
v = 51
value = 1
ignorehitpause = 1

[State 0, ParentVarSet Counter Message]
type = ParentVarSet
triggerall = Var(8) = 1 && Var(10)
triggerall = NumTarget && MoveHit
triggerall = HitCount = 1
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
v = 32
value = 63 + (Var(10) = 2) + (Var(10) = 3) * 10
ignorehitpause = 1

[State 0, TargetState]
type = TargetState
triggerall = Var(8) = 1 && Var(10) = 2
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
trigger1 = AnimElemNo(0) = 18
value = 5320
ignorehitpause = 1

[State 0, Dampening S]
type = ParentVarSet
triggerall = Var(8) = 1 && HitCount = 1
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
fv = 8
value = Parent,FVar(8)*(const(BC.ScalingM1) + const(BC.ScalingM2) * ifelse(Parent,FVar(8)<1,1-Parent,FVar(8),0))
ignorehitpause = 1

[State 0, Map Dire Trigger]
type = RootMapSet
triggerall = Var(10) = 2
triggerall = Var(8) = 1
triggerall = NumTarget && MoveHit
trigger1 = Target,MoveType = H
trigger1 = AnimElemNo(0) = 18
map = "DireAct"
value = 2
ignorehitpause = 1

[State 0, Var Gauge Gain]
type = ParentVarAdd
triggerall = Parent,Name = "BERK"
trigger1 = MoveHit && Var(8) = 1
trigger1 = HitCount = 1
v = 18
value = 250
ignorehitpause = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 2
movetype = A
[State 0, StateTypeSet]
type = StateTypeSet
triggerall = movetype = A
trigger1 = AnimElemNo(0) >= 19
trigger2 = Anim != 911
movetype = I

[State 0, DestroySelf]
type = DestroySelf
trigger1 = AnimTime = 0
trigger2 = AnimElemNo(0) = 23
trigger2 = RoundState = 4 && Parent,StateNo = 182

;---------------------------------------------------------------------------
; H - Jim Owch
[Statedef 911]
type    = A
movetype= H
physics = N
sprpriority = -1
anim = 913

[State 0, Offset]
type = Offset
trigger1 = AnimElemNo(0) = 1
x = -1+random%3
y = -1+random%3

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 2
x = -2 - random%4 - BackEdgeDist * 0.05
y = -4 - random%4 - BackEdgeDist * 0.005
[State 0, VelAdd]
type = VelAdd
trigger1 = AnimElemNo(0) >= 2
y = 0.4

[State 0, Snd Voice Unsuccess]
type = PlaySnd
trigger1 = !Time
value = S11002,200 + random%12
channel = 0

[State 0, Var Bimmy Cooldown]
type = ParentVarSet
trigger1 = !Time
v = 41
value = 480

[State 0, DestroySelf]
type = DestroySelf
trigger1 = Time = 64

;---------------------------------------------------------------------------
; H - Lee
[Statedef 920]
type    = S
movetype= I
physics = N
sprpriority = 5
anim = 921

[State 0, VarSet]
type = VarSet
trigger1 = !Time
v = 5
value = Parent,Var(5)%2

[State 0, ChangeAnim]
type = ChangeAnim
triggerall = AnimElemNo(0) = [2,6]
trigger1 = Parent,MoveType = H && Parent,StateNo != [120,160)
trigger2 = Parent,StateNo = [2000,3000)
value = Anim
elem = 13
[State 0, ChangeAnim]
type = ChangeAnim
triggerall = AnimElemNo(0) = 5
trigger1 = Var(5)
trigger1 = Time < 60
value = Anim
elem = 5
[State 0, ChangeAnim]
type = ChangeAnim
triggerall = AnimElemNo(0) = 5
triggerall = AnimElem = 5, >= 6
trigger1 = Var(5) = 0
trigger2 = Time >= 25
value = Anim
elem = 6
[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = AnimElemNo(0) = 12
trigger1 = RoundState > 2 && Parent,Win && !Parent,Var(58)
value = Anim
elem = 12

[State 0, Explod Here I Am]
type = Explod
trigger1 = Time = 0
anim = 920
pos = -8 * 9,-24 * 9
postype = p1
vel = 8,24
removetime = 8
scale = 1,1
sprpriority = 0
ontop = 0
shadow = -1
[State 0, Explod You're Not Romeo]
type = Explod
trigger1 = AnimTime = -1
anim = 922
postype = p1
vel = -12,-12
removetime = 32
scale = 1,1
sprpriority = 0
ontop = 0
shadow = -1
[State 0, Explod I WIN]
type = Explod
trigger1 = RoundState = 4 && Parent,StateNo = 182
anim = 18202
postype = p1
removetime = -1
scale = 1,1
sprpriority = 5
shadow = -1
[State 0, VarSet]
type = ParentVarSet
trigger1 = RoundState = 4 && Parent,StateNo = 182
trigger1 = Random < 333
v = 5
value = 920
[State 0, Var Combo Cooldown Lee]
type = ParentVarSet
trigger1 = 1 
v = 49
value = 1

[State 0, Explod we got us a GUN]
type = Explod
trigger1 = AnimElem = 6
anim = 924
postype = p1
bindtime = 666
sprpriority = 5
ownpal = 1
removeongethit = 1

[State 0, Snd Whoosh]
type = PlaySnd
trigger1 = Time = 0
trigger2 = AnimTime = -1
value = F2,3
[State 0, Snd Aim]
type = PlaySnd
trigger1 = AnimElem = 4
value = S920,0

[State 0, Snd Voice Aim]
type = PlaySnd
trigger1 = AnimElem = 2 && Var(5)
trigger2 = AnimElem = 6 && !Var(5)
value = S11000 + Var(5),100 + random%3
channel = 0
[State 0, Snd Voice Success]
type = PlaySnd
trigger1 = AnimElem = 12, 1 && Var(7)
trigger1 = RoundState = 2
value = S11002,100 + random%6
channel = 0

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 6
name = "i could eat a bullet"
ID = 925
stateno = 925
pos = 60,-66
postype = p1
ownpal = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = AnimElemNo(0) < 10
value = ,NT,ST,HT
time = 1
[State 0, NotHitBy]
type = NotHitBy
trigger1 = AnimElemNo(0) >= 10
value = SCA
time = 1

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 921
time = 1

[State 0, PosAdd]
type = PosAdd
trigger1 = !Time
trigger1 = BackEdgeDist < 0 
x = -BackEdgeDist

[State 0, Var Leeeeee Cooldown]
type = ParentVarSet
trigger1 = !Time
v = 42
value = 320

[State 0, DestroySelf]
type = DestroySelf
trigger1 = AnimTime = -1
trigger2 = RoundState = 4 && Parent,StateNo = 182

;---------------------------------------------------------------------------
; H - Lee Owch
[Statedef 921]
type    = A
movetype= H
physics = N
sprpriority = -1
anim = 923

[State 0, Offset]
type = Offset
trigger1 = AnimElemNo(0) = 1
x = -1+random%3
y = -1+random%3

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 2
x = -2 - random%4 - BackEdgeDist * 0.05
y = -4 - random%4 - BackEdgeDist * 0.005
[State 0, VelAdd]
type = VelAdd
trigger1 = AnimElemNo(0) >= 2
y = 0.4

[State 0, Snd Voice Unsuccess]
type = PlaySnd
trigger1 = !Time
value = S11003,100 + random%7
channel = 0

[State 0, Var Lemmy Cooldown]
type = ParentVarSet
trigger1 = !Time
v = 42
value = 400

[State 0, DestroySelf]
type = DestroySelf
trigger1 = Time = 64

;---------------------------------------------------------------------------
; H - Bullet
[Statedef 925]
type    = S
movetype= A
physics = N
anim = 925
velset = 12 + 4 * Parent,Var(5),0
sprpriority = 3

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, VarSet]
type = VarSet
trigger1 = !Time
v = 5
value = 0;Parent,Var(5)

[State 0, Counter Check Reset]
type = VarSet
trigger1 = !MoveContact
v = 10
value = Root,Var(10) * !Root,Var(51)
ignorehitpause = 1
[State 0, Scaling Reset]
type = VarSet
trigger1 = !MoveContact
fv = 10
value = max(Root,FVar(8) + (Var(10)=1)*const(BC.CounterBonus),const(BC.ScalingMin))
ignorehitpause = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = !Time
value = ,NA,SA,HA,NT,ST,HT
time = 666
[State 0, HitOverride]
type = HitOverride
trigger1 = !Time
attr = SCA,NP,SP,HP
stateno = stateno + 1
time = 666

[State 0, Explod Trail]
type = Explod
trigger1 = 1
anim = 926
postype = p1
pos = -vel x,0
scale = vel x,2
sprpriority = -5
ownpal = 1

[State 0, Snd Fire]
type = PlaySnd
trigger1 = !Time
value = S920,1

[State 0, VarSet]
type = VarSet
trigger1 = !Time 
v = 12
value = 112; + 16 * Var(5)

[State 0, HitDef]
type = HitDef
trigger1 = !MoveContact && !MoveReversed
attr = S,SP
hitflag = MAF
guardflag = MA
animtype = medium
priority = 3,Hit
damage = Ceil(Var(12) * FVar(10)),Ceil(Var(12)*const(BC.ChipLight))
guardpoints = floor((32 + Var(12)) * 0.5)
pausetime = 1, 12 + Root,Var(13)
sparkno = -1;10 + random%4 + (Var(10)=1) * 5
guard.sparkno = 40
sparkxy = 0,0;Floor(P2Dist X*0.5),-16+Floor(P2Dist Y*0.5)
hitsound = -1;1,2
guardsound = 5,1
ground.type = Low
ground.slidetime = 12
ground.hittime = 12
guard.hittime = 8
air.hittime = 12
yaccel = 0.5
fall = (!Var(5)=0 && !(Var(10) = 2 || Root,Var(11) >= 2))
air.fall = 1
ground.velocity = -4,-4 * (!Var(5)=0 && !(Var(10) = 2 || Root,Var(11) >= 2))
air.velocity = -3,-1 - 3 * Var(5)
getpower = floor(Var(12)*Root,Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Root,Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0

[State 0, ParentVarSet]
type = ParentVarSet
trigger1 = 1
v = 31
value = floor(P2Dist X)

[State 0, PalFX]
type = PalFX
trigger1 = !Time
time = 666
add = 16,16,16
sinadd = 32,32,32,4

[State 0, DestroySelf]
type = DestroySelf
trigger1 = FrontEdgeDist < -64
[State 0, DestroySelf]
type = ChangeState
trigger1 = MoveContact
trigger2 = MoveReversed
trigger3 = Root,MoveType = H && Root,StateNo != [120,160)
value = 926

;---------------------------------------------------------------------------
; H - Bullet Hit
[Statedef 926]
type    = A
movetype= I
physics = N
anim = 666
velset = 0,0
movehitpersist = 1
hitdefpersist = 1
sprpriority = 3

[State 0, Snd Hit]
type = PlaySnd
triggerall = !Time
trigger1 = !NumTarget && MoveHit
trigger1 = TeamSide = 1
trigger2 = NumTarget && MoveHit
trigger3 = gethitvar(damage) > 0
trigger3 = TeamSide = 1
value = F1,2

[State 0, Var I Did It!]
type = ParentVarSet
trigger1 = !Time
trigger1 = MoveHit
v = 7
value = 1

[State 0, Explod HitSpark]
type = Explod
triggerall = !Time
trigger1 = NumTarget && MoveHit && !MoveReversed
anim = F ifelse(Var(10)=2,30,10 + random%4)
pos = 0,-P2Dist Y
postype = p2
pausemovetime = 666
supermovetime = 666
sprpriority = 9
ontop = 1
ownpal = 1

[State 0, Var Dire Counter Stack On]
type = RootVarSet
triggerall = !Time && Var(10) = 2
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
v = 11
value = 2
ignorehitpause = 1

[State 0, HitAdd]
type = RootVarAdd
triggerall = !Time
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
v = 51
value = 1

[State 0, ParentVarSet Counter Message]
type = RootVarSet
triggerall = !Time && Var(10)
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
v = 32
value = 63 + (Var(10) = 2) + (Var(10) = 3) * 10

[State 0, Dampening S]
type = RootVarSet
triggerall = !Time
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
fv = 8
value = Root,FVar(8)*(const(BC.ScalingM1) + const(BC.ScalingM2) * ifelse(Root,FVar(8)<1,1-Root,FVar(8),0))
ignorehitpause = 1

[State 0, TargetState]
type = TargetState
triggerall = !Time
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
trigger1 = Root,Var(11) >= 2
value = 5325

[State 0, Map Dire Trigger]
type = RootMapSet
triggerall = Var(10) = 2
triggerall = !Time
triggerall = NumTarget && MoveHit
trigger1 = Target,MoveType = H
map = "DireAct"
value = 2
ignorehitpause = 1

[State 0, Var Gauge Gain]
type = RootVarAdd
triggerall = Root,Name = "BERK"
triggerall = !Time
triggerall = NumTarget && MoveHit
trigger1 = Target,MoveType = H
v = 18
value = 250
ignorehitpause = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = Time = 2

;---------------------------------------------------------------------------
; CTech L
[Statedef 950]
type    = S
movetype= A
physics = S
ctrl = 0
velset = 0,0
anim = 950 + (PrevStateNo=1400)

[State 0, PalFX]
type = PalFX
trigger1 = Time = [2,16]
trigger1 = Time%3 = 1
time = 1
add = 32,32,32

[State 0, AttackDist]
type = AttackDist
trigger1 = 1
value = 0

[State 0, ReversalDef]
type = ReversalDef
trigger1 = Time <= 16
reversal.attr = SCA,NA,SA,NP,SP
pausetime = 0,0
hitsound = F0,3
p1stateno = 960

[State 0, PalFX]
type = PalFX
trigger1 = Time = 1
time = 15 * 2
add = 24,24,24
sinadd = 24,24,24,3

;[State 0, HitOverride]
;type = HitOverride
;trigger1 = Time <= 16
;attr = SCA,NP,SP
;stateno = 960
;time = 1

[State 0, HitDef]
type = HitDef
trigger1 = Time = 17

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = Time = 17
movetype = I

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; CTech L S
[Statedef 960]
type    = S
movetype= A
physics = S
facep2 = 1
velset = 0,0
sprpriority = -5
anim = 960

[State 0, PalFX]
type = PalFX
trigger1 = Time = 2
time = 2
add = 128,128,128

[State 0, Helper]
type = Helper
trigger1 = !Time
name = "REFLECTOR! REFLECTOR! REFLECTOR! REFLECTOR! REFLECTOR! REFLECTOR!"
stateno = 966
pos = 16,-40
postype = p1
[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 2

[State 0, VarAdd Gauge]
type = VarAdd
trigger1 = !Time
v = 18
value = 250

[State 0, Snd Swing]
type = PlaySnd
trigger1 = !Time
value = S0,1

[State 0, Var Voice Bank]
type = VarSet
trigger1 = !Time
v = 33
value = 970
[State 0, Var Voice Variant]
type = VarSet
trigger1 = !Time
v = 34
value = random%8

[State 0, Var Tobacco Charge]
type = VarAdd
trigger1 = !Time 
trigger1 = Var(44) < 1
v = 44
value = 1

[State 0, CtrlSet]
type = CtrlSet
trigger1 = AnimElem = 6
value = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; QCB+LK
[Statedef 961]
type    = S
movetype= A
physics = S
facep2 = 1
ctrl = 0
velset = 0,0
movehitpersist = 1
anim = 965

[State 0, VarSet]
type = VarSet
trigger1 = !Time
trigger1 = PrevStateNo != 962
v = 5
value = 0

;[State 0, PalFX]
;type = PalFX
;trigger1 = !Time
;time = 2
;add = 192,182,192
;color = 64
;ignorehitpause = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = AnimElem = 5
value = ,NP,SP,HP
time = 1

;[State 0, Helper]
;type = Helper
;trigger1 = !Time
;name = "REFLECTOR! REFLECTOR! REFLECTOR! REFLECTOR! REFLECTOR! REFLECTOR!"
;stateno = 966
;pos = 16,-40
;postype = p1
[State 0, Helper]
type = Helper
trigger1 = AnimElem = 5
name = "Gas Hed Marches On"
stateno = 967
id = 967
pos = 32,-64
ownpal = 1
postype = p1

[State 0, AttackDist]
type = AttackDist
trigger1 = 1
value = 0

[State 0, Var Voice Bank]
type = VarSet
trigger1 = AnimElem = 5
v = 33
value = 971
[State 0, Var Voice Variant]
type = VarSet
trigger1 = AnimElem = 5
v = 34
value = random%4

[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 4
trigger2 = AnimElem = 5
x = 8
[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 8
trigger2 = AnimTime = 0
x = -8

[State 0, VarAdd Gauge]
type = VarAdd
trigger1 = !Time
v = 18
value = 333

[State 0, VarAdd]
type = VarAdd
trigger1 = !Time
trigger1 = Var(44) > 0 
v = 44
value = -1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 5
movetype = I
[State 0, CtrlSet]
type = CtrlSet
trigger1 = AnimElem = 8
value = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; QCB+SK
[Statedef 962]
type    = S
movetype= A
physics = S
ctrl = 0

[State 0, VarSet]
type = VarSet
trigger1 = !Time
v = 5
value = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = !Time
value = 961

;---------------------------------------------------------------------------
; H - Bernie Blocker
[Statedef 966]
type    = S
movetype= I
physics = N
anim = 967

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = ,NA,SA,HA,NT,ST,HT
time = 2
[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NP,SP,HP
stateno = 966

[State 0, BindToParent]
type = BindToParent
trigger1 = 1
time = 1
pos = 0,0

[State 0, DestroySelf]
type = DestroySelf
trigger1 = Parent,StateNo != 960
trigger2 = Parent,StateNo = 960 && Parent,Time >= 22

;---------------------------------------------------------------------------
; H - SmokeWave
[Statedef 967]
type    = S
movetype= A
physics = N
anim = 966
velset = 2+2*Parent,Var(5),0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
flag2 = invisible
ignorehitpause = 1

[State 0, AttackDist]
type = AttackDist
trigger1 = 1
value = 64

[State 0, Counter Check Reset]
type = VarSet
trigger1 = !MoveContact
v = 10
value = Parent,Var(10) * !Root,Var(51)
ignorehitpause = 1
[State 0, Scaling Reset]
type = VarSet
trigger1 = !MoveContact
fv = 10
value = max(Parent,FVar(8) + (Var(10)=1)*const(BC.CounterBonus),const(BC.ScalingMin))
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = Time%4 = 0
anim = 966
pos = (-100+random%201)*0.01,(-100+random%201)*0.01
postype = p1
vel = -1 + (-100+random%201)*0.001 + Vel X * 0.25,(-100+random%201)*0.001
sprpriority = random%9

[State 0, Helper]
type = Helper
trigger1 = !Time
name = "REFLECTOR! REFLECTOR! REFLECTOR! REFLECTOR! REFLECTOR! REFLECTOR!"
stateno = 969
pos = 0,0
postype = p1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = !Time
value = SCA
time = 666

[State 0, Snd Fire]
type = PlaySnd
trigger1 = !Time
value = S965,0

[State 0, VarSet]
type = VarSet
trigger1 = !Time 
v = 12
value = 120

[State 0, HitDef]
type = HitDef
trigger1 = !MoveContact && !MoveReversed
attr = S,SP
hitflag = MAF
guardflag = MA
animtype = medium
priority = 3,Hit
damage = Ceil(Var(12) * FVar(10)),Ceil(Var(12)*const(BC.ChipLight))
guardpoints = floor((32 + Var(12)) * 0.5)
pausetime = 0, 12 + Root,Var(13)
sparkno = -1
guard.sparkno = 40
sparkxy = 0,0
hitsound = -1
guardsound = 5,1
ground.type = Low
ground.slidetime = 15
ground.hittime = 15
guard.hittime = 8
yaccel = 0.5
air.fall = 1
ground.velocity = -4,0
air.velocity = -1.5,-4
getpower = floor(Var(12)*Root,Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Root,Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0

[State 0, ParentVarSet]
type = ParentVarSet
trigger1 = 1
v = 31
value = floor(P2Dist X)

[State 0, PalFX]
type = PalFX
trigger1 = !Time
time = 666
add = 16,16,16
sinadd = 32,32,32,4

[State 0, DestroySelf]
type = ChangeState
trigger1 = MoveContact && (NumTarget || Abs(P2Dist X) <= 32)
trigger2 = MoveReversed
trigger3 = FrontEdgeDist < -64
trigger4 = Time = 192
trigger5 = Root,MoveType = H && Root,StateNo != [120,160)
value = 968

;---------------------------------------------------------------------------
; H - SmokeWave Hit
[Statedef 968]
type    = A
movetype= I
physics = N
anim = 666
velset = 0,0
movehitpersist = 1
hitdefpersist = 1
sprpriority = 3

[State 0, Snd Fire]
type = PlaySnd
triggerall = !Time
trigger1 = !NumTarget && MoveContact
trigger1 = TeamSide = 1
trigger2 = NumTarget && MoveContact
trigger3 = gethitvar(damage) > 0
trigger3 = TeamSide = 1
value = F1,10
[State 0, Snd Hit]
type = PlaySnd
triggerall = !Time
trigger1 = !NumTarget && MoveHit
trigger1 = TeamSide = 1
trigger2 = NumTarget && MoveHit
trigger3 = gethitvar(damage) > 0
trigger3 = TeamSide = 1
value = F1,2

[State 0, Explod HitSpark]
type = Explod
triggerall = !Time
trigger1 = NumTarget && MoveHit && !MoveReversed
anim = F ifelse(Var(10)=2||Parent,Var(11)>=2,30,10 + random%4)
pos = 0,-P2Dist Y
postype = p2
pausemovetime = 666
supermovetime = 666
sprpriority = 9
ontop = 1
ownpal = 1

[State 0, VarAdd Gauge Gain]
type = ParentVarAdd
triggerall = !Time
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
v = 18
value = 250

[State 0, Var Dire Counter Stack On]
type = ParentVarSet
triggerall = !Time && Var(10) = 2
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
v = 11
value = 3
ignorehitpause = 1

[State 0, HitAdd]
type = ParentVarAdd
triggerall = !Time
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
v = 51
value = 1

[State 0, ParentVarSet Counter Message]
type = ParentVarSet
triggerall = !Time && Var(10)
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
v = 32
value = 63 + (Var(10) = 2) + (Var(10) = 3) * 10

[State 0, Dampening S]
type = ParentVarSet
triggerall = !Time
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
fv = 8
value = Parent,FVar(8)*(const(BC.ScalingM1) + const(BC.ScalingM2) * ifelse(Parent,FVar(8)<1,1-Parent,FVar(8),0))
ignorehitpause = 1

[State 0, TargetState]
type = RootMapSet
triggerall = !Time
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
map = "HitFX"
value = 1
ignorehitpause = 1
redirectid = Target,ID

[State 0, TargetState]
type = TargetState
triggerall = !Time
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
trigger1 = Parent,Var(11)>=2
value = 5325

[State 0, Map Dire Trigger]
type = RootMapSet
triggerall = Parent,Var(11) >= 2
triggerall = !Time
triggerall = NumTarget && MoveHit
trigger1 = Target,MoveType = H
map = "DireAct"
value = Root,Var(11) - 1
ignorehitpause = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = Time = 2

;---------------------------------------------------------------------------
; H - Smoke Blocker
[Statedef 969]
type    = S
movetype= I
physics = N
anim = 967

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = ,NA,SA,HA,NT,ST,HT,HP
time = 2
[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NP,SP
stateno = 969

[State 0, BindToParent]
type = BindToParent
trigger1 = 1
time = 1
pos = 0,24

[State 0, DestroySelf]
type = DestroySelf
trigger1 = Parent,StateNo != 967
trigger2 = FrontEdgeDist < -48

;---------------------------------------------------------------------------
; CTech S-K
[Statedef 970]
type    = S
movetype= A
physics = S
ctrl = 0
velset = 0,0
anim = 970

[State 0, AttackDist]
type = AttackDist
trigger1 = 0
value = 0

[State 0, VarSet]
type = VarSet
trigger1 = !Time
v = 5
value = 1
[State 0, VarSet]
type = VarSet
triggerall = Var(5) && AnimElemNo(0) < 7
trigger1 = command != "holdy" && command != "holdb"
trigger1 = command != "holdc"
v = 5
value = 0

[State 0, Var Voice Bank]
type = VarSet
trigger1 = AnimElem = 4
v = 33
value = 860
[State 0, Var Voice Variant]
type = VarSet
trigger1 = AnimElem = 4
v = 34
value = random%8

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = AnimElem = 8 && Anim = 970
trigger1 = Var(5)
value = 971
elem = 6

[State 0, Snd Powerup]
type = PlaySnd
trigger1 = AnimElem = 15 && Anim = 971
value = S970,0

[State 0, Explod BigSpark]
type = Explod
trigger1 = AnimElem = 15 && Anim = 971
anim = F20
pos = 2,-66
postype = p1
sprpriority = 9
ontop = 1
ownpal = 1
removeongethit = 1

[State 0, PalFX]
type = PalFX
trigger1 = AnimElemNo(0) >= 4 && Anim = 970
time = 1
add = 128-16*min(8,30+AnimTime),128-16*min(8,30+AnimTime),128-16*min(8,30+AnimTime)
[State 0, PalFX]
type = PalFX
trigger1 = AnimElemNo(0) >= 15 && Anim = 971
time = 1
add = 128-16*min(8,19+AnimTime),128-16*min(8,19+AnimTime),128-16*min(8,19+AnimTime)

[State 0, Var Gauge Gain]
type = VarAdd
trigger1 = Var(45) >= 2
trigger1 = AnimElem = 15 && Anim = 971
v = 18
value = 100
[State 0, Var Poised]
type = MapSet
trigger1 = AnimElem = 4 && Anim = 970 && Map(BerkRoll1) = 0 && Map(BerkDice1) = 0
trigger2 = AnimElem = 15 && Anim = 971 && Map(BerkRoll1) = 0
trigger3 = AnimElem = 4 && Anim = 970 && Map(BerkDice1) && Map(BerkDice2)
trigger3 = Map(BerkDice1) <= Map(BerkDice2)
map = "BerkRoll1"
value = 20
[State 0, Var Poised]
type = MapSet
trigger1 = AnimElem = 4 && Anim = 970 && (Map(BerkDice1) != 0 || Map(BerkRoll1) = [1,20)) && Map(BerkDice2) = 0
trigger2 = AnimElem = 15 && Anim = 971 && Map(BerkRoll2) = 0
trigger3 = AnimElem = 4 && Anim = 970 && Map(BerkDice1) && Map(BerkDice2)
trigger3 = Map(BerkDice1) > Map(BerkDice2)
map = "BerkRoll2"
value = 20
[State 0, Map Set Rolled Die 1]
type = MapSet
trigger1 = Map(BerkRoll1) = 20
trigger2 = AnimElem = 15 && Anim = 971
map = "BerkDice1"
value = ifelse(Map(BerkDice1)=6&&Map(BerkDice2)=6,min(6,1 + random%6 + 64 * (Anim=971)),min(6,Map(BerkDice1) + 1 + random % (6 - Map(BerkDice1)) + 64 * (Anim=971)))
ignorehitpause = 1
[State 0, Map Set Rolled Die 2]
type = MapSet
trigger1 = Map(BerkRoll2) = 20
trigger2 = AnimElem = 15 && Anim = 971
map = "BerkDice2"
value = min(6,Map(BerkDice2) + 1 + random % (6 - Map(BerkDice2)) + 64 * (Anim=971))
ignorehitpause = 1

[State 0, CtrlSet]
type = CtrlSet
trigger1 = AnimElem = 9 && Anim = 970
trigger2 = AnimElem = 17 && Anim = 971
value = 1

[State 0, VarSet]
type = VarSet
trigger1 = AnimElem = 4 && Anim = 970
trigger2 = AnimElem = 15 && Anim = 971
v = 9
value = 3 + 3 * (Anim=971)

[State 1000, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; RI
[Statedef 1000]
type    = S
movetype= A
physics = S
velset = 0,0
anim = 1000
movehitpersist = 1
ctrl = 0
sprpriority = 2

[State 0, Var Hold On]
type = VarSet
trigger1 = !Time
v = 6
value = 1
[State 0, Var Hold Off]
type = VarSet
triggerall = Var(6)
trigger1 = command != "holdy" && command != "holdc" && !Var(15)
trigger2 = Var(15) && MoveHit
trigger3 = Var(15) && Var(43) = [300,400) && EnemyNear,StateNo = [5110,5120]
v = 6
value = 0
[State 0, Var RI Charge Reset]
type = VarSet
trigger1 = !Time
v = 43
value = 50*floor(Var(43)*0.02)
[State 0, Var RI Charge]
type = VarSet
trigger1 = AnimElemNo(0) = [4,7]
trigger1 = Var(6)
v = 43
value = min(500,floor(Var(43) + max(2,5 - Var(43)*0.009 + 5 * (Time<=13) + 25 * (Var(43)<100) + 1 * min(Map(BernTimer),2))))
[State 0, MapSet]
type = MapSet
trigger1 = AnimElemNo(0) = [4,7]
trigger1 = Var(6)
trigger1 = Map(BernTimer) > 0
trigger1 = Var(43) < 500
map = "BernTimer"
value = max(0,Map(BernTimer)-2)

[State 0, ChangeAnim]
type = ChangeAnim
triggerall = AnimElemNo(0) = [4,7]
triggerall = Var(6)
trigger1 = Var(43) >= 520
trigger2 = command = "holdfwd" || command = "holdback" || command = "holddown" || command = "holdup"
trigger2 = Time > 12
trigger3 = Var(15) && (P2BodyDist X < 64 && EnemyNear,StateNo < 5000 || EnemyNear,MoveType = A)
trigger3 = Time > 12
value = Anim
elem = 8
[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = AnimElem = 7
trigger1 = Var(6)
value = Anim
elem = 4

[State 0, Snd Hey Shut Up. I Got Somethin.]
type = PlaySnd
trigger1 = Time%40 = 8
value = S1000,0
channel = 1
[State 0, StopSnd]
type = StopSnd
trigger1 = Time >= 8
trigger1 = !Var(6)
trigger2 = AnimElemNo(0) = 3
trigger2 = Var(43) >= 500
channel = 1

[State 0, Var Voice Bank]
type = VarSet
trigger1 = Time = 24
v = 33
value = 900
[State 0, Var Voice Variant]
type = VarSet
trigger1 = Time = 24
v = 34
value = random%9

[State 0, Var Voice Bank]
type = VarSet
trigger1 = AnimElem = 8
trigger1 = Time > 24
v = 33
value = 901
[State 0, Var Voice Variant]
type = VarSet
trigger1 = AnimElem = 8
trigger1 = Time > 24
v = 34
value = random%6

[State 0, Explod Bubble Init]
type = Explod
trigger1 = AnimElemNo(0) = 3
trigger1 = Var(6) = 1
trigger1 = Var(43) < 500
anim = 1017
id = 3000
postype = p1
removetime = 1
sprpriority = 9
ontop = 1
ownpal = 1
[State 0, Explod Bubble Init]
type = Explod
trigger1 = AnimElemNo(0) = [4,7]
trigger1 = Var(6) = 1
anim = 1018 + floor(0.25*(GameTime%8)) + 10 * floor(Var(43)*0.01)
id = 3000
postype = p1
removetime = 1
sprpriority = 9
ontop = 1
ownpal = 1

[State 0, AttackDist]
type = AttackDist
trigger1 = MoveType = A
value = 0

[State 0, MoveHitReset]
type = MoveHitReset
trigger1 = MoveHit
trigger1 = !Var(51)

[State 1000, 7]
type = ChangeState
trigger1 = AnimElemNo(0) = [3,7]
trigger1 = !Var(6)
trigger2 = AnimElemNo(0) = 3
trigger2 = Var(43) >= 500
value = 1010 + 10 * floor(Var(43)*0.01)
[State 1000, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; f+RI
[Statedef 1001]
type    = S
movetype= A
physics = S
velset = 0,0
anim = 1001
movehitpersist = 1
ctrl = 0
sprpriority = 2

[State 1000, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 1010 + 10 * floor(Var(43)*0.01)

;---------------------------------------------------------------------------
; RI, Bat
[Statedef 1010]
type    = S
movetype= A
physics = S
velset = 0,0
anim = 1010
ctrl = 0

[State 0, Snd Swing]
type = PlaySnd
trigger1 = AnimElem = 4, 2
value = F0,2
[State 0, Snd Whack]
type = PlaySnd
trigger1 = Var(8) = 1
value = S1010,0
ignorehitpause = 1

[State 0, Var Voice Bank]
type = VarSet
trigger1 = AnimElem = 5
v = 33
value = 910
[State 0, Var Voice Variant]
type = VarSet
trigger1 = AnimElem = 5
v = 34
value = random%10

[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 6 
x = 8
[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 10
trigger2 = AnimElem = 11
x = -4

[State 0, Explod]
type = Explod
trigger1 = AnimElem = 10
anim = 1011 
pos = -16,-78
postype = p1
vel = -3,-2
accel = 0,0.5
removetime = 16
shadow = -1
ownpal = 1

[State 0, Var Damage Value]
type = VarSet
trigger1 = !MoveContact && !MoveReversed
v = 12
value = 128

[State 0, HitDef]
type = HitDef
trigger1 = !MoveContact && !MoveReversed
attr = S,SA
hitflag = MAF
guardflag = M
animtype = medium
priority = 5,Hit
damage = Ceil(Var(12) * FVar(10)),Ceil(Var(12)*const(BC.ChipLight))
guardpoints = floor((32 + Var(12)) * 0.5)
pausetime = 12,12+Var(13)
guard.pausetime = 12,12
sparkno = ifelse(Var(10)=2||Var(11)>=2,30,10 + random%4 + (Var(10)=1) * 5)
guard.sparkno = 40
sparkxy = -40+Floor(P2Dist X*0.5),-56+Floor(P2Dist Y*0.5)
hitsound = 1,2
guardsound = 5,1
ground.type = High
ground.slidetime = 15
ground.hittime = 15
guard.hittime = 9
yaccel = 0.5
;air.fall = 1
ground.velocity = -4
air.velocity = -3,-3
p2facing = 1
getpower = floor(Var(12)*Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))

[State 0, TargetState]
type = TargetState
triggerall = MoveHit && !MoveReversed
triggerall = NumTarget && EnemyNear,MoveType = H
trigger1 = Var(8) = 1
trigger1 = Var(10) != 2 && Var(11) <= 1
trigger1 = EnemyNear,StateType = A
value = 5090
ignorehitpause = 1
[State 0, Map Dire Trigger]
type = MapSet
triggerall = MoveHit && !MoveReversed
triggerall = NumTarget && EnemyNear,MoveType = H
triggerall = Var(10) = 2 || Var(11) > 1
trigger1 = Var(8) = 1
map = "DireAct"
value = 5340
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = AnimElem = 6
v = 43
value = 0
[State 0, Var Gauge Gain]
type = VarAdd
triggerall = Name = "BERN"
trigger1 = MoveHit && Var(8) = 1
v = 18
value = 100
ignorehitpause = 1

[State 0, CtrlSet]
type = CtrlSet
trigger1 = AnimElem = 10
value = 1
[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 7
movetype = I

[State 1000, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; RI, Pipe
[Statedef 1020]
type    = S
movetype= A
physics = S
velset = 0,0
anim = 1020
ctrl = 0

[State 0, Snd Swing]
type = PlaySnd
trigger1 = AnimElem = 4, 2
value = F0,8
[State 0, Snd Clang]
type = PlaySnd
trigger1 = Var(8) = 1
value = S1020,1
ignorehitpause = 1

[State 0, Var Voice Bank]
type = VarSet
trigger1 = AnimElem = 5
v = 33
value = 920
[State 0, Var Voice Variant]
type = VarSet
trigger1 = AnimElem = 5
v = 34
value = random%6

[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 6 
x = 8
[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 10
trigger2 = AnimElem = 11
x = -4

[State 0, Explod]
type = Explod
trigger1 = AnimElem = 10
anim = 1021 
pos = -16,-78
postype = p1
vel = -5,-2
accel = 0,0.6
removetime = 16
shadow = -1
ownpal = 1

[State 0, Var Damage Value]
type = VarSet
trigger1 = !MoveContact && !MoveReversed
v = 12
value = 136

[State 0, HitDef]
type = HitDef
trigger1 = !MoveContact && !MoveReversed
attr = S,SA
hitflag = MAF
guardflag = M
animtype = medium
priority = 5,Hit
damage = Ceil(Var(12) * FVar(10)),Ceil(Var(12)*const(BC.ChipLight))
guardpoints = floor((32 + Var(12)) * 0.5)
pausetime = 12,12+Var(13)
guard.pausetime = 12,12
sparkno = ifelse(Var(10)=2||Var(11)>=2,30,10 + random%4 + (Var(10)=1) * 5)
guard.sparkno = 40
sparkxy = -40+Floor(P2Dist X*0.5),-56+Floor(P2Dist Y*0.5)
hitsound = 1,3
guardsound = 5,1
ground.type = High
ground.slidetime = 24
ground.hittime = 24
guard.hittime = 18
yaccel = 0.5
air.fall = 1
ground.velocity = -3,0
air.velocity = -4,-3
p2facing = 1
getpower = floor(Var(12)*Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))

[State 0, TargetState]
type = TargetState
triggerall = MoveHit && !MoveReversed
triggerall = NumTarget && EnemyNear,MoveType = H
trigger1 = Var(8) = 1
trigger1 = Var(10) != 2 && Var(11) <= 1
trigger1 = EnemyNear,StateType != A
value = 5350
ignorehitpause = 1
[State 0, Map Dire Trigger]
type = MapSet
triggerall = MoveHit && !MoveReversed
triggerall = NumTarget && EnemyNear,MoveType = H
triggerall = Var(10) = 2 || Var(11) > 1
trigger1 = Var(8) = 1
map = "DireAct"
value = 5330
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = AnimElem = 6
v = 43
value = 0
[State 0, Var Gauge Gain]
type = VarAdd
triggerall = Name = "BERN"
trigger1 = MoveHit && Var(8) = 1
v = 18
value = 150
ignorehitpause = 1

[State 0, CtrlSet]
type = CtrlSet
trigger1 = AnimElem = 11
value = 1
[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 7
movetype = I

[State 1000, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; RI, Chair
[Statedef 1040]
type    = S
movetype= A
physics = N
velset = 0,0
anim = 1040
ctrl = 0

[State 0, Snd Swing]
type = PlaySnd
trigger1 = AnimElem = 4, 2
value = F0,8
[State 0, Snd Crash]
type = PlaySnd
trigger1 = Var(8) = 1
trigger2 = AnimElem = 9 && !MoveContact
value = S1030,0
ignorehitpause = 1

[State 0, Var Voice Bank]
type = VarSet
trigger1 = AnimElem = 4
v = 33
value = 930
[State 0, Var Voice Variant]
type = VarSet
trigger1 = AnimElem = 4
v = 34
value = random%8

[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 8 
x = 8
[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 11
trigger2 = AnimElem = 12
x = -4

[State 0, VelSet]
type = VelAdd
trigger1 = AnimElemNo(0) = 6
x = 4
[State 0, VelMul]
type = VelMul
trigger1 = AnimElemNo(0) >= 7
x = 0.7

[State 0, Explod]
type = Explod
trigger1 = AnimElem = 11
anim = 1041 
pos = 40,-24
postype = p1
vel = 3,-4
accel = 0,0.6
removetime = 16
shadow = -1
ownpal = 1
[State 0, Explod Dust Fwd]
type = Explod
trigger1 = AnimElem = 9 && !MoveContact
anim = F84
pos = 72+random%6,4
postype = p1
facing = -1+(2*random%2)
vel = (20+random%10)*0.1,(-20-random%10)*0.1
accel = -0.05,0.15
sprpriority = 4
ownpal = 1
[State 0, Explod Dust Back]
type = Explod
trigger1 = AnimElem = 9 && !MoveContact
anim = F84
pos = 56-random%6,4
postype = p1
facing = -1+(2*random%2)
vel = (-20-random%10)*0.1,(-20-random%10)*0.1
accel = 0.05,0.15
sprpriority = 4
ownpal = 1

[State 0, VarSet]
type = VarSet
trigger1 = AnimElem = 9 && !MoveContact
v = 9
value = 4

[State 0, Var Damage Value]
type = VarSet
trigger1 = !MoveContact && !MoveReversed
v = 12
value = 152

[State 0, HitDef]
type = HitDef
trigger1 = !MoveContact && !MoveReversed
trigger1 = AnimElemNo(0) = 7
attr = S,SA
hitflag = AF
animtype = heavy
priority = 5,Hit
damage = Ceil(Var(12) * FVar(10)),Ceil(Var(12)*const(BC.ChipMid))
pausetime = 12,12+Var(13)
guard.pausetime = 12,12
sparkno = ifelse(Var(10)=2,30,10 + random%4 + (Var(10)=1) * 5)
guard.sparkno = 40
sparkxy = -40+Floor(P2Dist X*0.5),-56+Floor(P2Dist Y*0.5)
hitsound = 1,3
guardsound = 5,1
ground.type = High
ground.slidetime = 24
ground.hittime = 24
yaccel = 0.5
fall = 1
ground.velocity = -3,-4
air.velocity = -4 + P2BodyDist X * 0.01,8
fall.yvelocity = -6 + EnemyNear,Pos Y * 0.05
p2facing = 1
getpower = floor(Var(12)*Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))
[State 0, HitDef]
type = HitDef
trigger1 = !MoveContact && !MoveReversed
trigger1 = AnimElemNo(0) >= 8
attr = S,SA
hitflag = MAFD
guardflag = H
animtype = heavy
priority = 5,Hit
damage = Ceil(Var(12) * FVar(10)),Ceil(Var(12)*const(BC.ChipMid))
guardpoints = floor((32 + Var(12)) * 1.5)
pausetime = 12,12+Var(13)
guard.pausetime = 12,12
sparkno = ifelse(Var(10)=2,30,10 + random%4 + (Var(10)=1) * 5)
guard.sparkno = 40
sparkxy = -40+Floor(P2Dist X*0.5),-56+Floor(P2Dist Y*0.5)
hitsound = 1,3
guardsound = 5,1
ground.type = High
ground.slidetime = 21
ground.hittime = 21
guard.hittime = 14
yaccel = 0.5
fall = 1
ground.velocity = -3,-4
air.velocity = -4 + P2BodyDist X * 0.01,8
down.velocity = 0,-6
fall.yvelocity = -6 + EnemyNear,Pos Y * 0.025
p2facing = 1
getpower = floor(Var(12)*Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))

[State 0, TargetState]
type = TargetState
triggerall = MoveHit && !MoveReversed
triggerall = NumTarget && EnemyNear,MoveType = H
trigger1 = Var(8) = 1
trigger1 = Var(10) != 2
value = 5355
ignorehitpause = 1
[State 0, Map Dire Trigger]
type = MapSet
triggerall = MoveHit && !MoveReversed
triggerall = NumTarget && EnemyNear,MoveType = H
triggerall = Var(10) = 2
trigger1 = Var(8) = 1
map = "DireAct"
value = 5345
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = AnimElem = 7
v = 43
value = 0
[State 0, Var Gauge Gain]
type = VarAdd
triggerall = Name = "BERN"
trigger1 = MoveHit && Var(8) = 1
v = 18
value = 200
ignorehitpause = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 9
movetype = I

[State 1000, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; RI, Brick
[Statedef 1030]
type    = S
movetype= A
physics = S
velset = 0,0
anim = 1030
movehitpersist = 1
ctrl = 0

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 5
name = "playstation portable"
ID = 1035
stateno = 1035
pos = 52,-104
postype = p1
ownpal = 1

[State 0, Explod]
type = Explod
trigger1 = AnimElemNo(0) = 2
anim = 1031
ID = 3000
pos = 35,-82
postype = p1
bindtime = 1
sprpriority = 3
shadow = -1
ownpal = 1
removetime = 1
[State 0, Explod]
type = Explod
trigger1 = AnimElemNo(0) = 3
anim = 1031
ID = 3000
pos = 40,-52
postype = p1
bindtime = 1
sprpriority = 3
shadow = -1
ownpal = 1
removetime = 1
[State 0, Explod]
type = Explod
trigger1 = AnimElemNo(0) = 4
anim = 1031
ID = 3000
pos = 48,-54
postype = p1
bindtime = 1
sprpriority = 3
shadow = -1
ownpal = 1
removetime = 1

[State 0, Var Voice Bank]
type = VarSet
trigger1 = AnimElem = 3
v = 33
value = 940
[State 0, Var Voice Variant]
type = VarSet
trigger1 = AnimElem = 3
v = 34
value = random%4

[State 0, VarSet]
type = VarSet
trigger1 = AnimElem = 5
v = 43
value = 0

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 5
movetype = I
[State 0, CtrlSet]
type = CtrlSet
trigger1 = AnimElem = 7
value = 1

[State 1000, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; H - Brick
[Statedef 1035]
type    = S
movetype= I
physics = N
anim = 1035
velset = 0.25 + max(0,P2Dist X * 0.02),-4 - P2Dist Y * 0.01 - max(0,P2Dist X * 0.01)
sprpriority = 3

[State 0, Counter Check Reset]
type = VarSet
trigger1 = !MoveContact
v = 10
value = Parent,Var(10) * !Root,Var(51)
ignorehitpause = 1
[State 0, Scaling Reset]
type = VarSet
trigger1 = !MoveContact
fv = 10
value = max(Parent,FVar(8) + (Var(10)=1)*const(BC.CounterBonus),const(BC.ScalingMin))
ignorehitpause = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = !Time
value = ,NA,SA,HA,NT,ST,HT
time = 666
[State 0, HitOverride]
type = HitOverride
trigger1 = !Time
attr = SCA,NP,SP,HP
stateno = stateno + 1
time = 666

[State 0, VelAdd]
type = VelAdd
trigger1 = 1
y = 0.4

[State 0, Snd Swing]
type = PlaySnd
trigger1 = !Time
value = F0,2

[State 0, VarSet]
type = VarSet
trigger1 = !Time 
v = 12
value = 120

[State 0, HitDef]
type = HitDef
trigger1 = !MoveContact && !MoveReversed
attr = S,SP
hitflag = MAFD
guardflag = MA
animtype = light
priority = 3,Hit
damage = Ceil(Var(12) * FVar(10)),Ceil(Var(12)*const(BC.ChipLight))
guardpoints = floor((32 + Var(12)) * 0.5)
pausetime = 1, 12 + Root,Var(13)
sparkno = -1;10 + random%4 + (Var(10)=1) * 5
guard.sparkno = 40
sparkxy = 0,0;Floor(P2Dist X*0.5),-16+Floor(P2Dist Y*0.5)
hitsound = -1;1,2
guardsound = 5,1
ground.type = Low
ground.slidetime = 12
ground.hittime = 12
guard.hittime = 8
air.hittime = 12
yaccel = 0.5
air.fall = 1
ground.velocity = -3,0
air.velocity = -1.5,-3
getpower = floor(Var(12)*Root,Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Root,Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0

[State 0, ParentVarSet]
type = ParentVarSet
trigger1 = 1
v = 31
value = floor(P2Dist X)

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = Time = 4
movetype = A

[State 0, DestroySelf]
type = ChangeState
trigger1 = MoveContact
trigger2 = MoveReversed
trigger3 = Pos Y + Vel Y > Map(StageGround)
trigger4 = Root,MoveType = H && Root,StateNo != [120,160)
value = 1036

;---------------------------------------------------------------------------
; H - Brick Hit
[Statedef 1036]
type    = A
movetype= I
physics = N
anim = 666
velset = 0,0
movehitpersist = 1
hitdefpersist = 1
sprpriority = 3

[State 0, Snd Hit]
type = PlaySnd
triggerall = !Time
trigger1 = !NumTarget && MoveHit
trigger1 = TeamSide = 1
trigger2 = NumTarget && MoveHit
trigger3 = gethitvar(damage) > 0
trigger3 = TeamSide = 1
value = F1,3
[State 0, Snd No Hit]
type = PlaySnd
triggerall = !Time
trigger1 = !MoveContact
value = F1,1

[State 0, Snd Bricker]
type = PlaySnd
trigger1 = !Time
value = S1040,0

[State 0, Explod HitSpark]
type = Explod
triggerall = !Time
trigger1 = NumTarget && MoveHit && !MoveReversed
anim = F ifelse(Var(10)=2||Parent,Var(11)>=2,30,10 + random%4)
pos = 0,-P2Dist Y
postype = p2
pausemovetime = 666
supermovetime = 666
sprpriority = 9
ontop = 1
ownpal = 1

[State 0, Explod Brick L]
type = Explod
trigger1 = !Time
anim = 1036
postype = p1
vel = -0.01*(50 + random%250),0.01*(-150 - random%350)
accel = 0,0.4
removetime = 16
sprpriority = 3
[State 0, Explod Brick R]
type = Explod
trigger1 = !Time
anim = 1037
postype = p1
vel = 0.01*(50 + random%250),0.01*(-150 - random%350)
accel = 0,0.4
removetime = 16
sprpriority = 3

[State 0, Var Dire Counter Stack On]
type = ParentVarSet
triggerall = !Time && Var(10) = 2
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
v = 11
value = 3
ignorehitpause = 1

[State 0, HitAdd]
type = ParentVarAdd
triggerall = !Time
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
v = 51
value = 1

[State 0, ParentVarSet Counter Message]
type = ParentVarSet
triggerall = !Time && Var(10)
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
v = 32
value = 63 + (Var(10) = 2) + (Var(10) = 3) * 10

[State 0, Dampening S]
type = ParentVarSet
triggerall = !Time
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
fv = 8
value = Parent,FVar(8)*(const(BC.ScalingM1) + const(BC.ScalingM2) * ifelse(Parent,FVar(8)<1,1-Parent,FVar(8),0))
ignorehitpause = 1

[State 0, TargetState]
type = TargetState
triggerall = !Time
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
trigger1 = Parent,Var(11)>=2
value = 5320

[State 0, Map Dire Trigger]
type = RootMapSet
triggerall = Parent,Var(11) >= 2
triggerall = !Time
triggerall = NumTarget && MoveHit
trigger1 = Target,MoveType = H
map = "DireAct"
value = Root,Var(11) - 1
ignorehitpause = 1

[State 0, Var Gauge Gain]
type = ParentVarAdd
triggerall = Parent,Name = "BERN"
trigger1 = MoveHit && !Time
v = 18
value = 250
ignorehitpause = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = Time = 2

;---------------------------------------------------------------------------
; RI, Sword
[Statedef 1050]
type    = S
movetype= A
physics = S
velset = 0,0
anim = 1050
ctrl = 0

[State 0, Snd Swing]
type = PlaySnd
trigger1 = AnimElem = 4, 2
value = F0,8

[State 0, Var Voice Bank]
type = VarSet
trigger1 = AnimElem = 4
v = 33
value = 950
[State 0, Var Voice Variant]
type = VarSet
trigger1 = AnimElem = 4
v = 34
value = random%4

[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 6 
x = 8
[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 10
trigger2 = AnimElem = 11
x = -4

[State 0, Explod]
type = Explod
trigger1 = AnimElem = 10
anim = 1051 
pos = -16,-78
postype = p1
vel = -5,-2
accel = 0,0.6
removetime = 16
shadow = -1
ownpal = 1
[State 0, Explod]
type = Explod
trigger1 = AnimElemNo(-!(MoveHit=0)) = 6
anim = 1052
postype = p1
ownpal = 1
ignorehitpause = 1
[State 0, Explod]
type = Explod
trigger1 = AnimElem = 7
anim = 1053
postype = p1
bindtime = 2
ownpal = 1
sprpriority = 5
ignorehitpause = 1

[State 0, Var Damage Value]
type = VarSet
trigger1 = !MoveContact && !MoveReversed
v = 12
value = 144

[State 0, HitDef]
type = HitDef
trigger1 = !MoveContact && !MoveReversed
attr = S,SA
hitflag = MAF
guardflag = M
animtype = heavy
priority = 5,Hit
damage = Ceil(Var(12) * FVar(10)),Ceil(Var(12)*const(BC.ChipLight))
guardpoints = floor((32 + Var(12)) * 1.5)
pausetime = 12,12+Var(13)
guard.pausetime = 12,12
sparkno = ifelse(Var(10)=2,30,25 + random%4)
guard.sparkno = 40
sparkxy = -40+Floor(P2Dist X*0.5),-56+Floor(P2Dist Y*0.5)
hitsound = 1,8
guardsound = 5,1
ground.type = High
ground.slidetime = 24
ground.hittime = 24
guard.hittime = 16
yaccel = 0.5
fall = 0;!(Var(10)=2||Var(11)>=2)
forcenofall = 1;(Var(10)=2||Var(11)>=2)
fall.recovertime = 4
ground.velocity = -3,-4
air.velocity = -4,-3
p2facing = 1
getpower = floor(Var(12)*Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))

[State 0, TargetState]
type = TargetState
triggerall = MoveHit && !MoveReversed
triggerall = NumTarget && EnemyNear,MoveType = H
trigger1 = Var(8) = 1
trigger1 = Var(10) != 2
value = 5395
ignorehitpause = 1
[State 0, Map Dire Trigger]
type = MapSet
triggerall = MoveHit && !MoveReversed
triggerall = NumTarget && EnemyNear,MoveType = H
triggerall = Var(10) = 2
trigger1 = Var(8) = 1
map = "DireAct"
value = 5395
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = AnimElem = 6
v = 43
value = 0
[State 0, Var Gauge Gain]
type = VarAdd
triggerall = Name = "BERN"
trigger1 = MoveHit && Var(8) = 1
v = 18
value = 300
ignorehitpause = 1

[State 0, TargetState]
type = MapSet
trigger1 = NumTarget && MoveHit && Var(8) = 1
trigger1 = Target,StateNo = [5000,5400]
map = "HitFX"
value = 4
ignorehitpause = 1
redirectid = Target,ID

[State 0, CtrlSet]
type = CtrlSet
trigger1 = AnimElem = 11
value = 1
[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 8
movetype = I

[State 1000, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; RI, Hand
[Statedef 1060]
type    = S
movetype= A
physics = S
velset = 0,0
anim = 1060
ctrl = 0

[State 0, Snd Swing]
type = PlaySnd
trigger1 = AnimElem = 2
value = F0,3
[State 0, Snd I Feel So Alone]
type = PlaySnd
trigger1 = AnimElem = 2
value = S1060,1

[State 0, Var Voice Bank]
type = VarSet
trigger1 = AnimElem = 2
v = 33
value = 960
[State 0, Var Voice Variant]
type = VarSet
trigger1 = AnimElem = 2
v = 34
value = random%4

[State 0, Explod]
type = Explod
trigger1 = AnimElem = 5
anim = 1065
pos = 80,-80
postype = p1
sprpriority = 9
ownpal = 1

[State 0, VarSet]
type = VarSet
trigger1 = AnimElem = 5
v = 43
value = 0

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 5
name = "SNAP!"
stateno = 1061
postype = p1
ownpal = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 5
movetype = I
[State 0, CtrlSet]
type = CtrlSet
trigger1 = AnimElem = 9
value = 1

[State 1000, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; H - SNAP!
[Statedef 1061]
type    = S
movetype= A
physics = N
anim = 1066
sprpriority = 5

[State 0, Counter Check Reset]
type = VarSet
trigger1 = !MoveContact
v = 10
value = Root,Var(10) * !Root,Var(51)
ignorehitpause = 1
[State 0, Scaling Reset]
type = VarSet
trigger1 = !MoveContact
fv = 10
value = max(Root,FVar(8) + (Var(10)=1)*const(BC.CounterBonus),const(BC.ScalingMin))
ignorehitpause = 1

[State 0, Snd Snap]
type = PlaySnd
trigger1 = !Time
value = S1060,0

[State 0, PosAdd]
type = PosAdd
trigger1 = !Time
x = p2dist x
y = p2dist y - 40

[State 0, Var Damage Value]
type = VarSet
trigger1 = !MoveContact && !MoveReversed
v = 12
value = 168

[State 0, HitDef]
type = HitDef
trigger1 = !MoveContact && !MoveReversed
attr = S,SA
hitflag = MAF
guardflag = M
animtype = medium
priority = 3,Hit
damage = Ceil(Var(12) * FVar(10)),Ceil(Var(12)*const(BC.ChipLight))
guardpoints = floor((32 + Var(12)) * 0.5)
pausetime = 0, 12 + Root,var(13)
sparkno = -1
guard.sparkno = 40
sparkxy = 0,0
hitsound = -1
guardsound = 5,1
ground.type = Low
ground.slidetime = 24
ground.hittime = 24
guard.hittime = 8
yaccel = 0.5
fall = 1
fall.recovertime = 4
ground.velocity = -4
air.velocity = -4,-4
p2facing = 1
getpower = floor(Var(12)*Root,Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Root,Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0

[State 0, Snd Hit]
type = PlaySnd
triggerall = MoveHit = 1
trigger1 = !NumTarget
trigger1 = TeamSide = 1
trigger2 = NumTarget
value = F1,4
ignorehitpause = 1

[State 0, Explod HitSpark]
type = Explod
triggerall = MoveHit = 1
trigger1 = NumTarget && !MoveReversed
anim = F ifelse(Var(10)=2,30,10 + random%4 + (Var(10)=1) * 5)
pos = 0,-P2Dist Y
postype = p2
pausemovetime = 666
supermovetime = 666
sprpriority = 9
ontop = 1
ownpal = 1
ignorehitpause = 1

[State 0, Map Dire Trigger]
type = RootMapSet
triggerall = MoveHit = 1 && Var(10) = 2
triggerall = NumTarget
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
map = "DireAct"
value = 2
ignorehitpause = 1

[State 0, HitAdd]
type = RootVarAdd
triggerall = MoveHit = 1
triggerall = NumTarget
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
v = 51
value = 1
ignorehitpause = 1

[State 0, ParentVarSet Counter Message]
type = RootVarSet
triggerall = MoveHit = 1 && Var(10)
triggerall = NumTarget
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
v = 32
value = 63 + (Var(10) = 2) + (Var(10) = 3) * 10
ignorehitpause = 1

[State 0, TargetState]
type = TargetState
triggerall = NumTarget
trigger1 = MoveHit = 1
trigger1 = Target,MoveType = H && (Target,StateNo = [5000,5100))
value = 5340
ignorehitpause = 1

[State 0, Dampening S]
type = RootVarSet
triggerall = MoveHit = 1
triggerall = NumTarget
trigger1 = Target,StateNo >= 5000
fv = 8
value = Root,FVar(8)*(const(BC.ScalingH1) + const(BC.ScalingH2) * ifelse(Root,FVar(8)<1,1-Root,FVar(8),0))
ignorehitpause = 1

[State 0, TargetState]
type = MapSet
trigger1 = NumTarget && MoveHit = 1
trigger1 = Target,StateNo = [5000,5400]
map = "HitFX"
value = 2
ignorehitpause = 1
redirectid = Target,ID

[State 0, ParentVarAdd]
type = RootVarAdd
trigger1 = MoveHit = 1
v = 18
value = 350
ignorehitpause = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 3
trigger2 = Root,MoveType = H && Root,StateNo != [120,160)
movetype = I

[State 0, DestroySelf]
type = DestroySelf
trigger1 = AnimTime = 0

;---------------------------------------------------------------------------
; QCF+LP
[Statedef 1100]
type    = S
movetype= A
physics = N
velset = 0,0
anim = 1100 + (PrevStateNo = 1101)
ctrl = 0
sprpriority = 2

[State 0, VarSet]
type = VarSet
trigger1 = !Time
trigger1 = PrevStateNo != 1101 && PrevStateNo != 999
v = 5
value = 0
[State 0, VarSet]
type = VarSet
trigger1 = !Time
v = 6
value = (Name="BERN")
[State 0, VarSet]
type = VarSet
trigger1 = AnimElemNo(0) = [1,3]
trigger1 = command != "holdx"
v = 6
value = 0
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
triggerall = Var(6)
trigger1 = Anim = 1100 && AnimElem = 5
value = 1101
elem = 5

[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 2
trigger2 = AnimElem = 3
trigger3 = AnimElem = 4
trigger4 = AnimElem = 6
trigger5 = AnimElem = 7
trigger6 = AnimElem = 8 && Anim = 1101
trigger7 = AnimElem = 12
trigger8 = AnimElem = 13
x = max(0,min(8,P2BodyDist X+666*(abs(P2Dist Y)>const(size.height)&&!Var(51))))

[State 0, VelSet]
type = VelAdd
trigger1 = AnimElemNo(0) = 2
x = 1 + Var(5)
[State 0, VelSet]
type = VelAdd
trigger1 = AnimElemNo(0) = 6 && Anim = 1101
x = 1

[State 0, VelMul]
type = VelMul
trigger1 = AnimElemNo(0) >= 2
x = 0.9
[State 0, VelMul]
type = VelMul
trigger1 = AnimElemNo(0) = 4
trigger2 = AnimElemNo(0) = [8,9]
x = 0.5

[State 0, Snd Swing]
type = PlaySnd
trigger1 = AnimElem = 3
value = F0,2
[State 0, Snd Swing]
type = PlaySnd
trigger1 = AnimElem = 6 && Anim = 1101
value = F0,3

[State 0, Var Voice Bank]
type = VarSet
trigger1 = AnimElem = 3
v = 33
value = 1100 + Var(5)
[State 0, Var Voice Variant]
type = VarSet
trigger1 = AnimElem = 3
v = 34
value = random % (5 + 4 * Var(5))

[State 0, VarSet]
type = VarSet
trigger1 = !Time 
v = 12
value = 96

[State 0, HitDef]
type = HitDef
trigger1 = !MoveContact && !MoveReversed
trigger1 = AnimElemNo(0) < 8
attr = S,SA
hitflag = MAF
guardflag = M
animtype = medium
priority = 5,Hit
damage = Ceil(Var(12) * FVar(10) * (1.25 - 1.00 * !!MoveHit)),Ceil(120*const(BC.ChipLight))
guardpoints = floor((32 + Var(12)) * 0.5)
pausetime = 12,12+Var(13)
guard.pausetime = 12,12
sparkno = ifelse((Var(10)=2||Var(11)>=2)&&!Var(5)&&!Var(6),30,10 + random%4 + (Var(10)=1) * 5)
guard.sparkno = 40
sparkxy = -40+Floor(P2Dist X*0.5),-56+Floor(P2Dist Y*0.5)
hitsound = 1,2
guardsound = 5,0
ground.type = High
ground.slidetime = 18
ground.hittime = 18 + 2 * (Var(5))
guard.hittime = 13; + 2 * (Var(5))
yaccel = 0.5
air.fall = 1
ground.velocity = -4
air.velocity = -2,-3.75
p2facing = 1
getpower = floor(Var(12)*Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))
[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 8
attr = S,SA
hitflag = MAF
guardflag = H
animtype = heavy
priority = 5,Hit
damage = Ceil(Var(12) * FVar(10) * (1.25 - 1.00 * !!MoveHit)),Ceil(64*const(BC.ChipLight))
guardpoints = floor((32 + Var(12)) * 0.75)
pausetime = 12,12+Var(13)
guard.pausetime = 12,12
sparkno = ifelse(Var(10)=2||Var(11)>=2,30,10 + random%4 + (Var(10)=1) * 5)
guard.sparkno = 40
sparkxy = -40+Floor(P2Dist X*0.5),-56+Floor(P2Dist Y*0.5)
hitsound = 1,3
guardsound = 5,1
ground.type = High
ground.slidetime = 22
ground.hittime = 22
guard.hittime = 15
yaccel = 0.5
fall = 1
ground.velocity = -2,8
air.velocity = -4,8
fall.yvelocity = -3 + EnemyNear,Pos Y * 0.025 - 2 * !HitCount - 2 * (EnemyNear,StateType!=A)
p2facing = 1
getpower = floor(Var(12)*Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))

[State 0, Var Dull Dire]
type = VarSet
triggerall = MoveHit && !MoveReversed
triggerall = EnemyNear,MoveType = H
triggerall = Var(10) = 2
trigger1 = Var(8) = 1 && AnimElemNo(0) <= 5 && (Var(6) || Anim = 1101)
var(11) = 2
ignorehitpause = 1
[State 0, TargetState]
type = TargetState
triggerall = MoveHit && !MoveReversed
triggerall = NumTarget && EnemyNear,MoveType = H
trigger1 = Var(8) = 1
trigger1 = Var(10) != 2 && Var(11) <= 1
trigger1 = AnimElemNo(0) > 5 && Anim = 1101
value = 5355
ignorehitpause = 1
[State 0, Map Dire Trigger]
type = MapSet
triggerall = MoveHit && !MoveReversed
triggerall = NumTarget && EnemyNear,MoveType = H
triggerall = Var(10) = 2 || Var(11) > 1
trigger1 = Var(8) = 1
trigger1 = AnimElemNo(0) <= 5 && (!Var(6) && Name != "BERX" || Anim != 1101 && Name = "BERX") || AnimElemNo(0) > 5 && Anim = 1101
map = "DireAct"
value = ifelse(AnimElemNo(0) = 4,5320,5345)
ignorehitpause = 1

[State 0, Var Armor Reduce]
type = VarAdd
trigger1 = AnimElem = 10
trigger1 = Name = "BERK"
trigger1 = Var(46) > 0
trigger1 = !MoveHit
v = 46
value = -1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 5 && Anim = 1100
trigger2 = AnimElem = 10
movetype = I
[State 0, CtrlSet]
type = CtrlSet
trigger1 = AnimElem = 8 && Anim = 1100
value = 1

[State 1000, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; QCF+SP
[Statedef 1101]
type    = S
movetype= A
physics = S
velset = 0,0
anim = 1101
ctrl = 0
sprpriority = 2

[State 0, VarSet]
type = VarSet
trigger1 = !Time
v = 5
value = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = !Time
value = 1100

;---------------------------------------------------------------------------
; QCF+LP S-K
[Statedef 1110]
type    = S
movetype= A
physics = N
velset = 0,0
anim = 1110
ctrl = 0
sprpriority = 2

[State 0, VelSet]
type = VelAdd
trigger1 = AnimElemNo(0) = 3
trigger2 = AnimElemNo(0) = 8
x = 8 + 6 * (AnimElemNo(0) = 3)
[State 0, VelMul]
type = VelMul
trigger1 = AnimElemNo(0) >= 2
x = 0.5

[State 0, Snd Swing]
type = PlaySnd
trigger1 = AnimElem = 3
value = F0,2
[State 0, Snd Swing]
type = PlaySnd
trigger1 = AnimElem = 8
value = F0,3

[State 0, Var Voice Bank]
type = VarSet
trigger1 = AnimElem = 2
v = 33
value = 1101
[State 0, Var Voice Variant]
type = VarSet
trigger1 = AnimElem = 2
v = 34
value = random%9

[State 0, VarSet]
type = VarSet
trigger1 = !Time 
trigger2 = AnimElem = 9
v = 12
value = 96 - 48 * (MoveContact!=0)

[State 0, HitDef]
type = HitDef
trigger1 = !MoveContact && !MoveReversed
trigger1 = AnimElemNo(0) < 8
attr = S,SA
hitflag = MAF
guardflag = M
animtype = medium
priority = 5,Hit
damage = Ceil(Var(12) * FVar(10)),Ceil(144*0.5*const(BC.ChipLight))
guardpoints = floor((32 + Var(12)) * 0.5)
pausetime = 6,6
sparkno = 10 + random%4 + (Var(10)=1) * 5
guard.sparkno = 40
sparkxy = -40+Floor(P2Dist X*0.5),-56+Floor(P2Dist Y*0.5)
hitsound = 1,2
guardsound = 5,0
ground.type = High
ground.slidetime = 16
ground.hittime = 16
guard.hittime = 12
yaccel = 0.5
air.fall = 1
ground.velocity = -0.5
air.velocity = -0.5,-3.5
p2facing = 1
getpower = floor(Var(12)*Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))
[State 0, HitDef]
type = HitDef
trigger1 = !MoveContact && !MoveReversed
trigger1 = AnimElemNo(0) >= 8
trigger2 = AnimElem = 9
attr = S,SA
hitflag = MAF
guardflag = M
animtype = heavy
priority = 5,Hit
damage = Ceil(Var(12) * FVar(10)),Ceil(144*0.5*const(BC.ChipLight))
guardpoints = floor((32 + Var(12)) * 0.75)
pausetime = 12,12+Var(13)
guard.pausetime = 12,12
sparkno = ifelse(Var(10)=2||Var(11)>=2,30,10 + random%4 + (Var(10)=1) * 5)
guard.sparkno = 40
sparkxy = -40+Floor(P2Dist X*0.5),-56+Floor(P2Dist Y*0.5)
hitsound = 1,3
guardsound = 5,1
ground.type = High
ground.slidetime = 22
ground.hittime = 22
guard.hittime = 11
yaccel = 0.5
fall = 1
ground.velocity = -0.5,-8
air.velocity = -1,-3.5
p2facing = 1
getpower = floor(Var(12)*Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))

[State 0, Var Dull Dire]
type = VarSet
triggerall = MoveHit && !MoveReversed
triggerall = EnemyNear,MoveType = H
triggerall = Var(10) = 2
trigger1 = Var(8) = 1 && AnimElemNo(0) < 9
var(11) = 2
ignorehitpause = 1
[State 0, Map Dire Trigger]
type = MapSet
triggerall = MoveHit && !MoveReversed
triggerall = NumTarget && EnemyNear,MoveType = H
triggerall = Var(10) = 2 || Var(11) > 1
trigger1 = Var(8) = 1
trigger1 = AnimElemNo(0) >= 9
map = "DireAct"
value = 5335
ignorehitpause = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 11
movetype = I

[State 1000, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; QCF+SP S-K
[Statedef 1111]
type    = S
movetype= A
physics = N
velset = 0,0
movehitpersist = (PrevStateNo=999)
ctrl = 0
sprpriority = 2

[State 0, VarSet]
type = VarSet
trigger1 = !Time 
var(5) = (Name="BERK")
[State 0, VarSet]
type = VarSet
triggerall = Var(5) && Time <= 8
trigger1 = !map(h_y)
var(5) = 0
[State 0, VarSet]
type = VarSet
trigger1 = !Time 
var(6) = (EnemyNear,StateNo = [5325,5326]&&Name="BERK")

[State 0, VarSet]
type = VarSet
trigger1 = !Time
v = 2
value = StateNo
[State 0, HitOverride]
type = HitOverride
triggerall = Name = "BERK"
trigger1 = AnimElemNo(0) = [2,5]
trigger1 = Time >= 9 && PrevStateNo != 999
attr = SCA,NA,SA;,NP,SP
slot = 1
stateno = 999
time = 1
ignorehitpause = 1
[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = !Time
trigger1 = Anim != 1111
value = 1111

[State 0, NotHitBy]
type = NotHitBy
triggerall = Name = "BERK"
trigger1 = MoveType = A
trigger2 = NumHelper(1112)
value = ,NP,SP
time = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = AnimElem = 3
trigger1 = !Var(5)
value = Anim
elem = AnimElemNo(0)+1

[State 0, Offset]
type = Offset
trigger1 = AnimElemNo(0) = 3 && AnimElemTime(3) >= 4
x = (-3 + AnimElemTime(3)) * 0.25 * (-1 + 1 * (GameTime%3))

[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 2
trigger2 = AnimElem = 4
trigger3 = AnimElem = 5
trigger4 = AnimElem = 7
trigger5 = AnimElem = 8
x = max(0,min(8,P2BodyDist X+666*(abs(P2Dist Y)>const(size.height))))

[State 0, VelSet]
type = VelAdd
trigger1 = AnimElemNo(0) = 4
x = 2

[State 0, VelMul]
type = VelMul
trigger1 = AnimElemNo(0) >= 2
x = 0.9
[State 0, VelMul]
type = VelMul
trigger1 = AnimElemNo(0) >= 5
x = 0.7

[State 0, Snd Swing]
type = PlaySnd
trigger1 = AnimElem = 4
value = F0,3

[State 0, Var Voice Bank]
type = VarSet
trigger1 = AnimElem = 4
v = 33
value = 1100
[State 0, Var Voice Variant]
type = VarSet
trigger1 = AnimElem = 4
v = 34
value = random % 5

[State 0, Explod Glove FX1]
type = Explod
trigger1 = AnimElem = 4, 2
anim = 1112
ID = 3000
postype = p1
removetime = 2
sprpriority = 3
removeongethit = 1
ownpal = 1
ignorehitpause = 1
[State 0, Explod Glove FX2]
type = Explod
trigger1 = AnimElemNo(0) = 5
anim = 1113
ID = 3000
postype = p1
removetime = 1
sprpriority = 3
ownpal = 1
ignorehitpause = 1
[State 0, Explod Glove FX3]
type = Explod
trigger1 = AnimElem = 6
anim = 1114
ID = 3000
postype = p1
bindtime = -1
sprpriority = 3
shadow = -1
ownpal = 1
removeongethit = 1
[State 0, Explod Glove Discard]
type = Explod
trigger1 = AnimElem = 10
anim = 1115
pos = 0,0
postype = p1
vel = -4,-4
accel = 0,0.5
removetime = 32
shadow = -1
ownpal = 1

[State 0, Helper]
type = Helper
triggerall = Name = "BERK"
trigger1 = AnimElem = 4, 2
name = "ive heard of green thumb but this is ridiculous"
ID = 1112
stateno = 1112
postype = p1

[State 0, VarSet]
type = VarSet
trigger1 = !Time 
v = 12
value = 136

[State 0, HitDef]
type = HitDef
trigger1 = !MoveContact && !MoveReversed
attr = S,SA
hitflag = MAF
guardflag = M
animtype = heavy
priority = 5,Hit
damage = Ceil(Var(12) * FVar(10)),Ceil(Var(12)*const(BC.ChipLight))
guardpoints = floor((32 + Var(12)) * 0.5)
pausetime = 12,12+Var(13)
guard.pausetime = 12,12
sparkno = ifelse(Var(10)=2||Var(11)>=2,30,10 + random%4 + (Var(10)=1) * 5)
guard.sparkno = 40
sparkxy = -40+Floor(P2Dist X*0.5),-64+Floor(P2Dist Y*0.5)
hitsound = 1,3
guardsound = 5,1
ground.type = High
ground.slidetime = 21
ground.hittime = 21
guard.hittime = 16 + Var(5) * 4
yaccel = 0.5
fall = (Name="BERN")
air.fall = !(Var(10)=2||Var(11)>=2)
forcenofall = (Var(10)=2||Var(11)>=2)
ground.velocity = -3 - (Name="BERN"),-5 * (Name="BERN")
air.velocity = -2 - 2 * (Name="BERN") + 0.5 * Var(5),-3.5 + Var(5)
;guard.velocity = -3; + (1 + p2dist x * 0.01) * Var(5)
p2facing = 1
getpower = floor(Var(12)*Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))

[State 0, TargetState]
type = TargetState
triggerall = MoveHit && !MoveReversed
triggerall = NumTarget && EnemyNear,MoveType = H
trigger1 = Var(8) = 1
trigger1 = Var(5) = 1
value = ifelse(EnemyNear,StateType=A||Var(6),5390,5325)
ignorehitpause = 1
[State 0, Map Dire Trigger]
type = MapSet
triggerall = MoveHit && !MoveReversed
triggerall = NumTarget && EnemyNear,MoveType = H
triggerall = Var(10) = 2 || Var(11) > 1
trigger1 = Var(8) = 1
map = "DireAct"
value = ifelse(Name="BERK",5327,5320)
ignorehitpause = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 6
movetype = I
[State 0, CtrlSet]
type = CtrlSet
trigger1 = AnimElem = 10
value = 1

[State 1000, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; H - Bernie Blocker 2
[Statedef 1112]
type    = S
movetype= I
physics = N
anim = 1112

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = invisible
ignorehitpause = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = ,NA,SA,HA,NT,ST,HT,HP
time = 2
[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NP,SP
stateno = stateno

[State 0, BindToParent]
type = BindToParent
trigger1 = 1
time = 1
pos = 0,0

[State 0, DestroySelf]
type = DestroySelf
trigger1 = Parent,StateNo != 1111
trigger2 = Parent,StateNo = 1111 && Parent,Time >= 22

;---------------------------------------------------------------------------
; DP+LP
[Statedef 1200]
type    = S
movetype= A
physics = N
velset = 0,0
anim = 1200
ctrl = 0
sprpriority = 2

[State 0, VarSet]
type = VarSet
trigger1 = !Time
v = 6
value = (PrevStateNo=1201)
[State 0, VarSet]
type = VarSet
trigger1 = 1
v = 7
value = 8*!Var(51)

[State 0, NotHitBy]
type = NotHitBy
trigger1 = MoveType = A
trigger1 = EnemyNear,StateNo != [2000,3000)
value = A
time = 1

[State 410, 1]
type = PlaySnd
trigger1 = AnimElem = 3
value = F0, 1

[State 0, Var Voice Bank]
type = VarSet
trigger1 = AnimElem = 6
v = 33
value = 800
[State 0, Var Voice Variant]
type = VarSet
trigger1 = AnimElem = 6
v = 34
value = random%4

[State 0, AttackDist]
type = AttackDist
trigger1 = 1
value = 0

[State 800, 1]
type = HitDef
trigger1 = P2Dist X >= -16 ;P2Dist X = [-16,96]
attr = S, ST
hitflag = AF
priority = 1, Miss
sparkno = 50
sparkxy = -8,-96+Floor(P2Dist Y*0.5)
hitsound = F1, 9
p1sprpriority = 1
p1facing = 1
p2facing = 1
numhits = 1
fall = 1

[State 0, TargetState]
type = TargetState
triggerall = NumTarget
trigger1 = MoveHit
trigger1 = Target,MoveType = H && (Target,StateNo = [5000,5100))
value = 1220
ignorehitpause = 1
[State 0, ChangeState]
type = ChangeState
triggerall = NumTarget
trigger1 = MoveHit
trigger1 = Target,MoveType = H && Target,StateNo = 1220
value = 1210 + 5 * Var(6)
ignorehitpause = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 6
movetype = I

[State 0, CtrlSet]
type = CtrlSet
trigger1 = AnimElem = 10
value = 1

[State 1000, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; DP+SP
[Statedef 1201]
type    = S
movetype= A
physics = S
velset = 0,0
ctrl = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = !Time
value = 1200

;---------------------------------------------------------------------------
; DP+LP S
[Statedef 1210]
type    = S
movetype= A
physics = N
anim = 1210
velset = 0,0
sprpriority = 5

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 0, Width]
type = Width
trigger1 = !Time
edge = 64,0
[State 0, Width]
type = Width
trigger1 = AnimElem = 8
edge = 64,0
[State 0, Width]
type = Width
trigger1 = AnimElem = 9
edge = 64,0

[State 0, Explod OL]
type = Explod
trigger1 = AnimElem = 2
anim = 1211
id = 3000
pos = 0,0
postype = p1
bindtime = 666
sprpriority = 5
removeongethit = 1
ignorehitpause = 1

[State 0, Var Dire Counter Stack On]
type = VarSet
trigger1 = !Time
trigger1 = Var(10) = 2
v = 11
value = 3
[State 0, Var Dire]
type = VarSet
trigger1 = !Time
v = 5
value = (Var(11) > 1)
[State 0, VarSet Counter!]
type = VarSet
trigger1 = !Time
trigger1 = Var(10) > 0
v = 32
value = 63 + (Var(10) = 2) + (Var(10) = 3) * 10
[State 0, Map Dire Trigger]
type = MapSet
trigger1 = AnimElem = 9
trigger1 = Var(11) > 1
map = "DireAct"
value = Var(11) - 1
ignorehitpause = 1
[State 0, VarSet]
type = VarSet
trigger1 = !Time
trigger1 = Var(10) = 1
v = 40
value = 1

[State 0, TargetBind]
type = TargetBind
triggerall = NumTarget
trigger1 = Time < 12
time = 1
pos = 52,-136
[State 0, TargetBind]
type = TargetBind
triggerall = NumTarget
trigger1 = AnimElemNo(0) = 2
time = 1
pos = 50,-108
[State 0, TargetBind]
type = TargetBind
triggerall = NumTarget
trigger1 = AnimElemNo(0) = 3
time = 1
pos = 50,-64
[State 0, TargetBind]
type = TargetBind
triggerall = NumTarget
trigger1 = AnimElemNo(0) = 4
time = 1
pos = -32,-40
[State 0, TargetBind]
type = TargetBind
triggerall = NumTarget
trigger1 = AnimElemNo(0) = 5
time = 1
pos = -72,-72
[State 0, TargetBind]
type = TargetBind
triggerall = NumTarget
trigger1 = AnimElemNo(0) = 6
time = 1
pos = -36,-102
[State 0, TargetBind]
type = TargetBind
triggerall = NumTarget
trigger1 = AnimElemNo(0) = 7
time = 1
pos = 44,-110
[State 0, TargetBind]
type = TargetBind
triggerall = NumTarget
trigger1 = AnimElemNo(0) = 8
time = 1
pos = 54,-76
[State 0, TargetBind]
type = TargetBind
triggerall = NumTarget
trigger1 = AnimElem = 9
time = 1
pos = 60,0

[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 9
x = 16
[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 11
trigger2 = AnimElem = 12
;trigger3 = AnimElem = 13
;trigger4 = AnimTime = 0
x = -4

[State 0, SprPriority]
type = SprPriority
trigger1 = AnimElem = 2
value = 1
[State 0, SprPriority]
type = SprPriority
trigger1 = AnimElem = 8
value = 5

[State 810, Swing]
type = PlaySnd
trigger1 = AnimElem = 4
value = F0,4
[State 810, Hit]
type = PlaySnd
trigger1 = AnimElem = 9
value = F1,4

[State 0, Var Voice Bank]
type = VarSet
trigger1 = AnimElem = 8
v = 33
value = 1200
[State 0, Var Voice Variant]
type = VarSet
trigger1 = AnimElem = 8
v = 34
value = random%3

[State 0, Explod HitSpark H]
type = Explod
trigger1 = AnimElem = 9
anim = F ifelse(Var(11)>=1&&Var(5),30,10 + random%4 + 5 * Var(5))
pos = 80,-8
postype = p1
sprpriority = 9
supermovetime = 666
pausemovetime = 666
ontop = 1
ownpal = 1

[State 0, HitAdd]
type = VarAdd
trigger1 = AnimElem = 9
v = 51
value = 1

[State 0, Var Damage Value]
type = VarSet
trigger1 = AnimElem = 9
v = 12
value = 152 + 4 * Var(46)
[State 0, LifeAdd]
type = TargetLifeAdd
trigger1 = AnimElem = 9
value = -Ceil(Var(12) * FVar(10))
[State 0, PowerAdd]
type = PowerAdd
trigger1 = AnimElem = 9
value = Ceil(Var(12) * Map(ScaledPowerGetHit))
[State 0, PowerAdd]
type = TargetPowerAdd
trigger1 = AnimElem = 9
value = Ceil(Var(12) * Map(ScaledPowerGiveHit))
[State 0, VarAdd P.Life Reduction]
type = VarAdd
trigger1 = AnimElem = 9
v = 22
value = -ceil(EnemyNear,Var(12) * const(BC.GetHitPLife) * EnemyNear,FVar(10))
redirectid = Target,ID
[State 0, VarAdd Lucid Meter Gain]
type = VarAdd
trigger1 = AnimElem = 9
v = 18
value = floor(EnemyNear,Var(12) * const(BC.GetHitGaugeGain) * FVar(18) * EnemyNear,FVar(10))
redirectid = Target,ID

[State 0, ScreenShake]
type = VarSet
trigger1 = AnimElem = 9
v = 9
value = 6
ignorehitpause = 1

[State 0, CtrlSet]
type = CtrlSet
trigger1 = AnimElem = 12
trigger1 = Var(5)
value = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; DP+SP S
[Statedef 1215]
type    = S
movetype= A
physics = N
anim = 1215
velset = 0,0
sprpriority = 5

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 0, Turn]
type = Turn
trigger1 = AnimElem = 2
[State 0, Turn]
type = Turn
trigger1 = AnimElem = 2
redirectid = Target,ID

[State 0, Width]
type = Width
trigger1 = !Time
edge = 64,0
[State 0, Width]
type = Width
trigger1 = AnimElem = 8
edge = 64,0
[State 0, Width]
type = Width
trigger1 = AnimElem = 9
edge = 64,0

[State 0, Explod OL]
type = Explod
trigger1 = 0;AnimElem = 2
anim = 1216
id = 3000
pos = 0,0
postype = p1
bindtime = 666
sprpriority = 5
removeongethit = 1
ignorehitpause = 1

[State 0, Var Dire Counter Stack On]
type = VarSet
trigger1 = !Time
trigger1 = Var(10) = 2
v = 11
value = 3
[State 0, Var Dire]
type = VarSet
trigger1 = !Time
v = 5
value = (Var(11) > 1)
[State 0, VarSet Counter!]
type = VarSet
trigger1 = !Time
trigger1 = Var(10) > 0
v = 32
value = 63 + (Var(10) = 2) + (Var(10) = 3) * 10
[State 0, Map Dire Trigger]
type = MapSet
trigger1 = AnimElem = 9
trigger1 = Var(11) > 1
map = "DireAct"
value = Var(11) - 1
ignorehitpause = 1
[State 0, VarSet]
type = VarSet
trigger1 = !Time
trigger1 = Var(10) = 1
v = 40
value = 1

[State 0, TargetBind]
type = TargetBind
triggerall = NumTarget
trigger1 = Time < 12
time = 1
pos = 52,-136
[State 0, TargetBind]
type = TargetBind
triggerall = NumTarget
trigger1 = AnimElemNo(0) = 2
time = 1
pos = -40,-116
[State 0, TargetBind]
type = TargetBind
triggerall = NumTarget
trigger1 = AnimElemNo(0) = 3
time = 1
pos = -32,-80
[State 0, TargetBind]
type = TargetBind
triggerall = NumTarget
trigger1 = AnimElemNo(0) = 4
time = 1
pos = 40,-74
[State 0, TargetBind]
type = TargetBind
triggerall = NumTarget
trigger1 = AnimElemNo(0) = 5
time = 1
pos = -32,-40
[State 0, TargetBind]
type = TargetBind
triggerall = NumTarget
trigger1 = AnimElemNo(0) = 6
time = 1
pos = -72,-72
[State 0, TargetBind]
type = TargetBind
triggerall = NumTarget
trigger1 = AnimElemNo(0) = 7
time = 1
pos = -36,-102
[State 0, TargetBind]
type = TargetBind
triggerall = NumTarget
trigger1 = AnimElemNo(0) = 8
time = 1
pos = 44,-110
[State 0, TargetBind]
type = TargetBind
triggerall = NumTarget
trigger1 = AnimElemNo(0) = 9
time = 1
pos = 54,-76
[State 0, TargetBind]
type = TargetBind
triggerall = NumTarget
trigger1 = AnimElem = 10
time = 1
pos = 60,0

[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 10
x = 16
[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 12
trigger2 = AnimElem = 13
;trigger3 = AnimElem = 14
;trigger4 = AnimTime = 0
x = -4

[State 0, SprPriority]
type = SprPriority
trigger1 = AnimElem = 5
value = 1
[State 0, SprPriority]
type = SprPriority
trigger1 = AnimElem = 9
value = 5

[State 810, Swing]
type = PlaySnd
trigger1 = AnimElem = 5
value = F0,4
[State 810, Hit]
type = PlaySnd
trigger1 = AnimElem = 10
value = F1,4

[State 0, Var Voice Bank]
type = VarSet
trigger1 = AnimElem = 9
v = 33
value = 1200
[State 0, Var Voice Variant]
type = VarSet
trigger1 = AnimElem = 9
v = 34
value = random%3

[State 0, Explod HitSpark H]
type = Explod
trigger1 = AnimElem = 10
anim = F ifelse(Var(11)>=1&&Var(5),30,10 + random%4 + 5 * Var(5))
pos = 80,-8
postype = p1
sprpriority = 9
supermovetime = 666
pausemovetime = 666
ontop = 1
ownpal = 1

[State 0, HitAdd]
type = VarAdd
trigger1 = AnimElem = 10
v = 51
value = 1

[State 0, Var Damage Value]
type = VarSet
trigger1 = AnimElem = 10
v = 12
value = 152 + 4 * Var(46)
[State 0, LifeAdd]
type = TargetLifeAdd
trigger1 = AnimElem = 10
value = -Ceil(Var(12) * FVar(10))
[State 0, PowerAdd]
type = PowerAdd
trigger1 = AnimElem = 10
value = Ceil(Var(12) * Map(ScaledPowerGetHit))
[State 0, PowerAdd]
type = TargetPowerAdd
trigger1 = AnimElem = 10
value = Ceil(Var(12) * Map(ScaledPowerGiveHit))
[State 0, VarAdd P.Life Reduction]
type = VarAdd
trigger1 = AnimElem = 10
v = 22
value = -ceil(EnemyNear,Var(12) * const(BC.GetHitPLife) * EnemyNear,FVar(10))
redirectid = Target,ID
[State 0, VarAdd Lucid Meter Gain]
type = VarAdd
trigger1 = AnimElem = 10
v = 18
value = floor(EnemyNear,Var(12) * const(BC.GetHitGaugeGain) * FVar(18) * EnemyNear,FVar(10))
redirectid = Target,ID

[State 0, ScreenShake]
type = VarSet
trigger1 = AnimElem = 10
v = 9
value = 6
ignorehitpause = 1

[State 0, CtrlSet]
type = CtrlSet
trigger1 = AnimElem = 13
trigger1 = Var(5)
value = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; DP+P V
[Statedef 1220]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = 3

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 1,0
[State 0, ChangeAnim2]
type = ChangeAnim2
trigger1 = !Time
value = 1220 + 5 * (!!EnemyNear,Var(6))

[State 0, VarSet]
type = VarSet
trigger1 = Time = 8
var(5) = EnemyNear,Var(5)
[State 0, VarSet]
type = VarSet
trigger1 = Time = 8
var(7) = EnemyNear,Var(7)

[State 0, VarSet]
type = VarSet
trigger1 = !Time
sysvar(2) = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
trigger1 = !Var(5)
value = 1221
[State 0, SelfState]
type = SelfState
trigger1 = AnimTime = 0
trigger1 = Var(5)
value = 5347

;------------------
; FakeFloorBounce
[Statedef 1221]
type    = A
movetype= H
physics = N
velset = 0,0
anim = 5347

[State 1027, Pos]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5100, 8]
type = Explod
trigger1 = Time = 0
anim = F60
postype = none
pos = pos x + camerapos x, 0
sprpriority = -1

[State 1027, Sound]
type = PlaySnd
trigger1 = Time = 0
value = F7,1

[State 1027, State]
type = ChangeAnim
trigger1 = Time = 8
value = 5348
[State 1028, Vel Y]
type = VelSet
trigger1 = Time = 8
y = -3.5 - Var(7) * 0.35
[State 1028, Gravity]
type = VelAdd
trigger1 = Time > 8
y = .4

[State 1028, Hit ground]
type = SelfState
trigger1 = Time > 8
trigger1 = vel y + pos y >= 0
value = 5105

;---------------------------------------------------------------------------
; HCB+LP
[Statedef 1300]
type    = S
movetype= A
physics = S
velset = 0,0
ctrl = 0
;anim = 1300
sprpriority = 2

[State 0, VarSet]
type = VarSet
trigger1 = !Time
v = 7
value = (PrevStateNo=1301)

[State 0, VarSet]
type = VarSet
trigger1 = !Time
v = 2
value = StateNo
[State 0, HitOverride]
type = HitOverride
trigger1 = MoveType = A
trigger1 = Anim = 1301
trigger1 = PrevStateNo != 999
attr = SCA,NA,SA,NP,SP
slot = 1
stateno = 999
time = 1
ignorehitpause = 1
[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = !Time
trigger1 = Anim != [1300,1301]
value = 1300 + (Name="BERK"&&Var(7))

[State 0, AttackDist]
type = AttackDist
trigger1 = 1
value = 0

[State 0, VarSet]
type = VarSet
trigger1 = 1
v = 5
value = ifelse(Var(10) = 2 || Var(11) >= 2,1,0)
[State 0, VarSet]
type = VarSet
trigger1 = 1
v = 6
value = (Var(51)!=0)

[State 0, Var Voice Bank]
type = VarSet
trigger1 = AnimElem = 5 && Anim = 1301
v = 33
value = 200
[State 0, Var Voice Variant]
type = VarSet
trigger1 = AnimElem = 5 && Anim = 1301
v = 34
value = random%28

[State 0, Var Voice Bank]
type = VarSet
trigger1 = AnimElem = 6 && Anim = 1300
trigger2 = AnimElem = 11 && Anim = 1301
v = 33
value = 1300
[State 0, Var Voice Variant]
type = VarSet
trigger1 = AnimElem = 6 && Anim = 1300
trigger2 = AnimElem = 11 && Anim = 1301
v = 34
value = random%5

[State 800, 1]
type = HitDef
trigger1 = AnimElem = 2, >= 3
trigger1 = P2BodyDist X = [-8,const(size.ground.front)*1.33333]
trigger2 = AnimElem = 7, >= 3
trigger2 = P2BodyDist X = [-8,const(size.ground.front)*1.33333]
attr = S, ST
hitflag = M-
priority = 3, Miss
sparkno = 50
sparkxy = -8,(const(size.mid.pos.y) + const(size.head.pos.y))*0.5
hitsound = F1, 9
p1sprpriority = 1
p1facing = 1
p2facing = 1
p1stateno = ifelse(Name="BERK",1350,1315-5*Var(7))
p2stateno = ifelse(Name="BERK",1360,1325-5*Var(7))
numhits = 1
forcenofall = 1
[State 800, 1]
type = HitDef
trigger1 = EnemyNear,MoveType = H && EnemyNear,StateNo != [120,160)
attr = S, ST
hitflag = M+
priority = 3, Miss
sparkno = 50
sparkxy = -8,(const(size.mid.pos.y) + const(size.head.pos.y))*0.5
hitsound = F1, 9
p1sprpriority = 1
p1facing = 1
p2facing = 1
p1stateno = ifelse(Name="BERK",1350,1315-5*Var(7))
p2stateno = ifelse(Name="BERK",1360,1325-5*Var(7))
numhits = 1
forcenofall = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 4 && Anim = 1300
trigger2 = AnimElem = 9 && Anim = 1301
movetype = I

[State 800, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; HCB+SP
[Statedef 1301]
type    = S
movetype= A
physics = S
velset = 0,0
ctrl = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = !Time
value = 1300

;---------------------------------------------------------------------------
; HCB+SP S
[Statedef 1310]
type    = S
movetype= A
physics = N
anim = 1310
velset = 0,0
sprpriority = -1

[State 0, Width]
type = Width
trigger1 = !Time
edge = 40,0
[State 0, Width]
type = Width
trigger1 = AnimElem = 3
edge = 24,0
[State 0, Width]
type = Width
trigger1 = AnimElem = 4
edge = 32,0
[State 0, Width]
type = Width
trigger1 = AnimElem = 5
edge = 40,0

[State 0, Turn]
type = Turn
trigger1 = AnimElem = 2
[State 0, Turn]
type = Turn
trigger1 = AnimElem = 2
redirectid = Target,ID

[State 0, Explod OL1]
type = Explod
trigger1 = !Time
anim = 1311
id = 3000
pos = 0,0
postype = p1
bindtime = 666
sprpriority = 5
removeongethit = 1
ignorehitpause = 1
[State 0, Explod OL2]
type = Explod
trigger1 = AnimElem = 2
anim = 1312
id = 3000
pos = 0,0
postype = p1
facing = -1
bindtime = 666
sprpriority = 5
removeongethit = 1
ignorehitpause = 1

[State 0, Map Dire Trigger]
type = MapSet
triggerall = !Time
trigger1 = Var(10) = 2
trigger2 = Var(11) > 2
map = "DireAct"
value = 2
ignorehitpause = 1
[State 0, VarSet Counter!]
type = VarSet
trigger1 = !Time
trigger1 = Var(10) > 0
v = 32
value = 63 + (Var(10) = 2) + (Var(10) = 3) * 10
[State 0, VarSet]
type = VarSet
trigger1 = !Time
trigger1 = Var(10) = 1
v = 40
value = 1

[State 0, Dampening]
type = VarSet
trigger1 = AnimElem = 7
fv = 8
value = FVar(8)*(const(BC.ScalingL1) + const(BC.ScalingL2) * ifelse(FVar(8)<1,1-FVar(8),0))
ignorehitpause = 1

[State 0, TargetBind]
type = TargetBind
triggerall = NumTarget
trigger1 = Time < 12
time = 1
pos = 48,0
[State 0, TargetBind]
type = TargetBind
triggerall = NumTarget
trigger1 = AnimElemNo(0) = 2
time = 1
pos = -48,0
[State 0, TargetBind]
type = TargetBind
triggerall = NumTarget
trigger1 = AnimElemNo(0) = 3
time = 1
pos = -22,0
[State 0, TargetBind]
type = TargetBind
triggerall = NumTarget
trigger1 = AnimElem = 4
time = 1
pos = 24,0

[State 0, TargetVelSet]
type = TargetVelSet
trigger1 = AnimElem = 4,1
trigger1 = Var(6)
x = -4
y = -1
[State 0, TargetState]
type = TargetState
trigger1 = AnimElem = 4,1
trigger1 = Var(6)
value = 5391

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = F0,3

[State 0, Var Voice Bank]
type = VarSet
trigger1 = AnimElem = 2
v = 33
value = 1310
[State 0, Var Voice Variant]
type = VarSet
trigger1 = AnimElem = 2
v = 34
value = random%10

[State 0, HitAdd]
type = VarAdd
trigger1 = AnimElem = 4
v = 51
value = 1

[State 0, Var Damage Value]
type = VarSet
trigger1 = AnimElem = 4; && Var(6)
v = 12
value = 40 + 40 * Var(6)
[State 0, LifeAdd]
type = TargetLifeAdd
trigger1 = AnimElem = 4; && Var(6)
value = -Ceil(Var(12) * FVar(10))
[State 0, PowerAdd]
type = PowerAdd
trigger1 = AnimElem = 4; && Var(6)
value = Ceil(Var(12) * Map(ScaledPowerGetHit))
[State 0, PowerAdd]
type = TargetPowerAdd
trigger1 = AnimElem = 4; && Var(6)
value = Ceil(Var(12) * Map(ScaledPowerGiveHit))
[State 0, VarAdd P.Life Reduction]
type = VarAdd
trigger1 = AnimElem = 4
v = 22
value = -ceil(EnemyNear,Var(12) * const(BC.GetHitPLife) * EnemyNear,FVar(10))
redirectid = Target,ID
[State 0, VarAdd Lucid Meter Gain]
type = VarAdd
trigger1 = AnimElem = 4
v = 18
value = floor(EnemyNear,Var(12) * const(BC.GetHitGaugeGain) * FVar(18) * EnemyNear,FVar(10))
redirectid = Target,ID

[State 0, CtrlSet]
type = CtrlSet
trigger1 = AnimElem = 7
value = 1

[State 800, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; HCB+LP S
[Statedef 1315]
type    = S
movetype= A
physics = N
anim = 1315
velset = 0,0
sprpriority = -1

[State 0, Width]
type = Width
trigger1 = !Time
edge = 40,0
[State 0, Width]
type = Width
trigger1 = AnimElem = 3
edge = 24,0
[State 0, Width]
type = Width
trigger1 = AnimElem = 4
edge = 32,0
[State 0, Width]
type = Width
trigger1 = AnimElem = 5
edge = 40,0

[State 0, Explod OL1]
type = Explod
trigger1 = !Time
anim = 1311
id = 3000
pos = 0,0
postype = p1
bindtime = 666
sprpriority = 5
removeongethit = 1
ignorehitpause = 1
[State 0, Explod OL2]
type = Explod
trigger1 = AnimElem = 2
anim = 1316
id = 3000
pos = 0,0
postype = p1
bindtime = 666
sprpriority = 5
removeongethit = 1
ignorehitpause = 1

[State 0, Explod HitSpark H]
type = Explod
trigger1 = AnimElem = 4
anim = F5 + random%4
pos = 24,-68
postype = p1
sprpriority = 9
supermovetime = 666
pausemovetime = 666
ontop = 1
ownpal = 1

[State 0, Snd Bap]
type = PlaySnd
trigger1 = AnimElem = 4
value = F1,1

[State 0, Map Dire Trigger]
type = MapSet
triggerall = !Time
trigger1 = Var(10) = 2
trigger2 = Var(11) > 2
map = "DireAct"
value = 2
ignorehitpause = 1
[State 0, VarSet Counter!]
type = VarSet
trigger1 = !Time
trigger1 = Var(10) > 0
v = 32
value = 63 + (Var(10) = 2) + (Var(10) = 3) * 10
[State 0, VarSet]
type = VarSet
trigger1 = !Time
trigger1 = Var(10) = 1
v = 40
value = 1

[State 0, Dampening]
type = VarSet
trigger1 = AnimElem = 4, 1
fv = 8
value = FVar(8)*(const(BC.ScalingH1) + const(BC.ScalingH2) * ifelse(FVar(8)<1,1-FVar(8),0))
ignorehitpause = 1

[State 0, TargetBind]
type = TargetBind
triggerall = NumTarget
trigger1 = Time < 12
time = 1
pos = 48,0
[State 0, TargetBind]
type = TargetBind
triggerall = NumTarget
trigger1 = AnimElemNo(0) = 2
time = 1
pos = 30,0
[State 0, TargetBind]
type = TargetBind
triggerall = NumTarget
trigger1 = AnimElemNo(0) = 3
time = 1
pos = 28,0
[State 0, TargetBind]
type = TargetBind
triggerall = NumTarget
trigger1 = AnimElem = 4
time = 1
pos = 24,0

[State 0, TargetVelSet]
type = TargetVelSet
trigger1 = AnimElem = 4,1
trigger1 = Var(6)
x = -4
y = -1
[State 0, TargetState]
type = TargetState
trigger1 = AnimElem = 4,1
trigger1 = Var(6)
value = 5391

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3, 4
value = F0,3

[State 0, Var Voice Bank]
type = VarSet
trigger1 = AnimElem = 3
v = 33
value = 1310
[State 0, Var Voice Variant]
type = VarSet
trigger1 = AnimElem = 3
v = 34
value = random%10

[State 0, HitAdd]
type = VarAdd
trigger1 = AnimElem = 4
v = 51
value = 1

[State 0, Var Damage Value]
type = VarSet
trigger1 = AnimElem = 4; && Var(6)
v = 12
value = 40 + 40 * Var(6)
[State 0, LifeAdd]
type = TargetLifeAdd
trigger1 = AnimElem = 4; && Var(6)
value = -Ceil(Var(12) * FVar(10))
[State 0, PowerAdd]
type = PowerAdd
trigger1 = AnimElem = 4; && Var(6)
value = Ceil(Var(12) * Map(ScaledPowerGetHit))
[State 0, PowerAdd]
type = TargetPowerAdd
trigger1 = AnimElem = 4; && Var(6)
value = Ceil(Var(12) * Map(ScaledPowerGiveHit))
[State 0, VarAdd P.Life Reduction]
type = VarAdd
trigger1 = AnimElem = 4
v = 22
value = -ceil(EnemyNear,Var(12) * const(BC.GetHitPLife) * EnemyNear,FVar(10))
redirectid = Target,ID
[State 0, VarAdd Lucid Meter Gain]
type = VarAdd
trigger1 = AnimElem = 4
v = 18
value = floor(EnemyNear,Var(12) * const(BC.GetHitGaugeGain) * FVar(18) * EnemyNear,FVar(10))
redirectid = Target,ID

[State 0, CtrlSet]
type = CtrlSet
trigger1 = AnimElem = 7
value = 1

[State 800, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; HCB+SP V
[Statedef 1320]
type    = S
movetype= H
physics = N
velset = 0,0
sprpriority = 2

[State 0, ChangeAnim2]
type = ChangeAnim2
trigger1 = !Time
value = 1320
[State 0, ChangeAnim2]
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = 1320
value = 5007

[State 0, VelSet]
type = VelSet
trigger1 = Anim = 1320
trigger1 = AnimElem = 4, 1
x = -7
[State 0, VelMul]
type = VelMul
trigger1 = 1 
x = 1.0 - (Time * 0.0075)

[State 0, VarSet]
type = VarSet
trigger1 = !Time
sysvar(2) = 0

[State 0, SelfState]
type = SelfState
trigger1 = Time = 52
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; HCB+LP V
[Statedef 1325]
type    = S
movetype= H
physics = N
velset = 0,0
sprpriority = 2

[State 0, ChangeAnim2]
type = ChangeAnim2
trigger1 = !Time
value = 1325
[State 0, ChangeAnim2]
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = 1325
value = 5005

[State 0, VelSet]
type = VelSet
trigger1 = Anim = 1325
trigger1 = AnimElem = 3, 6
x = -7
[State 0, VelMul]
type = VelMul
trigger1 = 1 
x = 1.0 - (Time * 0.0075)

[State 0, VarSet]
type = VarSet
trigger1 = !Time
sysvar(2) = 0

[State 0, SelfState]
type = SelfState
trigger1 = Time = 52
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; HCB+LP S-K S
[Statedef 1350]
type    = S
movetype= A
physics = N
anim = 1350
velset = 0,0
sprpriority = 1

[State 0, VarSet]
type = VarSet
trigger1 = !Time
v = 5
value = 0
[State 0, VarSet]
type = VarSet
trigger1 = command = "down" || command = "holddown"
trigger1 = Time > 4
v = 5
value = 2
[State 0, VarSet]
type = VarSet
trigger1 = command = "back"
trigger1 = Time > 4
trigger2 = command = "holdback"
trigger2 = Time > 12
v = 5
value = 4
[State 0, VarSet]
type = VarSet
trigger1 = command = "fwd" || command = "holdfwd"
trigger1 = Time > 4
v = 5
value = 6
[State 0, VarSet]
type = VarSet
trigger1 = command = "up" || command = "holdup"
trigger1 = Time > 4
v = 5
value = 8

[State 0, VarSet Counter!]
type = VarSet
trigger1 = !Time
trigger1 = Var(10) > 0
v = 32
value = 63 + (Var(10) = 2) + (Var(10) = 3) * 10
[State 0, Var Dire Stack On]
type = VarSet
trigger1 = !Time
trigger1 = Var(10) = 2
v = 11
value = 3

[State 0, Map Hit Check]
type = MapSet
trigger1 = !Time
trigger1 = Var(10) > 0
map = "BerkHitCheck"
value = 1 + (Map(BerkDice1)&&Map(BerkDice2)&&!Map(BerkRoll1)&&!Map(BerkRoll2)||Var(10)=2)
ignorehitpause = 1

[State 0, Width]
type = Width
trigger1 = AnimElem = 2
edge = 24,0
[State 0, Width]
type = Width
trigger1 = AnimElem = 3
edge = 48,0

[State 0, TargetBind]
type = TargetBind
triggerall = NumTarget
trigger1 = Time < 12
time = 1
pos = 48,0
[State 0, TargetBind]
type = TargetBind
triggerall = NumTarget
trigger1 = AnimElemNo(0) = 2
time = 1
pos = 46,0
[State 0, TargetBind]
type = TargetBind
triggerall = NumTarget
trigger1 = AnimElemNo(0) = 3
time = 1
pos = 42,-104
[State 0, TargetBind]
type = TargetBind
triggerall = NumTarget
trigger1 = AnimElemNo(0) = 4
time = 1
pos = -16,-136
[State 0, TargetBind]
type = TargetBind
triggerall = NumTarget
trigger1 = AnimElemNo(0) = 5
time = 1
pos = -18,-134

[State 0, TargetState]
type = TargetState
triggerall = NumTarget
trigger1 = AnimElem = 6
value = 883

[State 0, Explod OL]
type = Explod
trigger1 = !Time
anim = 2011
postype = p1
bindtime = 666
sprpriority = 5
removeongethit = 1
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 6
x = -8
[State 0, VelMul]
type = VelMul
trigger1 = 1
x = 0.85

[State 0, SprPriority]
type = SprPriority
trigger1 = AnimElem = 4
value = 3

[State 0, Var Voice Bank]
type = VarSet
trigger1 = !Time
v = 33
value = 880
[State 0, Var Voice Variant]
type = VarSet
trigger1 = !Time
v = 34
value = random%4

[State 0, TargetState]
type = TargetState
triggerall = AnimElemNo(0) = 5 && NumTarget
trigger1 = Var(5) = 2
value = 886
[State 800, 2]
type = ChangeState
triggerall = NumTarget
trigger1 = Target,StateNo = 886
value = 885

[State 0, TargetState]
type = TargetState
triggerall = AnimElemNo(0) = 5 && NumTarget
trigger1 = Var(5) = 4
value = 895
[State 800, 2]
type = ChangeState
triggerall = NumTarget
trigger1 = Target,StateNo = 895
value = 894

[State 0, TargetState]
type = TargetState
triggerall = AnimElemNo(0) = 5 && NumTarget
trigger1 = Var(5) = 6
value = 892
[State 800, 2]
type = ChangeState
triggerall = NumTarget
trigger1 = Target,StateNo = 892
value = 891

[State 0, TargetState]
type = TargetState
triggerall = AnimElemNo(0) = 5 && NumTarget
trigger1 = Var(5) = 8
value = 889
[State 800, 2]
type = ChangeState
triggerall = NumTarget
trigger1 = Target,StateNo = 889
value = 888

[State 800, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; HCB+LP S-K V
[Statedef 1360]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = 2

[State 0, ChangeAnim2]
type = ChangeAnim2
trigger1 = !Time
value = 1360

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 0, Offset]
type = Offset
trigger1 = AnimElemTime(4) >= 22
x = -1+GameTime%3

;---------------------------------------------------------------------------
; QCF+LK
[Statedef 1400]
type    = S
movetype= A
physics = N
velset = 0,0
ctrl = 0
anim = 1400
movehitpersist = 1
sprpriority = 2

[State 0, VarSet]
type = VarSet
trigger1 = !Time
trigger1 = PrevStateNo != 1401 && PrevStateNo != 999
v = 5
value = 0
[State 0, VarSet]
type = VarSet
trigger1 = !Time
v = 6
value = 0
[State 0, VarSet]
type = VarSet
trigger1 = command = "x" || command = "y"
v = 6
value = 1
[State 0, VarSet]
type = VarSet
triggerall = Time >= 2 || Var(5)
trigger1 = command = "a"
trigger2 = Var(17) = 1200 && Random < 500
v = 6
value = 2
[State 0, VarSet]
type = VarSet
triggerall = Time >= 2 || !Var(5)
trigger1 = command = "b"
trigger2 = Var(17) = 1200 && Random < 500
v = 6
value = 3
[State 0, VarSet]
type = VarSet
triggerall = Name != "BERK"
trigger1 = command = "y" && command = "b" || command = "c"
trigger2 = Var(17) = 1300
v = 6
value = 4
[State 0, VarSet]
type = VarSet
triggerall = Time >= 2 || Var(5)
trigger1 = command = "a" && command = "x" || command = "z"
trigger2 = Var(17) = 800 || Var(17) = 1700
v = 6
value = 5

[State 0, AttackDist]
type = AttackDist
trigger1 = 1
value = 0

[State 0, ChangeAnim]
type = ChangeAnim
triggerall = Var(6) = 1
trigger1 = AnimElemNo(0) = 5
trigger1 = AnimElemTime(5) >= 2
trigger2 = AnimElemNo(0) = 6
value = Anim
elem = 7

[State 0, VelAdd]
type = VelAdd
trigger1 = AnimElem = 1, 1
trigger2 = AnimElemNo(0) = 2 
x = max(2,min(p2dist x * 0.025,2.5 + Var(5)))
[State 0, VelMul]
type = VelMul
trigger1 = AnimElemNo(0) >= 2 
x = 0.9
[State 0, VelMul]
type = VelMul
trigger1 = AnimElemNo(0) >= 7 
x = 0.6
[State 0, VelMul]
type = VelMul
trigger1 = AnimElemNo(0) >= 8 
x = 0.4

[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 7
trigger2 = AnimElem = 8
x = -4

[State 0, Explod Big Dust FX]
type = Explod
trigger1 = AnimElem = 2
anim = F85
postype = p1
ownpal = 1
sprpriority = 4

[State 210, Snd Dash]
type = PlaySnd
trigger1 = AnimElem = 2
value = F2, 3

[State 0, Var Armor Reduce]
type = VarAdd
trigger1 = AnimElem = 7
trigger1 = Name = "BERK"
trigger1 = Var(46) > 0
trigger1 = !MoveHit
v = 46
value = -1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 7
movetype = I

[State 800, 2]
type = ChangeState
trigger1 = AnimElemNo(0) = [4,6]
trigger1 = Var(6) = 2
value = 1440
[State 800, 2]
type = ChangeState
trigger1 = AnimElemNo(0) = [4,6]
trigger1 = Var(6) = 3
value = 1441
[State 800, 2]
type = ChangeState
trigger1 = AnimElemNo(0) = [4,6]
trigger1 = Var(6) = 4
value = 950
[State 800, 2]
type = ChangeState
trigger1 = AnimElemNo(0) = 6 || AnimElemNo(0) = [4,6] && MoveHit
trigger1 = Var(6) = 5
value = 1410
[State 800, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; QCF+SK
[Statedef 1401]
type    = S
movetype= A
physics = S
velset = 0,0
movehitpersist = 1
ctrl = 0
sprpriority = 2

[State 0, VarSet]
type = VarSet
trigger1 = !Time
v = 5
value = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = !Time
value = 1400

;---------------------------------------------------------------------------
; QCF+K, GP
[Statedef 1410]
type    = S
movetype= A
physics = N
ctrl = 0
anim = 1410
sprpriority = 2

[State 0, VelMul]
type = VelMul
trigger1 = 1
x = 0.9
[State 0, VelMul]
type = VelMul
trigger1 = AnimElemNo(0) = [2,3]
x = 0.75
[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 4
x = 0

[State 0, AttackDist]
type = AttackDist
trigger1 = 1
value = 0

[State 0, VarSet]
type = VarSet
trigger1 = 1
v = 5
value = ifelse(Var(10) = 2 || Var(11) >= 2,1,0)

[State 0, Var Voice Bank]
type = VarSet
trigger1 = AnimElem = 5
v = 33
value = 1300
[State 0, Var Voice Variant]
type = VarSet
trigger1 = AnimElem = 5
v = 34
value = random%5

[State 800, 1]
type = HitDef
trigger1 = Time = 8
trigger1 = P2BodyDist X = [-8,const(size.ground.front)]
attr = S, ST
hitflag = M-
priority = 3, Miss
sparkno = 50
sparkxy = -24,(const(size.mid.pos.y) + const(size.head.pos.y))*0.5
hitsound = F1, 9
p1sprpriority = 1
p1facing = 1
p2facing = 1
p1stateno = 1420
p2stateno = 1430
numhits = 1
forcenofall = 1
[State 800, 1]
type = HitDef
trigger1 = Time = 8
trigger1 = EnemyNear,MoveType = H && EnemyNear,StateNo != [150,160)
attr = S, ST
hitflag = M+
priority = 3, Miss
sparkno = 50
sparkxy = -24,(const(size.mid.pos.y) + const(size.head.pos.y))*0.5
hitsound = F1, 9
p1sprpriority = 1
p1facing = 1
p2facing = 1
p1stateno = 1420
p2stateno = 1430
numhits = 1
forcenofall = 1

[State 0, Var Armor Reduce]
type = VarAdd
trigger1 = AnimElem = 5
trigger1 = Name = "BERK"
trigger1 = Var(46) > 0
trigger1 = !MoveHit
v = 46
value = -1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 5
movetype = I

[State 800, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; QCF+K, GP S
[Statedef 1420]
type    = S
movetype= A
physics = N
anim = 1420
velset = 0,0
sprpriority = -1

[State 0, Width]
type = Width
trigger1 = !Time
edge = 40,0
[State 0, Width]
type = Width
trigger1 = AnimElemNo(0) = [1,8]
edge = AnimElemNo(0) * 10,0

[State 0, Turn]
type = Turn
trigger1 = AnimElem = 2

[State 0, Explod OL]
type = Explod
trigger1 = !Time
anim = 1421
id = 3000
pos = 0,0
postype = p1
bindtime = 666
sprpriority = 5
removeongethit = 1
ignorehitpause = 1

[State 0, Var Dire Counter Stack On]
type = VarSet
trigger1 = !Time
trigger1 = Var(10) = 2
v = 11
value = 3
[State 0, VarSet Counter!]
type = VarSet
trigger1 = !Time
trigger1 = Var(10) > 0
v = 32
value = 63 + (Var(10) = 2) + (Var(10) = 3) * 10
[State 0, VarSet]
type = VarSet
trigger1 = !Time
trigger1 = Var(10) = 1
v = 40
value = 1

[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 4
x = 16
[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 7
x = 32
[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 8
x = 8
[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElemNo(0) = 10
x = 2

[State 0, TargetBind]
type = TargetBind
triggerall = NumTarget
trigger1 = Time < 12
time = 1
pos = 48,0
[State 0, TargetBind]
type = TargetBind
triggerall = NumTarget
trigger1 = AnimElemNo(0) = 2
time = 1
pos = -48,0
[State 0, TargetBind]
type = TargetBind
triggerall = NumTarget
trigger1 = AnimElemNo(0) = 3
time = 1
pos = -22,0
[State 0, TargetBind]
type = TargetBind
triggerall = NumTarget
trigger1 = AnimElemNo(0) = 4
time = 1
pos = 36,-104
[State 0, TargetBind]
type = TargetBind
triggerall = NumTarget
trigger1 = AnimElemNo(0) = 5
time = 1
pos = -4,-128
[State 0, TargetBind]
type = TargetBind
triggerall = NumTarget
trigger1 = AnimElemNo(0) = 6
time = 1
pos = -2,-130
[State 0, TargetBind]
type = TargetBind
triggerall = NumTarget
trigger1 = AnimElemNo(0) = 7
time = 1
pos = 8,-114
[State 0, TargetBind]
type = TargetBind
triggerall = NumTarget
trigger1 = AnimElem = 8
time = 1
pos = 56,-56
[State 0, TargetState]
type = TargetState
triggerall = NumTarget
trigger1 = AnimElem = 9
trigger1 = Var(11) > 1
value = 5347

[State 0, Map Dire Trigger]
type = MapSet
trigger1 = AnimElem = 9
trigger1 = Var(11) > 1
map = "DireAct"
value = Var(11) - 1
ignorehitpause = 1

[State 0, Explod HitSpark H]
type = Explod
trigger1 = AnimElem = 9
anim = F ifelse(Var(11)>1,30,10 + random%4)
pos = p2dist x,-8
postype = p1
sprpriority = 9
supermovetime = 666
ontop = 1
ownpal = 1

[State 0, Snd Swing]
type = PlaySnd
trigger1 = AnimElem = 7
value = F0,3
[State 0, Snd Hit]
type = PlaySnd
trigger1 = AnimElem = 9
value = F1,3

[State 0, Var Voice Bank]
type = VarSet
trigger1 = AnimElem = 2
v = 33
value = 1420
[State 0, Var Voice Variant]
type = VarSet
trigger1 = AnimElem = 2
v = 34
value = random%4

[State 0, HitAdd]
type = VarAdd
trigger1 = AnimElem = 9
v = 51
value = 1

[State 0, Var Damage Value]
type = VarSet
trigger1 = AnimElem = 9
v = 12
value = 152 + (Map(BerkChips) * 2) * (Name="BERK")
[State 0, LifeAdd]
type = TargetLifeAdd
trigger1 = AnimElem = 9
value = -Ceil(Var(12) * FVar(10))
[State 0, PowerAdd]
type = PowerAdd
trigger1 = AnimElem = 9
value = Ceil(Var(12) * Map(ScaledPowerGetHit))
[State 0, PowerAdd]
type = TargetPowerAdd
trigger1 = AnimElem = 9
value = Ceil(Var(12) * Map(ScaledPowerGiveHit))
[State 0, VarAdd P.Life Reduction]
type = VarAdd
trigger1 = AnimElem = 9
v = 22
value = -ceil(EnemyNear,Var(12) * EnemyNear,FVar(10) * const(BC.GetHitPLife))
redirectid = Target,ID
[State 0, VarAdd Lucid Meter Gain]
type = VarAdd
trigger1 = AnimElem = 9
v = 18
value = floor(EnemyNear,Var(12) * EnemyNear,FVar(10) * const(BC.GetHitGaugeGain) * FVar(18))
redirectid = Target,ID

[State 0, ScreenShake]
type = VarSet
trigger1 = AnimElem = 9
v = 9
value = 8
ignorehitpause = 1

[State 0, Var Tobacco Charge]
type = VarSet
trigger1 = AnimElem = 9
trigger1 = Name = "BERX"
v = 44
value = 1

[State 800, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; QCF+K, GP V
[Statedef 1430]
type    = S
movetype= H
physics = N
velset = 0,0
sprpriority = 2

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 0, ChangeAnim2]
type = ChangeAnim2
trigger1 = !Time
value = 1430

[State 0, Turn]
type = Turn
trigger1 = AnimElem = 4

[State 5110, 7]
type = Explod
trigger1 = AnimElem = 10
anim = F61
postype = p1
sprpriority = -9

[State 0, Snd Slam]
type = PlaySnd
trigger1 = AnimElem = 10
value = F7,1

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 8, 1
x = -10
y = 12
[State 0, VelAdd]
type = VelAdd
trigger1 = AnimElemNo(0) = [8,9]
y = 1
[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 10
x = 0
y = 0

[State 0, PosSet]
type = PosSet
trigger1 = AnimElem = 10
y = 0

[State 0, VarSet]
type = VarSet
trigger1 = !Time
sysvar(2) = ifelse(EnemyNear,Var(40)&&EnemyNear,Name="BERX",510,8)

[State 0, SelfState]
type = ChangeState
trigger1 = AnimTime = 0
value = 1431

;------------------
; QCF+SP V Splat2
[Statedef 1431]
type    = A
movetype= H
physics = N
anim = 5160

;[State 0, NotHitBy]
;type = NotHitBy
;trigger1 = gethitvar(yvel) < -8
;value = SCA
;time = 1

[State 1028, Vel Y]
type = VelSet
trigger1 = Time = 0
y = -2.25

[State 1028, Gravity]
type = VelAdd
trigger1 = 1
y = .2

[State 1028, Hit ground]
type = SelfState
trigger1 = Time > 1
trigger1 = vel y + pos y >= 0
value = 5100

;---------------------------------------------------------------------------
; QCF+K, LK
[Statedef 1440]
type    = S
movetype= A
physics = N
anim = 1440

[State 0, VarSet]
type = VarSet
trigger1 = !Time
v = 5
value = (PrevStateNo=1441)

[State 0, Snd Swing]
type = PlaySnd
trigger1 = AnimElem = 1, 1
value = F0,3

[State 0, Var Voice Bank]
type = VarSet
trigger1 = AnimElem = 1, 3
v = 33
value = 1440
[State 0, Var Voice Variant]
type = VarSet
trigger1 = AnimElem = 1, 3
v = 34
value = random%6

[State 0, VelSet]
type = VelAdd
trigger1 = Time <= 3
x = max(1,min(p2dist x * 0.01,((6 + 2 * Var(5)) - Vel X) * 0.35))
[State 0, VelMul]
type = VelMul
trigger1 = AnimElemNo(0) >= 2
x = 0.9
[State 0, VelMul]
type = VelMul
trigger1 = AnimElemNo(0) >= 5
trigger2 = MoveContact
x = 0.8

[State 0, VarSet]
type = VarSet
trigger1 = !Time 
v = 12
value = 136 + 8 * Var(5)

[State 0, HitDef]
type = HitDef
trigger1 = !MoveContact && !MoveReversed
attr = S,SA
hitflag = MAF
guardflag = M
animtype = heavy
priority = 5,Hit
damage = Ceil(Var(12) * FVar(10)),Ceil(Var(12)*const(BC.ChipLight))
guardpoints = floor((32 + Var(12)) * 0.5)
pausetime = 12,12+Var(13)
guard.pausetime = 12,12
sparkno = ifelse(Var(10)=2||Var(11)>=2&&(!Var(5)||EnemyNear,StateType=A),30,10 + random%4 + (Var(10)=1) * 5)
guard.sparkno = 40
sparkxy = -40+Floor(P2Dist X*0.5),-56+Floor(P2Dist Y*0.5)
hitsound = 1,3
guardsound = 5,1
ground.type = High
ground.slidetime = -5 - AnimTime
ground.hittime = -5 - AnimTime
guard.hittime = -10 - AnimTime - 3 * Var(5)
yaccel = 0.5
;fall = 1
air.fall = 1
ground.velocity = -2.5,-4
air.velocity = -4 + 2 * !Var(5),-3 + 0.5 * Var(5) - p2dist y * 0.01 * !Var(5)
p2facing = 1
getpower = floor(Var(12)*Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))

[State 0, TargetState]
type = TargetState
triggerall = MoveHit && !MoveReversed
triggerall = NumTarget && EnemyNear,MoveType = H
trigger1 = Var(8) = 1
trigger1 = Var(10) != 2 && (Var(11) <= 1 || Var(5) && EnemyNear,StateType != A)
trigger1 = !Var(5) || Var(5) && EnemyNear,StateType != A
value = ifelse(Var(5),5350,5090)
ignorehitpause = 1
[State 0, Map Dire Trigger]
type = MapSet
triggerall = MoveHit && !MoveReversed
triggerall = NumTarget && EnemyNear,MoveType = H
triggerall = Var(10) = 2 || Var(11) > 1 && (!Var(5) || EnemyNear,StateType = A)
trigger1 = Var(8) = 1
map = "DireAct"
value = ifelse(Var(5),5340,5330)
ignorehitpause = 1

[State 0, Var Armor Reduce]
type = VarAdd
trigger1 = AnimElem = 3
trigger1 = Name = "BERK"
trigger1 = Var(46) > 0
trigger1 = !MoveHit
v = 46
value = -1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 3
movetype = I
[State 0, CtrlSet]
type = CtrlSet
trigger1 = AnimElem = 5, 3
value = 1

[State 800, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; QCF+K, SK
[Statedef 1441]
type    = S
movetype= A
physics = S
velset = 0,0
movehitpersist = 1
ctrl = 0
sprpriority = 2

[State 0, ChangeState]
type = ChangeState
trigger1 = !Time
value = 1440

;---------------------------------------------------------------------------
; QCF+LK S-C
[Statedef 1600]
type    = S
movetype= A
physics = N
velset = 0,0
ctrl = 0
anim = 1600 + (PrevStateNo=1601)
movehitpersist = 1
sprpriority = 2

[State 0, VarSet]
type = VarSet
trigger1 = !Time
v = 5
value = (PrevStateNo=1601)
[State 0, VarSet]
type = VarSet
trigger1 = Time <= 12
v = 7
value = !!Map(h_b)

[State 0, ChangeAnim]
type = ChangeAnim
triggerall = Var(5)
trigger1 = AnimElem = 2, 5 && !Var(7)
trigger2 = AnimElem = 6, 8 && Var(7)
value = Anim
elem = (AnimElemNo(0)+1)

[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 2
trigger2 = AnimElem = 3
trigger3 = AnimElem = 4
x = min(8,P2BodyDist X + 666 * (P2Dist X <= 0))
[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 8
trigger2 = AnimElem = 9
x = -12 + 4 * Var(5)

[State 0, Explod FX1]
type = Explod
trigger1 = AnimElemNo(0) = 3
anim = 1602
ID = 3000
postype = p1
removetime = 1
sprpriority = -3
[State 0, Explod FX2]
type = Explod
trigger1 = AnimElem = 4
anim = 1603
ID = 3000
postype = p1
bindtime = 666
sprpriority = -3

[State 0, Snd Swing]
type = PlaySnd
trigger1 = AnimElem = 3
value = F2,3

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 4
name = "POCKET SAND!"
ID = 1610
stateno = 1610
pos = max(48,min(P2Dist X,64)),0
postype = p1
ownpal = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 5
movetype = I

[State 800, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; QCF+SK S-C
[Statedef 1601]
type    = S
movetype= A
physics = S
movehitpersist = 1
ctrl = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = !Time
value = 1600

;---------------------------------------------------------------------------
; H - Sandblaster
[Statedef 1610]
type    = S
movetype= A
physics = N
anim = 1610
sprpriority = 4

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = invisible
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = Anim != 1610 + (!!Root,Var(51)||!Var(5))
value = 1610 + (!!Root,Var(51)||!Var(5))

[State 0, VarSet]
type = VarSet
trigger1 = !Time
v = 5
value = Root,Var(5)
[State 0, VarSet]
type = VarSet
trigger1 = !Time
v = 7
value = Root,Var(7)

[State 0, Counter Check Reset]
type = VarSet
trigger1 = !MoveContact
v = 10
value = Root,Var(10) * !Root,Var(51)
ignorehitpause = 1
[State 0, Scaling Reset]
type = VarSet
trigger1 = !MoveContact
fv = 10
value = max(Root,FVar(8) + (Var(10)=1)*const(BC.CounterBonus),const(BC.ScalingMin))
ignorehitpause = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = !Time
value = SCA
time = 666

[State 0, VelSet]
type = VelSet
trigger1 = Var(5) && Time = 2
x = 4
[State 0, VelMul]
type = VelMul
trigger1 = MoveContact
x = 0.25
[State 0, VelSet]
type = VelSet
trigger1 = Time = 10
trigger2 = FrontEdgeDist + Vel X < 0
x = 0

[State 0, Explod]
type = Explod
trigger1 = !Time
trigger2 = Time = 6 && Var(5)
trigger3 = Time = 12 && Var(5)
anim = anim
pos = 0,0
postype = p1
sprpriority = 4
shadow = -1
ownpal = 1

[State 0, VarSet]
type = VarSet
trigger1 = !Time 
v = 12
value = 36 - 10 * Var(5)

[State 0, HitDef]
type = HitDef
triggerall = Time > 1
trigger1 = !MoveContact && !MoveReversed
trigger2 = MoveContact = 3
attr = S,SP
hitflag = MAFD
guardflag = M
animtype = medium
priority = 3,Hit
damage = Ceil(Var(12) * FVar(10) * (0.75 + 1.25 * (!MoveContact))),Ceil(120*0.2*const(BC.ChipLight))
guardpoints = floor((16 + Var(12)) * 0.5)
pausetime = 3,3
guard.pausetime = 3,1
sparkno = -1
guard.sparkno = 40
sparkxy = 0,0
hitsound = -1
guardsound = 5,1
ground.type = Low
ground.slidetime = 12
ground.hittime = 12
guard.hittime = 6 + 1 * Var(5)
yaccel = 0.5
fall = (Var(5)&&Time>=10+3*Var(7)&&Root,Var(11)<2)
air.fall = 1
ground.velocity = -1 + P2Dist X * 0.01,-4 * (Var(5)&&Time>=10+3*Var(7))
air.velocity = -1,-1 + P2Dist Y * -0.01; - 1 * (Var(5)&&Time>=10)
guard.velocity = -1
down.velocity = -1,-4
getpower = floor(Var(12)*Root,Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Root,Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0

[State 0, Snd Hit]
type = PlaySnd
triggerall = Var(8) = 1
trigger1 = !NumTarget && MoveHit
trigger1 = TeamSide = 1
trigger2 = NumTarget && MoveHit
trigger3 = gethitvar(damage) > 0
trigger3 = TeamSide = 1
value = F1,2
ignorehitpause = 1

[State 0, Explod HitSpark]
type = Explod
triggerall = Var(8) = 1
trigger1 = NumTarget && MoveHit && !MoveReversed
anim = F ifelse((Var(10)=2||Root,Var(11)>=2)&&(!Var(5)&&Time>=7||Var(5)&&Time>=10+3*Var(7)),30,10 + random%4)
pos = 0,-P2Dist Y - 32
postype = p2
pausemovetime = 666
supermovetime = 666
sprpriority = 9
ontop = 1
ownpal = 1
ignorehitpause = 1

[State 0, HitAdd]
type = RootVarAdd
triggerall = Var(8) = 1
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
v = 51
value = 1
ignorehitpause = 1

[State 0, ParentVarSet Counter Message]
type = RootVarSet
triggerall = Var(8) = 1 && Var(10) && HitCount = 1
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
v = 32
value = 63 + (Var(10) = 2) + (Var(10) = 3) * 10
ignorehitpause = 1

[State 0, Dampening S]
type = RootVarSet
trigger1 = Var(8) = 1 && HitCount = 1
trigger1 = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
fv = 8
value = Root,FVar(8)*(const(BC.ScalingH1) + const(BC.ScalingH2) * ifelse(Root,FVar(8)<1,1-Root,FVar(8),0))
ignorehitpause = 1

[State 0, TargetState]
type = TargetState
triggerall = Var(8) = 1
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
trigger1 = Root,Var(11) >= 2
trigger1 = (!Var(5) && Time >= 7) || (Var(5) && Time >= 10+3*Var(7))
value = 5325
ignorehitpause = 1

[State 0, Var Dire Counter Stack On]
type = RootVarSet
triggerall = Var(8) = 1 && Var(10) = 2 && HitCount = 1
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,6000)
v = 11
value = 3
ignorehitpause = 1

[State 0, Map Dire Trigger]
type = RootMapSet
triggerall = Var(8) = 1
triggerall = NumTarget && MoveHit
triggerall = Target,StateNo = [5000,6000)
trigger1 = Root,Var(11) >= 2
trigger1 = (!Var(5) && Time >= 7) || (Var(5) && Time >= 10+3*Var(7))
map = "DireAct"
value = Root,Var(11) - 1
ignorehitpause = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = Time = 10 && !Var(5)
trigger2 = Time = 14+3*Var(7) && Var(5)
movetype = I

[State 0, DestroySelf]
type = DestroySelf
trigger1 = Time = 20 && !Var(5)
trigger2 = Time = 25 && Var(5)
trigger3 = Root,MoveType = H && Root,StateNo != [120,160)