;---------------------------------------------------------------------------
; AirDash Fwd
[Statedef 110]
type    = A
physics = N
anim = 110
velset = 0,0
ctrl = 0
sprpriority = 1

[State 100, 1]
type = VelSet
trigger1 = Time < 3
x = const(velocity.run.fwd.x) * 0.33 * Map(SpeedMod)
[State 100, 1]
type = VelSet
trigger1 = Time = [3,15)
x = const(velocity.run.fwd.x) * 0.75 * Map(SpeedMod)

[State 0, Snd DashStart]
type = PlaySnd
trigger1 = !Time
value = F2,3
channel = 1

[State 0, VelMul]
type = VelMul
trigger1 = Time = 15
x = 0.5
[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = Time = 15
physics = A

[State 0, CtrlSet]
type = CtrlSet
trigger1 = Time = 4
value = 1

[State 0, VarSet]
type = VarAdd
trigger1 = !Time
v = 1
value = -1

;---------------------------------------------------------------------------
; AirDash Back
[Statedef 115]
type    = A
physics = N
anim = 115
velset = 0,0
ctrl = 0
sprpriority = 1

[State 100, 1]
type = VelSet
trigger1 = Time < 3
x = const(velocity.run.fwd.x) * -0.25 * Map(SpeedMod)
[State 100, 1]
type = VelSet
trigger1 = Time = [3,15)
x = const(velocity.run.fwd.x) * -0.66 * Map(SpeedMod)

[State 0, Snd DashStart]
type = PlaySnd
trigger1 = !Time
value = F2,3
channel = 1

[State 0, VelMul]
type = VelMul
trigger1 = Time = 15
x = 0.5
[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = Time = 15
physics = A

[State 0, CtrlSet]
type = CtrlSet
trigger1 = Time = 4
value = 1

[State 0, VarSet]
type = VarAdd
trigger1 = !Time
v = 1
value = -1

;---------------------------------------------------------------------------
; Taunt
[Statedef 165]
type = S
ctrl = 0
anim = 165
velset = 0,0
movetype = I
physics = S
sprpriority = 2

[State 0, ChangeAnim]
type = ChangeAnim
triggerall = AnimElem = 17
trigger1 = command = "holds"
value = Anim
elem = 16

[State 0, Var Voice Bank]
type = VarSet
trigger1 = AnimElem = 8
v = 33
value = 165
[State 0, Var Voice Variant]
type = VarSet
trigger1 = AnimElem = 8
v = 34
value = random % 6

[State 0, Map Gem Speed Wacky]
type = MapSet
triggerall = Name = "LUCK"
trigger1 = AnimElemNo(0) <= 16
map = "LuckGemSpd"
value = (Map(LuckGemSpd) + 0.5) * 1.0466

[State 195, 1]
type = CtrlSet
trigger1 = AnimElem = 17
value = 1

[State 195, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Time Out
[Statedef 170]
type = S
ctrl = 0
anim = 170
velset = 0,0

[State 180, Lose as Copy]
type = ChangeState
trigger1 = !Time
trigger1 = Var(58)
value = ifelse(Var(58)=3,3683,3696)

[State 0, Var Voice Bank]
type = VarSet
trigger1 = AnimElem = 3
v = 33
value = 170
[State 0, Var Voice Variant]
type = VarSet
trigger1 = AnimElem = 3
v = 34
value = random%3

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = Time < 64
flag = roundnotover

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; Win 1 - Sai
[Statedef 180]
type = S
velset = 0,0
ctrl = 0

[State 0, PosSet]
type = PosSet
trigger1 = !Time
y = 0
[State 0, VarSet]
type = VarAdd
trigger1 = !Time
v = 55
value = 1

[State 180, Win as Copy]
type = ChangeState
triggerall = Time = 0
triggerall = Var(58)
trigger1 = MatchOver && !TeamMode = Turns
trigger2 = Random >= 500
trigger2 = TeamMode = Turns
value = ifelse(Var(58)=3,3682,3695)
[State 180, Win E]
type = ChangeState
triggerall = Time = 0
trigger1 = Var(22) >= LifeMax && Life > LifeMax * 0.8 || LifeMax * 0.15 > (Var(22)*0.2 + Life)
value = 182
[State 180, Win 2]
type = ChangeState
triggerall = Time = 0
trigger1 = MatchOver && !TeamMode = Turns
trigger2 = Random >= 500
trigger2 = TeamMode = Turns
value = 181

[State 0, Explod Puff]
type = Explod
trigger1 = AnimElem = 8
anim = 2201
pos = 8,-144
postype = p1
vfacing = -1
vel = -1,0
accel = 0.05,0
sprpriority = -5
ownpal = 1

[State 0, Var Voice Bank]
type = VarSet
trigger1 = AnimElem = 2
v = 33
value = 180
[State 0, Var Voice Variant]
type = VarSet
trigger1 = AnimElem = 2
v = 34
value = random%6

[State 0, Map Gem Speed Wacky]
type = MapSet
trigger1 = Name = "LUCK"
map = "LuckGemSpd"
value = (Map(LuckGemSpd) + 4) * 0.25

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = !Time
value = 180

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 0, VarSet I Win!]
type = VarSet
trigger1 = Time = 96
trigger1 = MatchOver && Win
v = 32
value = 59
[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = Time < 112 + (MatchOver * 96)
flag = roundnotover

;---------------------------------------------------------------------------
; Win 2 - snappy
[Statedef 181]
type = S
ctrl = 0
anim = 181
velset = 0,0

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 0, Turn]
type = Turn
trigger1 = !Time
trigger1 = (enemynear,pos x * facing) - (pos x * facing) < 0

[State 0, VelSet]
type = PosAdd
trigger1 = AnimElemNo(0) = [5,12]
x = 2.5

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = AnimElem = 13
value = anim
elem = 5
[State 0, ChangeAnim]
type = ChangeAnim
triggerall = AnimElemNo(0) = [4,12]
trigger1 = (Pos X < EnemyNear,Pos X + 48 && Pos X > EnemyNear,Pos X - 48)
trigger2 = EnemyNear,Pos Y >= 666
value = anim
elem = 13

[State 0, Snd Swing]
type = PlaySnd
trigger1 = AnimElem = 15
value = F0,1
[State 200, 2]
type = PlaySnd
trigger1 = AnimElem = 16
value = S200, 0

[State 0, Var Voice Bank]
type = VarSet
trigger1 = AnimElem = 16
v = 33
value = 181
[State 0, Var Voice Variant]
type = VarSet
trigger1 = AnimElem = 16
v = 34
value = random%5

[State 0, Explod]
type = Explod
trigger1 = AnimElem = 16
anim = 10200
postype = p1
sprpriority = 5
ownpal = 1
[State 0, Explod It's Mina! yaaay]
type = Explod
trigger1 = AnimElem = 14
anim = 11810
pos = -8,0
postype = p1
bindtime = 666
removetime = -1
sprpriority = -1
shadow = -1
ownpal = 1

[State 0, VarSet I Win!]
type = VarSet
trigger1 = Time = 160
trigger1 = MatchOver && Win
v = 32
value = 59
[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = Time < 192 + (MatchOver * 64)
flag = roundnotover

;---------------------------------------------------------------------------
; Win 3 - JAMMIN
[Statedef 182]
type = S
velset = 0,0
ctrl = 0
anim = 182
sprpriority = 1

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 0, Explod Puff]
type = Explod
trigger1 = AnimElem = 2
anim = 2201
id = 3000
pos = 8,0
postype = p1
vel = -1,0
accel = 0.05,0
sprpriority = 5
ownpal = 1

[State 0, Explod Elevator Back]
type = Explod
trigger1 = Time = 24
anim = 11820
ID = 11820
pos = -56,-12
postype = p1
scale = 1,1
sprpriority = -1
shadow = -1
ownpal = 1
[State 0, Explod Elevator Doors]
type = Explod
trigger1 = Time = 24
anim = 11821
ID = 11820
pos = -56,-12
postype = p1
scale = 1,1
sprpriority = 3
ownpal = 1
[State 0, Explod Elevator Front]
type = Explod
trigger1 = Time = 24
anim = 11822
ID = 11820
pos = -56,-12
postype = p1
scale = 1,1
sprpriority = 3
ownpal = 1

[State 0, Snd Spawn]
type = PlaySnd
trigger1 = Time = 24
value = S182,0
[State 0, Snd Ding]
type = PlaySnd
trigger1 = Time = 24 + 14
value = S182,1
[State 0, Snd Close]
type = PlaySnd
trigger1 = Time = 24 + 65
value = S182,2
[State 0, Snd Disappear]
type = PlaySnd
trigger1 = Time = 24 + 94
value = S182,3

[State 0, Explod Walk This Way]
type = Explod
trigger1 = AnimElem = 5
anim = 21
pos = 0,0
postype = p1
vel = -1.75,0
removetime = 35
sprpriority = 1
shadow = -1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 5
statetype = A

[State 0, VarSet I Win!]
type = VarSet
trigger1 = Time = 144
trigger1 = MatchOver && Win
v = 32
value = 59
[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = Time < 144 + (MatchOver * 128)
flag = roundnotover

;---------------------------------------------------------------------------
; Intro - Warp Star
[Statedef 190]
type = S
ctrl = 0
velset = 0,0

[State 180, 1]
type = ChangeState
trigger1 = Time = 0
trigger1 = Anim != 190
trigger1 = Random >= 500
value = 191
[State 191, 1]
type = ChangeAnim
trigger1 = !Time
value = 190

[State 0, VarSet]
type = VarSet
trigger1 = !Time
v = 6
value = -1920
[State 0, VarSet]
type = VarSet
trigger1 = !Time
v = 7
value = -1280

[State 0, Offset]
type = Offset
trigger1 = AnimElemNo(0) < 15 && AnimTime < 0
x = 0.1*Var(6)*Facing
y = 0.1*Var(7)

[State 0, VarSet]
type = VarSet
trigger1 = Time
v = 6
value = floor(Var(6)*(0.95-Time*0.001))
[State 0, VarSet]
type = VarSet
trigger1 = Time
v = 7
value = floor(Var(7)*(0.85-Time*0.003))

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = AnimElem = 15
id = 190

[State 0, Explod Seat]
type = Explod
trigger1 = AnimElemNo(0) < 15 && AnimTime < 0
anim = 11900
ID = 190
postype = p1
removetime = 1
sprpriority = -5
shadow = -1
[State 0, Explod Asmos Bye]
type = Explod
trigger1 = AnimElem = 15
anim = 11900
ID = 190
postype = p1
vel = 1.5,0.5
accel = 0.15,-0.25
removetime = 64
sprpriority = -5
shadow = -1

[State 0, Explod Mina1]
type = Explod
trigger1 = AnimElemNo(0) <= 4 && AnimTime < 0
anim = 11901 + (AnimElemNo(0)+1)%2
ID = 190
postype = p1
removetime = 1
sprpriority = -3
shadow = -1
[State 0, Explod Mina2]
type = Explod
trigger1 = AnimElem = 5
anim = 11902
ID = 190
postype = p1
bindtime = 666
removetime = -1
sprpriority = -3
shadow = -1
[State 0, Explod Mina3]
type = Explod
trigger1 = AnimElem = 15
anim = 11901
ID = 190
postype = p1
vel = 1.5,0.5
accel = 0.15,-0.25
removetime = 48
sprpriority = -3
shadow = -1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = Time < 40
trigger1 = AnimElem = 3
value = anim

[State 0, Snd Fly]
type = PlaySnd
trigger1 = Time = 2
trigger2 = AnimElem = 16
value = S190,0

[State 0, Var Voice Bank]
type = VarSet
trigger1 = AnimElem = 8
v = 33
value = 190
[State 0, Var Voice Variant]
type = VarSet
trigger1 = AnimElem = 8
v = 34
value = random%5

[State 0, MapSet]
type = MapSet
trigger1 = AnimElem = 19
map = "LandDustFX"
value = 1

[State 0, Var Intro TimeStart]
type = VarSet
trigger1 = !Time
v = 5
value = 108
[State 0, Var Intro Timer]
type = VarAdd
trigger1 = Var(5)
v = 5
value = -1
[State 191, Intro Flag]
type = AssertSpecial
trigger1 = 1
flag = Intro
[State 0, ChangeState]
type = ChangeState
triggerall = Time = 1
trigger1 = TeamSide = 2
trigger1 = EnemyNear,Var(5) > 40
trigger2 = RoundState = 0
value = StateNo

[State 191, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; Intro - feed my eyes
[Statedef 191]
type = S
ctrl = 0
velset = 0,0
sprpriority = 0

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = AnimElem = 3, <= 0
id = 191
[State 0, Explod Mirror]
type = Explod
trigger1 = AnimElem = 3, <= 0
trigger1 = AnimTime < 0
anim = 11910
id = 191
postype = p1
removetime = ifelse(AnimElemNo(0)<3,1,-2)
sprpriority = -2
shadow = -1
ownpal = 1
[State 0, Explod Mirror OL]
type = Explod
trigger1 = AnimElem = 3, <= 0
trigger1 = AnimTime < 0
anim = 11911
id = 191
postype = p1
removetime = ifelse(AnimElemNo(0)<3,1,-2)
sprpriority = -1
ownpal = 1

[State 0, Explod Mirror Fly]
type = Explod
trigger1 = AnimElem = 7
anim = 11912
postype = p1
vel = -24,0
accel = 2,0
removetime = 16
sprpriority = 3
shadow = -1
ownpal = 1

[State 0, Snd Swing]
type = PlaySnd
trigger1 = AnimElem = 3
value = F0,3 
[State 0, Snd Dash]
type = PlaySnd
trigger1 = AnimElem = 6
value = F2,3

[State 0, Var Voice Bank]
type = VarSet
trigger1 = AnimElem = 2
v = 33
value = 191
[State 0, Var Voice Variant]
type = VarSet
trigger1 = AnimElem = 2
v = 34
value = random%6

[State 0, SprPriority]
type = SprPriority
trigger1 = AnimElem = 6
value = -3

[State 0, Var Intro TimeStart]
type = VarSet
trigger1 = !Time
v = 5
value = 136
[State 0, Var Intro Timer]
type = VarAdd
trigger1 = Var(5)
v = 5
value = -1
[State 191, Intro Flag]
type = AssertSpecial
trigger1 = AnimElemNo(0) <= 9
flag = Intro
[State 0, ChangeState]
type = ChangeAnim
trigger1 = TeamSide = 2
trigger1 = EnemyNear,Var(5) > 8
trigger2 = RoundState = 0
value = 191

[State 191, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; Intro - YASHIRO
[Statedef 195]
type = S
ctrl = 0
anim = 0
velset = 0,0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 128
value = 195

[State 0, Var Voice Bank]
type = VarSet
trigger1 = Anim = 195 && AnimElem = 11
v = 33
value = 195
[State 0, Var Voice Variant]
type = VarSet
trigger1 = Anim = 195 && AnimElem = 11
v = 34
value = random%3

[State 191, Intro Flag]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 191, 3]
type = ChangeState
trigger1 = Anim = 195 && AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; H - Asmos
[Statedef 4000]
type    = A
movetype= I
physics = N
velset = 0,0
ctrl = 1
sprpriority = -2
anim = ifelse(PrevStateNo > 4000,-1,4000)

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = EnemyNear,Map(Cutscene)
flag = invisible

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 32

[State 0, VarSet]
type = VarSet
trigger1 = !Time
v = 5
value = 0
[State 0, MapSet]
type = ParentMapSet
trigger1 = !Time
map = "AsmosBusy"
value = 0

[State 0, PosSet]
type = PosSet
triggerall = Pos Y != 0
trigger1 = !Root,Map(LucyAsmosOn)
trigger1 = !(Anim = 4123 && AnimElemNo(0) < 7)
trigger2 = Anim = 4072 && AnimElemNo(0) = 7
y = 0

; FLOATY
[State 0, Offset]
type = Offset
trigger1 = Anim = [4000,4017)
trigger1 = Parent,Map(LucyAsmosOn)
y = floor(cos(time*0.1)+0.5)

; CROUCH
[State 0, ChangeAnim]
type = ChangeAnim
triggerall = Parent,Map(LucyAsmosOn)
trigger1 = Parent,StateNo = [10,11]
trigger1 = Anim = 4000 || Anim = 4005 && AnimElemNo(0) >= 9
value = 4002
[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = Parent,StateType=S || Parent,StateNo = 12
trigger1 = Anim = 4003
value = 4004

; RESET ANIM
[State 0, ChangeAnim]
type = ChangeAnim
triggerall = Parent,Map(LucyAsmosOn)
triggerall = Anim != 6800
trigger1 = Anim != 4003 && AnimTime = 0 && RoundState >= 2
trigger1 = Anim != [4012,4015]
trigger2 = Anim != [4000,5000); && RoundState = 2
trigger3 = Anim = 4031 && AnimElemNo(0) <= 2 && Parent,StateNo = 315
value = 4000 + 3 * (Parent,StateType=C&&(Anim=4002||Anim=[4040,4060)))
[State 0, ChangeAnim]
type = ChangeAnim
triggerall = !Parent,Map(LucyAsmosOn)
trigger1 = Anim != 4090 && Anim != 4092 && Anim != 6902 && AnimTime = 0
trigger2 = Anim != [4000,5000) && RoundState = 2
trigger3 = Anim = 4500
trigger4 = Anim = 4090 && AnimElemNo(0) = [7,37] && Parent,Name = "LUCX"
value = 4090
elem = 5 + 33 * (Parent,Name="LUCX")
[State 0, ChangeAnim]
type = ChangeAnim
triggerall = Parent,Map(LucyAsmosOn)
trigger1 = Anim = 4090
value = 4091

; JUMP LAND
[State 0, ChangeAnim]
type = ChangeAnim
triggerall = Parent,Map(LucyAsmosOn)
trigger1 = Anim = [4020,4080)
trigger1 = Parent,StateNo = 52 || Parent,StateNo = [900,3000] || Parent,StateNo = 325 && AnimElemNo(0) <= 2
value = 4005
elem = 12

; CRAZE CANCEL
[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = Parent,StateNo = 3005
trigger1 = Anim != [4300,4301]
value = 4300 + !Parent,Map(LucyAsmosOn)

; TURN
[State 0, ChangeAnim]
type = ChangeAnim
triggerall = Facing != Parent,Facing
trigger1 = Parent,Map(LucyAsmosOn)
value = 4001
[State 0, Turn]
type = Turn
triggerall = Facing != Parent,Facing
trigger1 = Anim = 4001
trigger2 = Anim = 4123

; FOLLOW SPEED
[State 0, VelAdd]
type = PosAdd
trigger1 = Parent,Map(LucyAsmosOn) && !Parent,Var(8)
trigger1 = !(Anim = 4123 && AnimElemNo(0) < 12)
x = ParentDist X * 0.1 + Parent,Vel X * 0.75
y = ParentDist Y * 0.1 + Parent,Vel Y * 0.75
[State 0, VelAdd]
type = PosAdd
trigger1 = Parent,Map(LucyAsmosOn)
trigger1 = Parent,MoveType = A && Parent,StateNo != 900 && !Parent,Var(8)
trigger1 = Anim != 4123 && !(Parent,StateNo=[200,800)&&Parent,Anim%2=0)
trigger2 = Parent,Anim = 900
trigger3 = Parent,StateNo = 181
x = ParentDist X * 0.5 + Parent,Vel X * 0.5
y = ParentDist Y * 0.5 + Parent,Vel Y * 0.5
[State 0, VelAdd]
type = PosAdd
triggerall = Parent,Map(LucyAsmosOn)
trigger1 = Parent,Anim = 211 && Anim = 4021 && !Parent,Var(8)
trigger2 = Parent,Anim = 3000
x = ParentDist X * 1 + Parent,Vel X * 0.5
y = ParentDist Y * 1 + Parent,Vel Y * 0.5

; TAUNT
[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = Parent,StateNo = 165 && Parent,AnimElemNo(0) <= 16
trigger1 = Anim != [4016,4017]
value = 4016 + !Parent,Map(LucyAsmosOn)

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = Parent,StateNo = 165 && Parent,AnimElemNo(0) <= 16
trigger1 = Anim = 4016 && AnimElem = 8
value = Anim
elem = 6
[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = Parent,StateNo = 165 && Parent,AnimElemNo(0) <= 16
trigger1 = Anim = 4017 && AnimElem = 6
value = Anim
elem = 4

; WINPOSE
[State 0, ChangeAnim]
type = ChangeAnim
triggerall = RoundState > 2
triggerall = Parent,StateNo = 170
trigger1 = Anim != 4012 && Parent,Map(LucyAsmosOn)
trigger2 = Anim != 6902 && !Parent,Map(LucyAsmosOn)
value = ifelse(Parent,Map(LucyAsmosOn),4012,6902)
[State 0, ChangeAnim]
type = ChangeAnim
triggerall = Anim != [4013,4014]
triggerall = RoundState > 2
trigger1 = Parent,StateNo = 180
value = 4013 + !Parent,Map(LucyAsmosOn)
[State 0, ChangeAnim]
type = ChangeAnim
triggerall = Anim = 4000
triggerall = RoundState > 2
trigger1 = Parent,StateNo = 181 && Parent,AnimElemNo(0) >= 14
value = ifelse(EnemyNear,Pos Y>=666,6800,4015)
[State 0, MapSet]
type = ParentMapSet
trigger1 = !Parent,Map(LucyAsmosOn)
trigger1 = RoundState > 2 && MatchOver && Parent,Win
map = "LucyAsmosOn"
value = 1

; IM BUSY
[State 0, MapSet]
type = ParentMapSet
trigger1 = 1
map = "AsmosBusy"
value = (Anim=4092&&AnimElemNo(0)<=8)

; MATCH MOTION ANIM
[State 0, ChangeAnim]
type = ChangeAnim
triggerall = Parent,Map(LucyAsmosOn)
trigger1 = Parent,StateNo = 50 && Parent,Time <= 1
value = 4005 + (Parent,Vel X > 0) + 2 * (Parent,Vel X < 0)
[State 0, ChangeAnim]
type = ChangeAnim
triggerall = Parent,Map(LucyAsmosOn)
trigger1 = Parent,StateNo = 50 && Anim = 4005 && AnimElemNo(0) = 10
value = Anim
elem = 10
[State 0, ChangeAnim]
type = ChangeAnim
triggerall = Parent,Map(LucyAsmosOn)
trigger1 = Parent,StateNo = 102 && Parent,Time <= 1
value = 4011
[State 0, ChangeAnim]
type = ChangeAnim
triggerall = Parent,Map(LucyAsmosOn)
trigger1 = Parent,StateNo = 105 && Parent,Time <= 1
value = 4010

; MATCH NORMAL ATTACK ANIM
[State 0, ChangeAnim]
type = ChangeAnim
triggerall = Parent,Map(LucyAsmosOn)
trigger1 = Parent,MoveType = A
trigger1 = Parent,StateNo < 1000
trigger1 = SelfAnimExist(4000 + floor(Parent,Anim * 0.1))
trigger1 = Parent,Anim%2 = 1 || Parent,Anim = [900,920) || Parent,Anim >= 1000
trigger1 = !(Parent,StateNo=900 && Parent,Time > 2)
trigger1 = !(Parent,StateNo=[200,800)&&Parent,Anim%2=0)
trigger1 = !(Parent,StateNo=315)
value = 4000 + floor(Parent,Anim * 0.1)
elem = Parent,AnimElemNo(0)
[State 0, ChangeAnim]
type = ChangeAnim
triggerall = Parent,Map(LucyAsmosOn)
trigger1 = Parent,MoveType = A
trigger1 = Parent,StateNo >= 800 && Anim = [4020,4080)
trigger1 = AnimElemNo(0) = [1,2]
value = 4000
elem = 1
[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = Anim = 4072 && AnimElemNo(0) < 7 && Parent,StateNo = 726
value = Anim
elem = 7

[State 0, Explod 210 Slash FX 1]
type = Explod
triggerall = Anim = 4021
trigger1 = AnimElemNo(0) = [4,5]
trigger1 = GameTime%2 = 0
anim = 14021 + (AnimElemNo(-(Var(8)!=0))-4)
ID = 3000
postype = p1
removetime = 1
sprpriority = 4
ownpal = 1
removeongethit = 0
ignorehitpause = 1
[State 0, Explod 210 Slash FX 2]
type = Explod
triggerall = Anim = 4021
trigger1 = AnimElem = 6
anim = 14023
ID = 3000
postype = p1
sprpriority = -3
ownpal = 1
removeongethit = 0

[State 0, Explod 310 Slash FX 1]
type = Explod
triggerall = Anim = 4031
trigger1 = AnimElemNo(0) = [4,5]
trigger1 = GameTime%2 = 0
anim = 14031 + (AnimElemNo(-(Var(8)!=0))-4)
ID = 3000
postype = p1
removetime = 1
sprpriority = 4
ownpal = 1
removeongethit = 0
ignorehitpause = 1
[State 0, Explod 310 Slash FX 2]
type = Explod
triggerall = Anim = 4031
trigger1 = AnimElem = 6
anim = 14033
ID = 3000
postype = p1
sprpriority = -3
ownpal = 1
removeongethit = 0

[State 0, Explod 610 Slash FX 1]
type = Explod
triggerall = Anim = 4061
trigger1 = AnimElemNo(0) = [4,7]
trigger1 = GameTime%2 = 0
anim = 14061 + (AnimElemNo(-(Var(8)!=0))-4)
ID = 3000
postype = p1
removetime = 1
sprpriority = 4
ownpal = 1
removeongethit = 0
ignorehitpause = 1
[State 0, Explod 610 Slash FX 2]
type = Explod
triggerall = Anim = 4061
trigger1 = AnimElem = 8
anim = 14065
ID = 3000
postype = p1
sprpriority = -3
ownpal = 1
removeongethit = 0

; MOVEMENT CTECH
[State 0, Var Match Movement Var]
type = VarSet
trigger1 = Parent,StateNo = 900 && Parent,Time = 1
v = 5
value = Parent,Var(5)
[State 0, Var Match Movement Reset]
type = VarSet
trigger1 = Anim = 4092 && AnimElem = 5, 1 && Var(5)
v = 5
value = 0
[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = Anim = 4092 && AnimTime = 0
value = 4090
elem = 7

; MATCH SPECIAL ANIM
; 1000
[State 0, ChangeAnim]
type = ChangeAnim
triggerall = Parent,Map(LucyAsmosOn)
trigger1 = Parent,StateNo = 1000
trigger1 = Parent,AnimElemNo(0) = [1,4] && Parent,Time <= 32
value = 4100
elem = Parent,AnimElemNo(0)
[State 0, ChangeAnim]
type = ChangeAnim
triggerall = Parent,Map(LucyAsmosOn)
trigger1 = Anim = 4100
trigger1 = AnimElemNo(0) < 8
trigger1 = Parent,AnimElem = 9, >= 0 && Parent,StateNo = 1000
value = 4100
elem = 8
[State 0, ChangeAnim]
type = ChangeAnim
triggerall = Parent,Map(LucyAsmosOn)
trigger1 = Anim = 4100
trigger1 = AnimElem = 8
trigger1 = Parent,AnimElemNo(0) < 9 && Parent,StateNo = 1000
value = 4100
elem = 6
[State 0, ChangeAnim]
type = ChangeAnim
triggerall = Parent,Map(LucyAsmosOn)
trigger1 = Anim = 4100
trigger1 = Parent,Var(8)
value = 4100
elem = AnimElemNo(0)

; 1100
[State 0, ChangeAnim]
type = ChangeAnim
triggerall = Parent,Map(LucyAsmosOn)
trigger1 = Parent,StateNo = 1100
trigger1 = Parent,AnimElemNo(0) = [1,12]
value = 4110
elem = Parent,AnimElemNo(0)
[State 0, Explod 1100 FX]
type = Explod
triggerall = Anim = 4110
trigger1 = AnimElemNo(0) = [4,11]
trigger1 = AnimElemNo(0) != 10
trigger1 = GameTime%2 = 0
anim = 14110 + (AnimElemNo(-(Var(8)!=0))-4)
ID = 3000
postype = p1
removetime = 1
sprpriority = -1
ownpal = 1
removeongethit = 0
ignorehitpause = 1

; 1200
[State 0, ChangeAnim]
type = ChangeAnim
triggerall = Parent,Map(LucyAsmosOn)
trigger1 = Parent,StateNo = 1200
trigger1 = Parent,MoveType = A
value = 4120
elem = Parent,AnimElemNo(0)
[State 0, ChangeAnim]
type = ChangeAnim
triggerall = Parent,Map(LucyAsmosOn)
trigger1 = Parent,StateNo = 1210
trigger1 = Parent,Time <= 1
value = 4121
elem = Parent,AnimElemNo(0)

[State 0, LifeAdd]
type = LifeAdd
triggerall = Parent,Map(LucyAsmosOn)
trigger1 = Parent,StateNo = 1210
trigger1 = Parent,AnimElem = 5
trigger1 = Anim = 4121
value = 10 + min(Parent,Var(22)-Parent,Life,15)
redirectid = Parent,ID

[State 0, Map Copy AJIT]
type = RootMapSet
trigger1 = Parent,StateNo = 1210 && Parent,AnimElem = 5
trigger1 = Anim = 4121 && Parent,Name = "LUCX"
map = "LucxCopy"
value = 1
[State 0, Map Copy TSUG]
type = RootMapSet
triggerall = EnemyNear,Name = "TSUG" || EnemyNear,Name = "TSUX" || EnemyNear,Name = "TSUK"
trigger1 = Parent,StateNo = 1210 && Parent,AnimElem = 5
trigger1 = Anim = 4121 && Parent,Name = "LUCX"
map = "LucxCopy"
value = 2
[State 0, Map Copy SHER]
type = RootMapSet
triggerall = EnemyNear,Name = "SHER" || EnemyNear,Name = "SHEX" || EnemyNear,Name = "SHEK"
trigger1 = Parent,StateNo = 1210 && Parent,AnimElem = 5
trigger1 = Anim = 4121 && Parent,Name = "LUCX"
map = "LucxCopy"
value = 3
[State 0, Map Copy WALL]
type = RootMapSet
triggerall = EnemyNear,Name = "WALL" || EnemyNear,Name = "WALX" || EnemyNear,Name = "WALK"
trigger1 = Parent,StateNo = 1210 && Parent,AnimElem = 5
trigger1 = Anim = 4121 && Parent,Name = "LUCX"
map = "LucxCopy"
value = 4
[State 0, Map Copy REAP]
type = RootMapSet
triggerall = EnemyNear,Name = "REAP" || EnemyNear,Name = "REAX" || EnemyNear,Name = "REAK"
trigger1 = Parent,StateNo = 1210 && Parent,AnimElem = 5
trigger1 = Anim = 4121 && Parent,Name = "LUCX"
map = "LucxCopy"
value = 5
[State 0, Map Copy JUST]
type = RootMapSet
triggerall = EnemyNear,Name = "JUST" || EnemyNear,Name = "JUSX" || EnemyNear,Name = "JUSK"
trigger1 = Parent,StateNo = 1210 && Parent,AnimElem = 5
trigger1 = Anim = 4121 && Parent,Name = "LUCX"
map = "LucxCopy"
value = 6
[State 0, Map Copy IKUE]
type = RootMapSet
triggerall = EnemyNear,Name = "IKUE" || EnemyNear,Name = "IKUX" || EnemyNear,Name = "IKUK"
trigger1 = Parent,StateNo = 1210 && Parent,AnimElem = 5
trigger1 = Anim = 4121 && Parent,Name = "LUCX"
map = "LucxCopy"
value = 7
[State 0, Map Copy BOUN]
type = RootMapSet
triggerall = EnemyNear,Name = "BOUN" || EnemyNear,Name = "BOUX" || EnemyNear,Name = "BOUK"
trigger1 = Parent,StateNo = 1210 && Parent,AnimElem = 5
trigger1 = Anim = 4121 && Parent,Name = "LUCX"
map = "LucxCopy"
value = 8
[State 0, Map Copy BAXT]
type = RootMapSet
triggerall = EnemyNear,Name = "BAXT" || EnemyNear,Name = "BAXX" || EnemyNear,Name = "BAXK"
trigger1 = Parent,StateNo = 1210 && Parent,AnimElem = 5
trigger1 = Anim = 4121 && Parent,Name = "LUCX"
map = "LucxCopy"
value = 9
[State 0, Map Copy TERI]
type = RootMapSet
triggerall = EnemyNear,Name = "TERI" || EnemyNear,Name = "TERX" || EnemyNear,Name = "TERK"
trigger1 = Parent,StateNo = 1210 && Parent,AnimElem = 5
trigger1 = Anim = 4121 && Parent,Name = "LUCX"
map = "LucxCopy"
value = 10
[State 0, Map Copy CICI]
type = RootMapSet
triggerall = EnemyNear,Name = "CICI" || EnemyNear,Name = "CICX" || EnemyNear,Name = "CICK"
trigger1 = Parent,StateNo = 1210 && Parent,AnimElem = 5
trigger1 = Anim = 4121 && Parent,Name = "LUCX"
map = "LucxCopy"
value = 11
[State 0, Map Copy BERN]
type = RootMapSet
triggerall = EnemyNear,Name = "BERN" || EnemyNear,Name = "BERX" || EnemyNear,Name = "BERK"
trigger1 = Parent,StateNo = 1210 && Parent,AnimElem = 5
trigger1 = Anim = 4121 && Parent,Name = "LUCX"
map = "LucxCopy"
value = 12
[State 0, Map Copy JANE]
type = RootMapSet
triggerall = EnemyNear,Name = "JANE" || EnemyNear,Name = "JANX" || EnemyNear,Name = "JANK"
trigger1 = Parent,StateNo = 1210 && Parent,AnimElem = 5
trigger1 = Anim = 4121 && Parent,Name = "LUCX"
map = "LucxCopy"
value = 13
[State 0, Map Copy ISAB]
type = RootMapSet
triggerall = EnemyNear,Name = "ISAB" || EnemyNear,Name = "ISAX" || EnemyNear,Name = "ISAK"
trigger1 = Parent,StateNo = 1210 && Parent,AnimElem = 5
trigger1 = Anim = 4121 && Parent,Name = "LUCX"
map = "LucxCopy"
value = 14
[State 0, Map Copy GOLI]
type = RootMapSet
triggerall = EnemyNear,Name = "GOLI" || EnemyNear,Name = "GOLX" || EnemyNear,Name = "GOLK"
trigger1 = Parent,StateNo = 1210 && Parent,AnimElem = 5
trigger1 = Anim = 4121 && Parent,Name = "LUCX"
map = "LucxCopy"
value = 15
[State 0, Map Copy NECC]
type = RootMapSet
triggerall = EnemyNear,Name = "NECC" || EnemyNear,Name = "NECX" || EnemyNear,Name = "NECK"
trigger1 = Parent,StateNo = 1210 && Parent,AnimElem = 5
trigger1 = Anim = 4121 && Parent,Name = "LUCX"
map = "LucxCopy"
value = 16
[State 0, Map Copy EMIC]
type = RootMapSet
triggerall = EnemyNear,Name = "EMIC" || EnemyNear,Name = "EMIX" || EnemyNear,Name = "EMIK"
trigger1 = Parent,StateNo = 1210 && Parent,AnimElem = 5
trigger1 = Anim = 4121 && Parent,Name = "LUCX"
map = "LucxCopy"
value = 17
[State 0, Map Copy LUCY]
type = RootMapSet
triggerall = EnemyNear,Name = "LUCY" || EnemyNear,Name = "LUCX" || EnemyNear,Name = "LUCK"
trigger1 = Parent,StateNo = 1210 && Parent,AnimElem = 5
trigger1 = Anim = 4121 && Parent,Name = "LUCX"
map = "LucxCopy"
value = 18
[State 0, Map Copy GABB]
type = RootMapSet
triggerall = EnemyNear,Name = "GABB" || EnemyNear,Name = "GABX" || EnemyNear,Name = "GABK"
trigger1 = Parent,StateNo = 1210 && Parent,AnimElem = 5
trigger1 = Anim = 4121 && Parent,Name = "LUCX"
map = "LucxCopy"
value = 19
[State 0, Map Copy TYRA]
type = RootMapSet
triggerall = EnemyNear,Name = "TYRA" || EnemyNear,Name = "TYRX" || EnemyNear,Name = "TYRK"
trigger1 = Parent,StateNo = 1210 && Parent,AnimElem = 5
trigger1 = Anim = 4121 && Parent,Name = "LUCX"
map = "LucxCopy"
value = 20

; 1230
[State 0, ChangeAnim]
type = ChangeAnim
triggerall = !Parent,Map(LucyAsmosOn)
trigger1 = Parent,StateNo = 1230
trigger1 = Parent,Time <= 1
value = 4123
[State 0, PosSet]
type = PosAdd
trigger1 = Anim = 4123 && AnimElemNo(0) = [6,11]
x = ParentDist X + 36
[State 0, PosSet]
type = PosAdd
trigger1 = Anim = 4123 && AnimElem = 6
y = - Pos Y - 240
[State 0, VelAdd]
type = VelAdd
trigger1 = Anim = 4123 && AnimElemNo(0) = [4,5]
y = (AnimElemNo(0)-3)*-4
[State 0, VelSet]
type = VelSet
trigger1 = Anim = 4123 && AnimElem = 6
y = 80
[State 0, PosSet]
type = PosSet
trigger1 = Anim = 4123 && AnimElem = 7
y = 0
[State 0, VelSet]
type = VelSet
trigger1 = Anim = 4123 && AnimElem = 7
y = 0
[State 0, Explod]
type = Explod
trigger1 = Anim = 4123 && AnimElemNo(0) = [5,6]
anim = 14123 + (AnimElemNo(0)=6)
pos = 0,- Vel Y * 1
postype = p1
removetime = 1
sprpriority = -5

; 2000
[State 0, ChangeAnim]
type = ChangeAnim
triggerall = Parent,Map(LucyAsmosOn)
trigger1 = Parent,StateNo = 2000
trigger1 = !Time
value = 4200
[State 0, ChangeAnim]
type = ChangeAnim
triggerall = Parent,Map(LucyAsmosOn)
trigger1 = Anim = 4200
trigger1 = Parent,StateNo = 2000
trigger1 = Parent,Var(8)
value = Anim
elem = 23

; 2200
[State 0, ChangeAnim]
type = ChangeAnim
triggerall = Parent,Map(LucyAsmosOn)
trigger1 = Parent,StateNo = 2200
trigger1 = Parent,Time <= 1
value = 4220

; 2400
[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = Anim != 4092 && (Parent,StateNo = [2400,2411] || Parent,StateNo = 182)
value = 4092
[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = Anim = 4092 && AnimElemNo(0) = 5
trigger1 = (Parent,StateNo = [2400,2411] || Parent,StateNo = 182)
value = 4092
elem = 5

; SPRPRIORITY
[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = -2
[State 0, SprPriority]
type = SprPriority
trigger1 = Anim = 4021 && AnimElemNo(0) = [5,8]
trigger2 = Anim = 4021 && AnimElemNo(0) = 4 && Parent,Var(8)
trigger3 = Anim = 4050 && AnimElemNo(0) = [2,4]
trigger4 = Anim = 4100
trigger5 = Anim = 4123 && AnimElemNo(0) >= 6
trigger6 = Anim = 4014 && AnimElemNo(0) >= 3
value = 5

; STATECHANGE
[State 0, ChangeAnim]
type = ChangeState
trigger1 = Anim = 4090 && AnimElem = 6, 3
trigger1 = Var(5)
value = 4090

[State 0, ChangeState]
type = ChangeState
triggerall = Parent,StateNo = 1300 ;&& Parent,MoveType = A
trigger1 = Parent,AnimElem = 6 && Parent,MoveGuarded
trigger2 = Parent,AnimElem = 5 && !Parent,MoveContact
trigger3 = Parent,AnimElem = 4 && Parent,MoveHit
value = 4130 + 30 * (Parent,Var(5)<2)

[State 0, ChangeState]
type = ChangeState
triggerall = Parent,StateNo = 1400 && Parent,MoveType = A
trigger1 = Parent,AnimElem = 4
value = 4140+Parent,Var(5)

[State 0, ChangeState]
type = ChangeState
trigger1 = Parent,StateNo = 1500 && Parent,MoveType = A
value = 4150

[State 0, ChangeState]
type = ChangeState
trigger1 = Parent,StateNo = 2100 && Parent,Var(54)
value = 4210

[State 0, ChangeState]
type = ChangeState
trigger1 = Parent,StateNo = 2200 && Parent,Time <= 7 && !Parent,Map(LucyAsmosOn)
value = 4220
;[State 0, ChangeState]
;type = ChangeState
;trigger1 = Parent,StateNo = 2210 && Parent,Time <= 7
;value = 4225

[State 0, ChangeState]
type = ChangeState
trigger1 = Parent,StateNo = 2300 && Parent,Time <= 7
value = 4230

[State 0, ChangeState]
type = ChangeState
trigger1 = Parent,MoveType = H || Parent,StateNo = [120,160) || Parent,StateNo = [3120,3121]
trigger1 = !(!Parent,Map(LucyAsmosOn) && Anim = 4090 && AnimElemNo(0) >= 37)
value = 4500

[State 0, ChangeAnim]
type = ChangeState
trigger1 = Parent,StateNo = [910,911]
trigger1 = Parent,Time < 8
value = 4800 + (Parent,StateNo=911)

;---------------------------------------------------------------------------
; H - Asmos Move
[Statedef 4090]
type    = A
movetype= I
physics = N
velset = 0,0
ctrl = 0
sprpriority = 5
anim = 4092

[State 0, MapSet]
type = ParentMapSet
trigger1 = 1
map = "AsmosBusy"
value = !(Anim=4092&&AnimElemNo(0)>=9)

[State 0, PosAdd]
type = PosAdd
trigger1 = Anim = 4092 && AnimElem = 5
x = p2dist x * 0.475 * Var(5)

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = Anim = 4092 && AnimTime = 0
trigger2 = Parent,StateNo = [1000,3000) && Parent,StateNo != 1200
value = 4090
elem = 7
[State 0, ChangeState]
type = ChangeState
trigger1 = Anim = 4090
value = 4000

;---------------------------------------------------------------------------
; H - Asmos Saw
[Statedef 4130]
type    = C
movetype= A
physics = N
velset = 0,0
ctrl = 0
sprpriority = 5
anim = 4130

[State 0, Var Strength]
type = VarSet
trigger1 = !Time
v = 5
value = Parent,Var(5)%2
[State 0, Var On/Off]
type = VarSet
trigger1 = !Time
v = 6
value = (!!Root,Map(LucyAsmosOn)||Parent,Map(AsmosDistX) < min(32,Root,FrontEdgeDist*0.5))

[State 0, ParentVarSet]
type = ParentMapSet
trigger1 = !Time
map = "LucyAsmosOn"
value = !Var(6)

[State 0, Turn]
type = Turn
triggerall = !Time
trigger1 = Facing != Parent,Facing && Var(6)
trigger2 = Facing = Parent,Facing && !Var(6)
[State 0, Turn]
type = Turn
trigger1 = AnimTime = 0
trigger1 = !Var(6)

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = AnimElem = 8
value = Anim
elem = 4
[State 0, ChangeAnim]
type = ChangeAnim
triggerall = AnimElemNo(0) = [4,8)
trigger1 = MoveContact && Var(6)
trigger2 = P2Dist X <= 8 && Var(6) && Time > 14
trigger3 = ParentDist X <= 8 && !Var(6) && Time > 14
trigger4 = Var(6) && Parent,MoveType = H && Parent,StateNo != [120,160)
value = Anim
elem = 8

[State 0, Snd Swish]
type = PlaySnd
trigger1 = AnimElem = 2
value = F0,7
[State 0, Snd Buzz Off Johnny]
type = PlaySnd
trigger1 = !Time
value = S1300,0

[State 0, MapSet]
type = ParentMapSet
trigger1 = 1
map = "AsmosBusy"
value = 1

[State 0, PosAdd]
type = PosAdd
trigger1 = !Time
trigger2 = AnimElem = 2
trigger3 = AnimElem = 8
trigger4 = AnimElem = 9
x = 4
[State 0, VelMul]
type = VelAdd
trigger1 = AnimElem = 3
x = (3 + 2 * Var(5))
[State 0, VelMul]
type = VelMul
trigger1 = AnimElemNo(0) >= 8
trigger2 = MoveContact && Var(6)
x = 0.8

[State 0, PosAdd]
type = PosAdd
trigger1 = Map(FrontStageDist) < 4
x = Map(FrontStageDist) - Vel X * 0.5 - 4
[State 0, PosAdd]
type = PosAdd
trigger1 = Map(BackStageDist) < 4
x = -Map(BackStageDist) - Vel X * 0.5 + 4

[State 0, Var Damage Value]
type = VarSet
trigger1 = !Time
v = 12
value = 128

[State 0, HitDef]
type = HitDef
trigger1 = !MoveContact && !MoveReversed
attr = C,SA
hitflag = MAFD
guardflag = L
animtype = medium
priority = 5,Hit
damage = Ceil(Var(12) * FVar(10)),Ceil(Var(12)*const(BC.ChipLight))
guardpoints = floor((32 + Var(12)) * 0.5)
pausetime = 8, 12+Root,var(13)
guard.pausetime = 8,12
sparkno = ifelse(Var(10)=2||Parent,Var(11)>1&&EnemyNear,StateType!=L,30,25 + random%4)
guard.sparkno = 40
sparkxy = Floor(P2Dist X*0.5),-16+Floor(P2Dist Y*0.5)
hitsound = 1,8
guardsound = 5,1
ground.type = Low
ground.slidetime = 8
ground.hittime = 8
guard.hittime = 6
yaccel = 0.5
fall = (Var(10)!=2&&Var(11)<=1&&!Var(6))
air.fall = 1
guard.dist = 32
ground.velocity = -3,-4 * (Var(10)!=2&&Var(11)<=1&&!Var(6))
air.velocity = -2,-0 - !Var(6)
p2facing = 1
getpower = floor(Var(12)*Root,Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Root,Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0

[State 0, Var Dire Counter Stack On]
type = ParentVarSet
triggerall = Var(8) = 1 && Var(10) = 2
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
v = 11
value = 3
ignorehitpause = 1
[State 0, ParentVarSet Counter Message]
type = ParentVarSet
triggerall = Var(8) = 1 && Var(10) = 2
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
v = 32
value = 63 + (Var(10) = 2) + (Var(10) = 3) * 10
ignorehitpause = 1
[State 0, TargetState]
type = TargetState
triggerall = Var(8) = 1 && (Var(10) = 2 || Parent,Var(11) > 1)
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5080) && Target,StateNo%10 = 0
value = 5320
ignorehitpause = 1
[State 0, Map Dire Trigger]
type = RootMapSet
triggerall = Var(8) = 1 && (Var(10) = 2 || Parent,Var(11) > 1)
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = 5320
map = "DireAct"
value = Root,Var(11) - 1
ignorehitpause = 1
[State 0, Turn]
type = Turn
triggerall = Var(8) = 1 && (Var(10) = 2 || Parent,Var(11) > 1)
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = 5320
trigger1 = Var(5) > 1
trigger1 = Facing = Target,Facing
redirectid = Target,ID
ignorehitpause = 1

[State 0, Gauge Gain]
type = ParentVarAdd
triggerall = Var(8) = 1
trigger1 = NumTarget && MoveHit
v = 18
value = 200
ignorehitpause = 1

[State 0, StateTypeSet]
type = StateTypeSet
triggerall = MoveType = A
trigger1 = AnimElem = 8
trigger2 = MoveContact && NumTarget
trigger3 = Parent,MoveType = H && Parent,StateNo != [120,160)
movetype = I

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = AnimTime = 0
value = 4090
elem = 5
[State 0, ChangeState]
type = ChangeState
trigger1 = Anim = 4090
trigger2 = Parent,StateNo = 1230
value = 4000

;---------------------------------------------------------------------------
; H - Asmos Zap
[Statedef 4140]
type    = A
movetype= I
physics = N
velset = 0,0
ctrl = 0
sprpriority = -2
anim = 4140

[State 0, Turn]
type = Turn
trigger1 = !Time
trigger1 = Facing != Parent,Facing

[State 0, Var Strength]
type = VarSet
trigger1 = !Time
v = 5
value = Parent,Var(5)

[State 0, MapSet]
type = ParentMapSet
trigger1 = !Time
map = "AsmosBusy"
value = 1

[State 0, Snd Hit]
type = PlaySnd
trigger1 = AnimElem = 5
value = F1,4
[State 0, Snd Zap]
type = PlaySnd
trigger1 = AnimElem = 5
value = S1400,0

[State 0, Explod]
type = Explod
trigger1 = AnimElem = 5
anim = 14140
ID = 3000
pos = 0,0
postype = p1
bindtime = 666
sprpriority = -1
ownpal = 1
removeongethit = 1

[State 0, Var Damage Value]
type = VarSet
trigger1 = !MoveContact && !MoveReversed
v = 12
value = 128

[State 0, HitDef]
type = HitDef
trigger1 = !MoveContact && !MoveReversed
attr = A,SP
hitflag = MAF
guardflag = MA
animtype = medium
priority = 5,Hit
damage = Ceil(Var(12) * FVar(10)),Ceil(Var(12)*const(BC.ChipLight))
guardpoints = floor((32 + Time + Var(12)) * 0.5)
pausetime = 2, 6
sparkno = ifelse(Var(10)=2||Parent,Var(11)>1,30,10 + random%4)
guard.sparkno = 40
sparkxy = Floor(P2Dist X*0.5),-64+Floor(P2Dist Y*0.5)
hitsound = -1;1,3
guardsound = 5,1
ground.type = Low
ground.slidetime = 8
ground.hittime = 8
guard.hittime = 6
yaccel = 0.5
fall = 1
ground.velocity = 1,-6
air.velocity = 1.5,-3
p2facing = 1
getpower = floor(Var(12)*Root,Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Root,Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0

[State 0, Var Dire Counter Stack On]
type = ParentVarSet
triggerall = Var(8) = 1 && Var(10) = 2
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
v = 11
value = 3
ignorehitpause = 1
[State 0, ParentVarSet Counter Message]
type = ParentVarSet
triggerall = Var(8) = 1 && Var(10) = 2
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
v = 32
value = 63 + (Var(10) = 2) + (Var(10) = 3) * 10
ignorehitpause = 1
[State 0, TargetState]
type = TargetState
triggerall = Var(8) = 1
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
trigger1 = Var(10)=2||Parent,Var(11)>1
value = 5335
ignorehitpause = 1
[State 0, Map Dire Trigger]
type = RootMapSet
triggerall = Var(8) = 1 && (Var(10) = 2 || Parent,Var(11) > 1)
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = 5335
map = "DireAct"
value = Root,Var(11) - 1
ignorehitpause = 1
[State 0, Turn]
type = Turn
triggerall = Var(8) = 1 && (Var(10) = 2 || Parent,Var(11) > 1)
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = 5335
trigger1 = Var(5) > 1
trigger1 = Facing = Target,Facing
redirectid = Target,ID
ignorehitpause = 1

[State 0, VarSet]
type = RootMapSet
trigger1 = Var(8) = 1 && Target,StateNo = [5000,6000)
trigger1 = NumTarget && MoveHit
map = "FXColor"
value = ifelse(Root,Var(59)=13,16304192,ifelse(Root,Var(59)=14,12582944,ifelse(Root,Var(59)=15,16312536,ifelse(Root,Var(59)=16,8452328,ifelse(Root,Var(59)=18,11010112,ifelse(Root,Var(59)=19,43072,ifelse(Root,Var(59)=20,10485976,ifelse(Root,Var(59)=21,6303824,16312384))))))))
ignorehitpause = 1
[State 0, TargetState]
type = RootMapSet
trigger1 = Var(8) = 1 && Target,StateNo = [5000,6000)
trigger1 = NumTarget && MoveHit
map = "HitFX"
value = 2
ignorehitpause = 1
redirectid = Target,ID

[State 0, Gauge Gain]
type = ParentVarAdd
triggerall = Var(8) = 1
trigger1 = NumTarget && MoveHit
v = 18
value = 200
ignorehitpause = 1

[State 0, VarSet]
type = ParentVarSet
trigger1 = AnimElem = 6
v = 9
value = 5

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 4
movetype = A
[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 7
movetype = I

[State 0, ChangeState]
type = ChangeState
;trigger1 = MoveType = A
trigger1 = Parent,MoveType = H && Parent,StateNo != [120,160)
value = 4500

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = AnimTime = 0
value = 4090
elem = 7
[State 0, ChangeState]
type = ChangeState
trigger1 = Anim = 4090
trigger2 = Parent,StateNo = 1230
value = 4000

;---------------------------------------------------------------------------
; H - Asmos ZapM
[Statedef 4141]
type    = A
movetype= I
physics = N
velset = 0,0
ctrl = 0
sprpriority = 5
anim = 4092

[State 0, MapSet]
type = ParentMapSet
trigger1 = 1
map = "AsmosBusy"
value = 1
[State 0, ParentVarSet]
type = ParentMapSet
trigger1 = !Time
map = "LucyAsmosOn"
value = 0

[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 5
x = p2dist x

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 4140

;---------------------------------------------------------------------------
; H - Asmos Bite
[Statedef 4150]
type    = A
movetype= A
physics = N
velset = 0,0
ctrl = 0
sprpriority = -2

[State 0, DestroySelf]
type = DestroySelf
trigger1 = Parent,StateNo = [3000,3005]

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = !(Anim = 4150 && AnimElemNo(0) >= 7)
flag = nostandguard
flag2 = nocrouchguard
ignorehitpause = 1
redirectid = Parent,ID

[State 0, Turn]
type = Turn
trigger1 = Facing != Root,Facing

[State 0, Var Strength]
type = VarSet
trigger1 = !Time
v = 5
value = Parent,Var(5)
[State 0, VarSet]
type = VarSet
trigger1 = !Time
v = 6
value = 1
[State 0, VarSet]
type = VarSet
trigger1 = Var(6) = 1
trigger1 = Parent,command != "holdy"
v = 6
value = 0
[State 0, VarSet]
type = VarSet
trigger1 = Parent,StateNo = 1505
v = 7
value = 16
[State 0, VarAdd]
type = VarAdd
trigger1 = Var(7) > 1
trigger2 = Var(7) = 1 && !Var(6)
v = 7
value = -1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 5
trigger1 = Parent,StateNo != 1500
movetype = A
[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 7
;trigger2 = Parent,StateNo = 1505
movetype = I

[State 0, MapSet]
type = ParentMapSet
trigger1 = !Time
trigger2 = AnimElem = 9
map = "AsmosBusy"
value = MoveType = A

[State 0, VelSet]
type = PosAdd
trigger1 = Parent,Var(8) = 0
x = ParentDist X * 0.9
y = ParentDist Y * 0.9

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = Parent,MoveType = A
trigger1 = Parent,StateNo = 1500
value = 4150
elem = Parent,AnimElemNo(0)
[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = Var(7)
trigger1 = AnimElemNo(0) = 3
trigger1 = Time < 128 && Parent,StateNo != 52
value = 4150
elem = 3

[State 0, Snd Swing]
type = PlaySnd
triggerall = Parent,StateNo != 1500
trigger1 = AnimElem = 5
value = F0,3
[State 0, Snd Bite]
type = PlaySnd
triggerall = Parent,StateNo != 1500
trigger1 = AnimElem = 6
value = S1500,1

[State 0, Offset]
type = Offset
triggerall = AnimElemNo(0) = 3 && Var(7)
trigger1 = Var(6) && Time = [112,128]
x = -1+Time%3

[State 0, Var Damage Value]
type = VarSet
trigger1 = !MoveContact && !MoveReversed
v = 12
value = 136

[State 0, HitDef]
type = HitDef
trigger1 = !MoveContact && !MoveReversed
trigger1 = Parent,StateNo != 1500
attr = S,SA
hitflag = MAF
guardflag = M
animtype = heavy
priority = 3,Hit
damage = Ceil(Var(12) * FVar(10)),Ceil(Var(12)*const(BC.ChipMid))
guardpoints = floor((const(BC.GuardFlat) + Var(12)) * const(BC.GuardScaleMid))
pausetime = 12,12+Root,Var(13)
guard.pausetime = 12,12
sparkno = ifelse(Var(10)=2||Parent,Var(11)>1,30,25 + random%4)
guard.sparkno = Parent,var(19)
sparkxy = -40+Floor(P2Dist X*0.5),-56+Floor(P2Dist Y*0.5)
hitsound = 1,8
guardsound = 5,0
ground.type = Low
ground.slidetime = 14
ground.hittime = 14
guard.hittime = 8
yaccel = 0.5
air.fall = 1
ground.velocity = -3,0
air.velocity = -2,-3
p2facing = 1
getpower = floor(Var(12)*Root,Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Root,Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))

[State 0, Var Dire Counter Stack On]
type = ParentVarSet
triggerall = Var(8) = 1 && Var(10) = 2
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
v = 11
value = 3
ignorehitpause = 1
[State 0, ParentVarSet Counter Message]
type = ParentVarSet
triggerall = Var(8) = 1 && Var(10) = 2
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
v = 32
value = 63 + (Var(10) = 2) + (Var(10) = 3) * 10
ignorehitpause = 1
[State 0, TargetState]
type = TargetState
triggerall = Var(8) = 1 && (Var(10) = 2 || Parent,Var(11) > 1)
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
value = 5320
ignorehitpause = 1
[State 0, Map Dire Trigger]
type = RootMapSet
triggerall = Var(8) = 1 && (Var(10) = 2 || Parent,Var(11) > 1)
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = 5320
map = "DireAct"
value = Root,Var(11) - 1
ignorehitpause = 1

[State 0, Gauge Gain]
type = ParentVarAdd
triggerall = Var(8) = 1
trigger1 = NumTarget && MoveHit
v = 18
value = 200
ignorehitpause = 1

[State 0, VarSet]
type = ParentVarSet
trigger1 = Var(8) = 1
v = 9
value = 3 + 3 * (!!MoveHit)
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = Parent,MoveType = H && Parent,StateNo != [120,160)
value = 4500

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimElem = 9
trigger2 = Parent,StateNo = 900
value = 4000
ignorehitpause = 1

;---------------------------------------------------------------------------
; H - Asmos Leap
[Statedef 4160]
type    = A
movetype= A
physics = N
velset = 0,0
ctrl = 0
sprpriority = 5
anim = 4160+(Parent,Var(5)%2)

[State 0, Var Strength]
type = VarSet
trigger1 = !Time
v = 5
value = Parent,Var(5)%2
[State 0, Var On/Off]
type = VarSet
trigger1 = !Time
v = 6
value = !!Root,Map(LucyAsmosOn)

[State 0, ParentVarSet]
type = ParentMapSet
trigger1 = !Time
map = "LucyAsmosOn"
value = 0

[State 0, Turn]
type = Turn
triggerall = !Time && !Var(6)
trigger1 = P2Dist X < 0

[State 0, MapSet]
type = ParentMapSet
trigger1 = 1
map = "AsmosBusy"
value = 1

[State 0, PosAdd]
type = PosAdd
trigger1 = Map(FrontStageDist) < 4
x = Map(FrontStageDist) - Vel X * 0.5 - 4
[State 0, PosAdd]
type = PosAdd
trigger1 = Map(BackStageDist) < 4
x = -Map(BackStageDist) - Vel X * 0.5 + 4

[State 0, MapSet]
type = MapSet
trigger1 = AnimElem = 5
map = "DashDustFX"
value = 1

[State 0, Snd Snahkee]
type = PlaySnd
trigger1 = AnimElem = 5
value = S1350,0
[State 0, Snd Slash]
type = PlaySnd
trigger1 = AnimElem = 10
value = F0,8

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 6
x = 0.5 + max(0,min(P2Dist X * 0.025,1.5 + Var(5)*5.5))
y = -5 - 3 * Var(5)
[State 0, VelAdd]
type = VelAdd
trigger1 = AnimElemNo(0) = [6,14]
y = 0.45

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 15
x = 0
y = 0
[State 0, PosSet]
type = PosSet
trigger1 = AnimElem = 15
y = 0

[State 0, Var Damage Value]
type = VarSet
trigger1 = !Time
v = 12
value = 88 + 8 * Var(5)

[State 0, HitDef]
type = HitDef
triggerall = AnimElemNo(0) < 12 && !Var(5)
trigger1 = !MoveContact && !MoveReversed
attr = A,SA
hitflag = MAF
guardflag = M
animtype = medium
priority = 5,Hit
damage = Ceil(Var(12) * FVar(10)),Ceil(Var(12)*const(BC.ChipLight))
guardpoints = floor((32 + Var(12)) * 0.5)
pausetime = 6,6+Root,Var(13)
guard.pausetime = 6,6
sparkno = 5 + random%4
guard.sparkno = 40
sparkxy = Floor(P2Dist X*0.5),-48+Floor(P2Dist Y*0.5)
hitsound = 1,3
guardsound = 5,1
ground.type = Low
ground.slidetime = 8
ground.hittime = 8
guard.hittime = 4
yaccel = 0.5
fall = 1
ground.velocity = -1 - Vel X * 0.5,-6
air.velocity = -1 - Vel X * 0.5,-7 - EnemyNear,Pos Y * 0.125
p2facing = 1
getpower = floor(Var(12)*Root,Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Root,Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
[State 0, HitDef]
type = HitDef
triggerall = AnimElemNo(0) < 13 && Var(5)
trigger1 = !MoveContact && !MoveReversed
attr = A,SA
hitflag = AF
animtype = medium
priority = 5,Hit
damage = Ceil(Var(12) * FVar(10)),Ceil(Var(12)*const(BC.ChipMid))
guardpoints = floor((32 + Var(12)) * 0.5)
pausetime = 6,6+Root,Var(13)
sparkno = ifelse(Var(10)=2||Parent,Var(11)>1,30,5 + random%4)
guard.sparkno = 40
sparkxy = Floor(P2Dist X*0.5),-48+Floor(P2Dist Y*0.5)
hitsound = 1,4
guardsound = 5,1
ground.type = Low
ground.slidetime = 8
ground.hittime = 8
yaccel = 0.5
fall = 1
air.velocity = -1 - Vel X * 0.5,-4 + Vel Y * 0.5 - EnemyNear,Pos Y * 0.01
p2facing = 1
getpower = floor(Var(12)*Root,Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Root,Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))
air.cornerpush.veloff = 0
[State 0, HitDef]
type = HitDef
trigger1 = AnimElemNo(0) >= 13
trigger1 = !MoveContact && !MoveReversed
trigger2 = AnimElem = 13 && !Var(5)
trigger2 = MoveContact
attr = A,SA
hitflag = MAF
guardflag = M
animtype = heavy
priority = 5,Hit
damage = Ceil(Var(12) * FVar(10) * (0.75 + 0.75 * (!MoveHit))),Ceil(Var(12)*const(BC.ChipMid))
guardpoints = floor((32 + Var(12)) * 0.5)
pausetime = 6,6+Root,Var(13)
guard.pausetime = 6,6
sparkno = ifelse(Var(10)=2||Parent,Var(11)>1,30,10 + random%4)
guard.sparkno = 40
sparkxy = Floor(P2Dist X*0.5),-48+Floor(P2Dist Y*0.5)
hitsound = 1,4
guardsound = 5,1
ground.type = Low
ground.slidetime = 8
ground.hittime = 8
guard.hittime = 6
yaccel = 0.5
fall = 1
ground.velocity = -1,8
air.velocity = -1,8
fall.yvelocity = -3
p2facing = 1
getpower = floor(Var(12)*Root,Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Root,Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0

[State 0, Var Dire Counter Stack On]
type = ParentVarSet
triggerall = Var(8) = 1 && Var(10) = 2
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
v = 11
value = 3
ignorehitpause = 1
[State 0, ParentVarSet Counter Message]
type = ParentVarSet
triggerall = Var(8) = 1 && Var(10) = 2
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
v = 32
value = 63 + (Var(10) = 2) + (Var(10) = 3) * 10
ignorehitpause = 1
[State 0, TargetState]
type = TargetState
triggerall = Var(8) = 1
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
trigger1 = AnimElemNo(0) >= 12
;trigger1 = EnemyNear,Pos Y < -8 || Var(10)=2 || Parent,Var(11)>1
value = ifelse(Var(10)=2||Parent,Var(11)>1,5345,5355)
ignorehitpause = 1
[State 0, Map Dire Trigger]
type = RootMapSet
triggerall = Var(8) = 1 && (Var(10) = 2 || Parent,Var(11) > 1)
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = 5345
trigger1 = AnimElemNo(0) >= 12
map = "DireAct"
value = Root,Var(11) - 1
ignorehitpause = 1

[State 0, Gauge Gain]
type = ParentVarAdd
triggerall = Var(8) = 1
trigger1 = NumTarget && MoveHit
v = 18
value = 200 * (0.25 + 0.75 * (HitCount=1))
ignorehitpause = 1

[State 0, StateTypeSet]
type = StateTypeSet
triggerall = MoveType = A
trigger1 = AnimElem = 14
trigger2 = Parent,MoveType = H && Parent,StateNo != [120,160)
movetype = I

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = AnimTime = 0
value = 4090
elem = 5
[State 0, ChangeState]
type = ChangeState
trigger1 = Anim = 4090
trigger2 = Pos Y >= -1
trigger2 = Parent,MoveType = H && Parent,StateNo != [120,160)
value = 4000

;---------------------------------------------------------------------------
; H - Asmos Speaker
[Statedef 4210]
type    = A
movetype= A
physics = N
velset = 0,0
sprpriority = -3
anim = 4210

[State 0, MapSet]
type = RootMapSet
trigger1 = MoveType = A
map = "SuperPauseTime"
value = 2
ignorehitpause = 1

[State 0, Turn]
type = Turn
trigger1 = !Time
trigger1 = Facing != Parent,Facing

[State 0, ChangeAnim]
type = ChangeAnim
triggerall = !Time
trigger1 = Abs(P2Dist X) > 32 && Parent,MoveHit
trigger2 = Parent,Name = "LUCX"
value = 4092

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = AnimTime = 0 && Anim = 4092
value = 4210
elem = 3

[State 0, PosAdd]
type = PosAdd
trigger1 = Anim = 4092 && AnimElem = 5
x = floor(P2Dist X)

[State 0, Counter Check Reset]
type = VarSet
trigger1 = !MoveContact
v = 10
value = Parent,Var(10) * !Root,Var(51)
ignorehitpause = 1

[State 0, Snd LOUD NOISES]
type = PlaySnd
trigger1 = AnimElem = 4 && Anim = 4210
value = S2100,0

[State 0, MapSet]
type = ParentMapSet
trigger1 = !Time
map = "AsmosBusy"
value = 1

[State 0, Explod]
type = Explod
triggerall = Anim = 4210
trigger1 = AnimElem = 6
trigger2 = AnimElem = 12
trigger3 = AnimElem = 18
anim = 14210
ID = 4000
postype = p1
bindtime = 4
sprpriority = 5
ownpal = 1
removeongethit = 1

[State 0, Var Damage Value]
type = VarSet
trigger1 = !MoveContact && !MoveReversed
v = 12
value = 62

[State 0, HitDef]
type = HitDef
trigger1 = !MoveContact && !MoveReversed
trigger2 = AnimElem = 9
trigger3 = AnimElem = 12
trigger4 = AnimElem = 15
trigger5 = AnimElem = 18
attr = A,HP
hitflag = MAF
guardflag = MA
animtype = heavy
priority = 5,Hit
damage = Ceil(Var(12) * ((const(BC.Super1MaxDamage)*Parent,FVar(9))+const(BC.Super1MinDamage)) * (0.5 + 1.0 * !MoveHit)),Ceil(216*0.2*const(BC.ChipHeavy))
guardpoints = 0
pausetime = 2,4 + 12 * (AnimElemNo(0)>=18)
guard.pausetime = 2,4
sparkno = 10 + random%4 + 5 * (AnimElemNo(0)>=18)
guard.sparkno = 40
sparkxy = Floor(P2Dist X*0.5) + 8  - random%17,-32+Floor(P2Dist Y*0.5) - random%25
hitsound = 1,3 + (AnimElemNo(0)>=18)
guardsound = 5,1
ground.type = High
ground.slidetime = 16
ground.hittime = 16
guard.hittime = 4
yaccel = 0.51
fall = (AnimElemNo(0)>=18)
ground.velocity = -5 * (AnimElemNo(0)>=18) + P2BodyDist X * 0.1,0
air.velocity = -5 * (AnimElemNo(0)>=18) + P2BodyDist X * 0.05,-1
guard.velocity = 2 * (1-2*(P2Dist X > 0))
p2facing = 1
getpower = 0,0
givepower = floor(Var(12)*Root,Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))
sprpriority = -2
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0

[State 0, ParentVarSet Counter Message]
type = ParentVarSet
triggerall = Var(8) = 1 && Var(10) = 2
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
v = 32
value = 63 + (Var(10) = 2) + (Var(10) = 3) * 10
ignorehitpause = 1
[State 0, TargetState]
type = TargetState
triggerall = Var(8) = 1
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
trigger1 = AnimElemNo(0) >= 18
value = 5350
ignorehitpause = 1

[State 0, VarSet]
type = ParentVarSet
triggerall = Anim = 4210
trigger1 = AnimElem = 5
trigger2 = AnimElem = 11
trigger3 = AnimElem = 17
v = 9
value = 6

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 19 && Anim = 4210
movetype = I

[State 0, ChangeState]
type = ChangeState
trigger1 = MoveType = A
trigger1 = Parent,MoveType = H && Parent,StateNo != [120,160)
value = 4500

[State 0, MapSet]
type = ParentMapSet
trigger1 = !Time
map = "LucxTimer"
value = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = 4210
value = 4090
elem = 7
[State 0, ChangeState]
type = ChangeState
trigger1 = Anim = 4090
trigger2 = Parent,Map(LucyAsmosOn)
value = 4000

;---------------------------------------------------------------------------
; H - Asmos Bell A
[Statedef 4220]
type    = A
movetype= A
physics = N
velset = 0,0
ctrl = 0
sprpriority = -2
anim = 4221

[State 0, Turn]
type = Turn
trigger1 = !Time
trigger1 = Facing != Parent,Facing

[State 0, MapSet]
type = ParentMapSet
trigger1 = 1
map = "AsmosBusy"
value = 1

[State 0, PalFX]
type = PalFX
trigger1 = !Time
time = 31; * 2
add = 24,24,24
sinadd = 24,24,24,3

[State 0, ReversalDef]
type = ReversalDef
trigger1 = AnimElemNo(0) < 5
reversal.attr = SCA,NA,SA,HA,NP,SP,HP
pausetime = 0,8
sparkno = -1
hitsound = -1
p1stateno = 4221
;p2stateno = -1
[State 0, NotHitBy]
type = NotHitBy
trigger1 = AnimElemNo(0) < 5
value = ,NT,ST,HT
time = 666
[State 0, NotHitBy]
type = NotHitBy
trigger1 = AnimElemNo(0) >= 5
value = SCA
time = 1

[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 5
[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 5
movetype = I

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = AnimTime = 0
value = 4090
elem = 7
[State 0, ChangeState]
type = ChangeState
trigger1 = Anim = 4090
value = 4000

;---------------------------------------------------------------------------
; H - Asmos Bell S1
[Statedef 4221]
type    = A
movetype= A
physics = N
velset = 0,0
ctrl = 0

[State 0, MapSet]
type = RootMapSet
trigger1 = 1
map = "SuperPauseTime"
value = 2
ignorehitpause = 1

[State 0, VarSet]
type = ParentVarSet
trigger1 = !Time
v = 5
value = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0 
value = 4000

;---------------------------------------------------------------------------
; H - Asmos Bell S2
[Statedef 4225]
type    = A
movetype= A
physics = N
velset = 0,0
ctrl = 0
sprpriority = -2
anim = 4225 + !Parent,Map(LucyAsmosOn)

[State 0, MapSet]
type = RootMapSet
trigger1 = MoveType = A
trigger2 = NumHelper(4227)
map = "SuperPauseTime"
value = 2
ignorehitpause = 1

[State 0, Offset]
type = Offset
trigger1 = Time < 8
x = -2+random%5
y = -2+random%5

[State 0, VelSet]
type = PosAdd
trigger1 = Parent,Map(LucyAsmosOn); && Parent,StateNo = 2210
x = ParentDist X * 0.9
y = ParentDist Y * 0.9

[State 0, MapSet]
type = ParentMapSet
trigger1 = 1
map = "AsmosBusy"
value = 1;MoveType = A

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 10
trigger1 = !MoveContact
name = "RING, RING"
ID = 4227
stateno = 4227
pos = 0,-44
postype = p1
ownpal = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = -2

[State 0, Snd Hit]
type = PlaySnd
trigger1 = !Time
value = F1,0
[State 0, Snd Hit]
type = PlaySnd
trigger1 = !Time
value = S510,0
[State 0, Snd Swish]
type = PlaySnd
trigger1 = AnimElem = 7
value = F0,4
[State 0, Snd Ding]
type = PlaySnd
trigger1 = AnimElem = 8
value = S2200,0

[State 0, Var Damage Value]
type = VarSet
trigger1 = !MoveContact && !MoveReversed
v = 12
value = 232

[State 0, HitDef]
type = HitDef
trigger1 = !MoveContact && !MoveReversed
attr = A,HA
hitflag = MAF
guardflag = M
animtype = heavy
priority = 5,Hit
damage = Var(12),Ceil(Var(12)*const(BC.ChipMid))
pausetime = 2, 6
sparkno = 15 + random%4
guard.sparkno = 40
sparkxy = -16-Floor(P2Dist X*0.5),-64+Floor(P2Dist Y*0.5)
hitsound = 1,4
guardsound = 5,1
ground.type = Low
ground.slidetime = 16
ground.hittime = 16
guard.hittime = 6
yaccel = 0.51
fall = 1
ground.velocity = -4,-1
air.velocity = -4,-1
p2facing = 1
getpower = floor(Var(12)*Root,Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Root,Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0

[State 0, TargetState]
type = TargetState
triggerall = Var(8) = 1
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
value = 5350
ignorehitpause = 1

[State 0, VarSet]
type = ParentVarSet
trigger1 = Var(8) = 1
v = 9
value = 6
ignorehitpause = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 10
movetype = I

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = 4225
value = 4000
[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = 4226
value = 4090
elem = 7
[State 0, ChangeState]
type = ChangeState
trigger1 = Anim != [4225,4226]
value = 4000

;---------------------------------------------------------------------------
; H - BellWave
[Statedef 4227]
type    = A
movetype= A
physics = N
ctrl = 0
anim = 4227
velset = 16,0
sprpriority = 5

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
flag2 = invisible

[State 0, Explod]
type = Explod
trigger1 = 1;!(Time%2)
anim = 4227
pos = 0,0
postype = p1
sprpriority = 5
ownpal = 1
removeongethit = 1

[State 0, Counter Check Reset]
type = VarSet
trigger1 = !MoveContact
v = 10
value = Root,Var(10) * !Root,Var(51)
ignorehitpause = 1
[State 0, Scaling Reset]
type = VarSet
trigger1 = 1
fv = 9
value = Root,FVar(9)
ignorehitpause = 1

[State 0, Var Damage Value]
type = VarSet
trigger1 = !Time
v = 12
value = 216
ignorehitpause = 1

[State 0, HitDef]
type = HitDef
trigger1 = !MoveContact && !MoveReversed
attr = A,HP
hitflag = MAF
;guardflag = M
animtype = heavy
priority = 6,Hit
damage = Ceil(Var(12) * ((const(BC.Super1MaxDamage)*FVar(9))+const(BC.Super1MinDamage))),Ceil(Var(12)*const(BC.ChipHeavy))
guardpoints = floor((32 + Var(12)) * 0.25)
pausetime = 2, 12
sparkno = 15 + random%4
guard.sparkno = 40
sparkxy = 0,0
hitsound = 1,4
guardsound = 5,1
ground.type = Low
ground.slidetime = 14
ground.hittime = 14
guard.hittime = 8
yaccel = 0.51
fall = 1
ground.velocity = -3,-2
air.velocity = -3,-1
getpower = 0,0
givepower = floor(Var(12)*Root,Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))

[State 0, ParentVarSet Counter Message]
type = RootVarSet
triggerall = Var(8) = 1 && Var(10)
triggerall = NumTarget && MoveHit && HitCount = 1
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
v = 32
value = 63 + (Var(10) = 2) + (Var(10) = 3) * 10
ignorehitpause = 1

[State 0, Var Shake]
type = RootVarSet
triggerall = NumTarget
trigger1 = MoveHit && Var(8) = 1
trigger1 = Target,MoveType = H && (Target,StateNo = [5000,5100))
v = 9
value = 8

[State 0, TargetState]
type = TargetState
triggerall = NumTarget
trigger1 = MoveHit && Var(8) = 1
trigger1 = Target,MoveType = H && (Target,StateNo = [5000,5100))
value = 5350
ignorehitpause = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = FrontEdgeDist < -32
trigger2 = MoveContact && NumTarget

;---------------------------------------------------------------------------
; H - Asmos Slashes
[Statedef 4230]
type    = A
movetype= A
physics = N
velset = 0,0
sprpriority = -5
anim = 4230 + (!Parent,Map(LucyAsmosOn))

[State 0, Turn]
type = Turn
trigger1 = !Time
trigger1 = Facing != Parent,Facing

[State 0, MapSet]
type = ParentMapSet
trigger1 = Time = 4
map = "AsmosBusy"
value = 0
[State 0, MapSet]
type = ParentMapSet
trigger1 = Time = 4
map = "LucyAsmosOn"
value = 1

[State 0, VelAdd]
type = PosAdd
trigger1 = Time
x = (ParentDist X) * (Min(90,Time*2)*0.01)
y = (ParentDist Y - 8) * (Min(90,Time*2)*0.01)

[State 0, Explod NeedleU]
type = Explod
trigger1 = Anim = 4230 && AnimElem = 9
trigger2 = Anim = 4231 && AnimElem = 7
anim = 14230
ID = 4000
pos = 0,0
postype = p1
vel = 0,-24
accel = 0,1
removetime = 16
supermovetime = Parent,Var(54)
sprpriority = -5
shadow = -1
[State 0, Explod NeedleB]
type = Explod
trigger1 = Anim = 4230 && AnimElem = 9
trigger2 = Anim = 4231 && AnimElem = 7
anim = 14231
ID = 4000
pos = 0,0
postype = p1
vel = -32,0
accel = 1,0
removetime = 16
supermovetime = Parent,Var(54)
sprpriority = -5
shadow = -1
[State 0, Explod NeedleF]
type = Explod
trigger1 = Anim = 4230 && AnimElem = 9
trigger2 = Anim = 4231 && AnimElem = 7
anim = 14232
ID = 4000
pos = 0,0
postype = p1
vel = 32,0
accel = -1,0
removetime = 16
supermovetime = Parent,Var(54)
sprpriority = -5
shadow = -1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = Anim != 4232
trigger1 = Parent,StateNo = 2300 && Parent,AnimElemNo(0) >= 13
value = 4232

[State 0, ChangeState]
type = ChangeState
trigger1 = MoveType = A
trigger1 = Parent,MoveType = H && Parent,StateNo != [120,160)
value = 4500

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimElem = 6 && Anim = 4232
value = 4000

;---------------------------------------------------------------------------
; H - Asmos Pain
[Statedef 4500]
type    = A
movetype= H
physics = N
velset = 0,0
ctrl = 0
sprpriority = -3
;anim = 6900

[State 0, ParentVarSet]
type = ParentMapSet
trigger1 = Parent,Map(AsmosBusy)
map = "AsmosBusy"
value = 0

[State 0, Trans]
type = Trans
trigger1 = EnemyNear,Map(Cutscene)
trans = addalpha
alpha = 256 - 16 * min(16,EnemyNear,Map(Cutscene)),16 * min(16,EnemyNear,Map(Cutscene))

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = !Time
id = 4000

[State 0, ChangeAnim]
type = ChangeAnim
triggerall = !Parent,Map(LucyAsmosOn) && RoundState = 2
trigger1 = Anim != 6900 && Parent,MoveType = H && EnemyNear,Var(51)
value = 6900
[State 0, ChangeAnim]
type = ChangeAnim
triggerall = !Parent,Map(LucyAsmosOn) && RoundState = 2
trigger1 = Anim != 6901 && Parent,MoveType = H && !EnemyNear,Var(51)
value = 6901
[State 0, ChangeAnim]
type = ChangeAnim
triggerall = !Parent,Map(LucyAsmosOn)
trigger1 = Anim != 6902 && RoundState > 3
trigger1 = !Root,Win
value = 6902
[State 0, ChangeAnim]
type = ChangeAnim
triggerall = Parent,Map(LucyAsmosOn)
triggerall = SelfAnimExist(Parent,Anim + 1000)
triggerall = Parent,Anim = [5000,6000) || Parent,Anim = [7000,8000)
trigger1 = Anim != Parent,Anim + 1000
trigger2 = Parent,StateNo = 5325 || Parent,StateNo = 5330
value = Parent,Anim + 1000
[State 0, ChangeAnim]
type = ChangeAnim
triggerall = Parent,Map(LucyAsmosOn) && Anim != 666
trigger1 = !SelfAnimExist(Parent,Anim + 1000)
trigger2 = Parent,MoveType = H && Parent,StateNo = [800,3000)
value = 666

[State 0, Turn]
type = Turn
trigger1 = Parent,Map(LucyAsmosOn)
trigger1 = Facing != Parent,Facing
trigger2 = !Parent,Map(LucyAsmosOn)
trigger2 = ParentDist X < 0

[State 0, VelAdd]
type = PosAdd
trigger1 = Parent,Map(LucyAsmosOn)
x = ParentDist X * 0.75 + Parent,Vel X * 0.75
y = ParentDist Y * 0.75 + Parent,Vel Y * 0.75

[State 0, ChangeState]
type = ChangeState
trigger1 = Parent,MoveType != H && Parent,StateNo != [120,160) && Parent,StateNo != [3120,3121]
trigger1 = Parent,StateNo != [5000,6000) || !Parent,Map(LucyAsmosOn) && (Parent,StateNo = 5120 || Parent,StateNo = 5200)
value = 4000

;---------------------------------------------------------------------------
; H - Asmos Hit
[Statedef 4501]
type    = A
movetype= H
physics = N
velset = 0,0
ctrl = 0
sprpriority = -3
anim = 4500

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = Pos Y * 0.5

[State 0, VelAdd]
type = PosAdd
trigger1 = Parent,Map(LucyAsmosOn)
x = ParentDist X * 0.5 + Parent,Vel X * 0.5
y = ParentDist Y * 0.5 + Parent,Vel Y * 0.5

[State 0, PosSet]
type = PosSet
trigger1 = Time > 16
y = 0
[State 0, ChangeState]
type = ChangeState
trigger1 = Time > 16
value = 4000

;---------------------------------------------------------------------------
; H - Asmos Copy
[Statedef 4800]
type    = A
movetype= I
physics = N
velset = 0,0
ctrl = 0
sprpriority = 5
anim = 666

[State 0, VarSet]
type = VarSet
trigger1 = !Time
v = 5
value = Parent,Map(LucxCopy)
[State 0, MapSet]
type = ParentMapSet
trigger1 = !Time
map = "LucxCopy"
value = 0
[State 0, MapSet]
type = ParentMapSet
trigger1 = !Time
map = "AsmosBusy"
value = 1
[State 0, MapSet]
type = ParentMapSet
trigger1 = !Time
map = "LucxTimer"
value = 8

[State 0, PosSet]
type = PosSet
trigger1 = !time
y = 0

[State 0, Explod]
type = Explod
trigger1 = !Time
anim = 4800
ID = 4000
pos = 0,0
postype = p1
sprpriority = 5
ownpal = 1

[State 0, Snd Transform]
type = PlaySnd
trigger1 = !Time
value = S910,0

[State 0, ChangeState]
type = ChangeState
trigger1 = !Time
value = 4810 + Var(5)

;---------------------------------------------------------------------------
; H - Asmos Copy Charged
[Statedef 4801]
type    = A
movetype= I
physics = N
velset = 0,0
ctrl = 0
sprpriority = 5
anim = 4090

[State 0, VarSet]
type = VarSet
trigger1 = !Time
v = 7
value = 1
[State 0, VarSet]
type = VarSet
trigger1 = Time && Var(7) = 1
trigger1 = Parent,command != "holdb"
v = 7
value = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = !Var(7)
trigger1 = Time > 24
value = 666

[State 0, VarSet]
type = VarSet
trigger1 = !Time
v = 5
value = Parent,Map(LucxCopy)
[State 0, MapSet]
type = ParentMapSet
trigger1 = !Time
map = "LucxCopy"
value = 0
[State 0, MapSet]
type = ParentMapSet
trigger1 = !Time
map = "AsmosBusy"
value = 1
[State 0, MapSet]
type = ParentMapSet
trigger1 = 1
map = "LucxTimer"
value = 8

[State 0, Explod]
type = Explod
trigger1 = Anim=666
anim = 4800
ID = 4000
pos = 0,0
postype = p1
sprpriority = 5
ownpal = 1

[State 0, Snd Transform]
type = PlaySnd
trigger1 = Anim=666
value = S910,0

[State 0, ChangeState]
type = ChangeState
trigger1 = Parent,MoveType = H && Parent,StateNo != [120,160)
value = 4500
[State 0, ChangeState]
type = ChangeState
trigger1 = Anim=666
value = 4810 + Var(5)

;---------------------------------------------------------------------------
; H - ACopy AJIT
[Statedef 4811]
type    = A
movetype= A
physics = N
velset = 0,0
ctrl = 0
anim = 4801
facep2 = 1
sprpriority = 2

[State 210, 1]
type = PlaySnd
trigger1 = AnimElem = 4
trigger2 = AnimElem = 8
value = F0, 2

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 3
y = -4.5
[State 0, VelSet]
type = VelSet
trigger1 = AnimElemNo(0) = 3
x = 4
[State 0, VelMul]
type = VelMul
trigger1 = Time <= 16
y = 0.80
[State 0, VelMul]
type = VelMul
trigger1 = AnimElemNo(0) >= 9
x = 0.975
[State 0, VelAdd]
type = VelAdd
trigger1 = AnimElemNo(0) >= 9
y = 0.4

[State 0, Snd Voice]
type = PlaySnd
trigger1 = AnimElem = 2
value = S4801,random%2
channel = 0

[State 0, Var Damage Value]
type = VarSet
trigger1 = !Time
v = 12
value = 60

[State 0, HitDef 1st 2nd]
type = HitDef
trigger1 = AnimElem = 5
trigger2 = AnimElem = 9
attr = S,SP
hitflag = MAF
guardflag = MA
animtype = heavy
priority = 4,Hit
damage = Ceil(Var(12) * FVar(10)),Ceil(Var(12)*const(BC.ChipLight))
guardpoints = floor((32 + Var(12)) * 0.5)
pausetime = 8, 8
sparkno = ifelse((Var(10)=2||Parent,Var(11)>1)&&AnimElemNo(0)>=9,30,10 + random%4)
guard.sparkno = 40
sparkxy = -40+Floor(P2Dist X*0.5),-40+Floor(P2Dist Y*0.5)
hitsound = 1,2
guardsound = 5,1
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
guard.hittime = 14
yaccel = 0.5
air.fall = 1
ground.velocity = -6.5,0
air.velocity = -3,-4
p2facing = 1
forcestand = 1
getpower = floor(Var(12)*Root,Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Root,Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))

[State 0, Var Dire Counter Stack On]
type = ParentVarSet
triggerall = Var(8) = 1 && Var(10) = 2
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
v = 11
value = 3
ignorehitpause = 1
[State 0, ParentVarSet Counter Message]
type = ParentVarSet
triggerall = Var(8) = 1 && Var(10) = 2
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
v = 32
value = 63 + (Var(10) = 2) + (Var(10) = 3) * 10
ignorehitpause = 1
[State 0, TargetState]
type = TargetState
triggerall = Var(8) = 1 && (Var(10) = 2 || Parent,Var(11) > 1)
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
trigger1 = AnimElemNo(0) >= 9
value = 5330
ignorehitpause = 1
[State 0, Map Dire Trigger]
type = RootMapSet
triggerall = Var(8) = 1 && (Var(10) = 2 || Parent,Var(11) > 1)
triggerall = NumTarget && MoveHit
trigger1 = Target,MoveType = H
trigger1 = AnimElemNo(0) >= 9
map = "DireAct"
value = Root,Var(11) - 1
ignorehitpause = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 10
movetype = I

[State 0, ChangeState]
type = ChangeState
trigger1 = Time >= 16
trigger1 = Pos Y + Vel Y > 0
value = 4890

;---------------------------------------------------------------------------
; H - ACopy TSUG
[Statedef 4812]
type    = A
movetype= A
physics = N
velset = 0,0
anim = 4802
facep2 = 1
ctrl = 0
sprpriority = 2

[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 4
trigger2 = AnimElem = 5
x = 8
[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 13
trigger2 = AnimElem = 14
x = -8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
trigger2 = AnimElem = 6
trigger3 = AnimElem = 8
trigger4 = AnimElem = 10
value = F0,1
channel = 1

[State 0, Snd Voice]
type = PlaySnd
trigger1 = AnimElem = 2
value = S4802,random%2
channel = 0

[State 0, Explod FX1]
type = Explod
trigger1 = AnimElem = 6
trigger2 = AnimElem = 8
trigger3 = AnimElem = 10
trigger1 = AnimElem = 12
anim = 4800 + floor(animelemno(0)*0.5)
id = 3000
pos = -16,0
postype = p1
bindtime = 666
sprpriority = 4
removeongethit = 1

[State 0, Var Damage Value]
type = VarSet
trigger1 = !Time
v = 12
value = 29

[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 5
trigger2 = AnimElem = 7
trigger3 = AnimElem = 9
trigger4 = AnimElem = 11
attr = S,SP
hitflag = MAF
guardflag = M
animtype = heavy
priority = 4,Hit
damage = Ceil(1 + Var(12) * FVar(10) * (0.75 + 1.25 * (!MoveHit))),Ceil(Var(12)*const(BC.ChipLight))
guardpoints = floor((16 + Var(12)) * 0.33)
pausetime = 4,12+Root,Var(13)
guard.pausetime = 4,4
sparkno = ifelse((Var(10)=2||Parent,Var(11)>1)&&AnimElemNo(0)>=10,30,10 + random%4)
guard.sparkno = 40
sparkxy = -24+Floor(P2Dist X*0.5)-random%16,-44+Floor(P2Dist Y*0.5)-random%16
hitsound = 1,2
guardsound = 5,1
ground.type = Low
ground.slidetime = 12
ground.hittime = 12
guard.hittime = 12
yaccel = 0.5
air.fall = 1
ground.velocity = -0.5,0
air.velocity = -1,-1
p2facing = 1
getpower = floor(Var(12)*Root,Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Root,Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))
ground.cornerpush.veloff = ifelse(AnimElemNo(0) >= 10,-5,0)
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = ifelse(AnimElemNo(0) >= 10,-5,0)

[State 0, Var Dire Counter Stack On]
type = ParentVarSet
triggerall = Var(8) = 1 && Var(10) = 2
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
v = 11
value = 3
ignorehitpause = 1
[State 0, ParentVarSet Counter Message]
type = ParentVarSet
triggerall = Var(8) = 1 && Var(10) = 2
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
v = 32
value = 63 + (Var(10) = 2) + (Var(10) = 3) * 10
ignorehitpause = 1
[State 0, TargetState]
type = TargetState
triggerall = Var(8) = 1 && (Var(10) = 2 || Parent,Var(11) > 1)
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
trigger1 = AnimElemNo(0) >= 10
value = 5325
ignorehitpause = 1
[State 0, Map Dire Trigger]
type = RootMapSet
triggerall = Var(8) = 1 && (Var(10) = 2 || Parent,Var(11) > 1)
triggerall = NumTarget && MoveHit
trigger1 = Target,MoveType = H
trigger1 = AnimElemNo(0) >= 10
map = "DireAct"
value = Root,Var(11) - 1
ignorehitpause = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 12
movetype = I

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 4890

;---------------------------------------------------------------------------
; H - ACopy SHER
[Statedef 4813]
type    = A
movetype= A
physics = N
velset = 0,0
anim = 4807
facep2 = 1
ctrl = 0
sprpriority = 2

[State 210, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = F0, 1
[State 210, 1]
type = PlaySnd
trigger1 = AnimElem = 7
value = F0, 3

[State 0, Snd Voice]
type = PlaySnd
trigger1 = AnimElem = 8
value = S4803,random%6
channel = 0

[State 0, PosSet]
type = PosSet
trigger1 = AnimElem = 10
y = 0
[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 10
x = 0
y = 0

[State 0, VelSet]
type = VelSet
trigger1 = Time = 4
x = 4
y = -5

[State 0, VelAdd]
type = VelAdd
trigger1 = Time > 4
y = 0.425

[State 0, Explod]
type = Explod
trigger1 = AnimElemNo(0) = [7,8]
anim = 4808 + (AnimElemNo(-(Var(8)!=0))-7)
postype = p1
bindtime = 666
removetime = 1
sprpriority = 3
ownpal = 1
removeongethit = 1
ignorehitpause = 1
[State 0, Explod]
type = Explod
trigger1 = AnimElem = 9
anim = 4810
postype = p1
vel = 3,3
sprpriority = 3
ownpal = 1
ignorehitpause = 1

[State 0, Var Damage Value]
type = VarSet
trigger1 = AnimElem = 3
trigger2 = AnimElem = 8
v = 12
value = 48 + 32 * !(MoveHit)

[State 0, HitDef]
type = HitDef
trigger1 = !MoveContact && !MoveReversed
trigger1 = AnimElemNo(0) = 3
attr = A,SP
hitflag = MAF
guardflag = MA
animtype = heavy
priority = 4,Hit
damage = Ceil(Var(12) * FVar(10)),Ceil(Var(12)*const(BC.ChipLight))
guardpoints = floor((32 + Var(12)) * 0.5)
pausetime = 12,12+Root,Var(13)
guard.pausetime = 12,12
sparkno = 10 + random%4 + (Var(10)=1) * 5
guard.sparkno = 40
sparkxy = -40+Floor(P2Dist X*0.5),-56+Floor(P2Dist Y*0.5)
hitsound = 1,2
guardsound = 5,0
ground.type = High
ground.slidetime = 16
ground.hittime = 16
guard.hittime = 8
yaccel = 0.5
fall = 1
ground.velocity = -3.5,-6
air.velocity = -3.5,-5
p2facing = 1
getpower = floor(Var(12)*Root,Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Root,Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))
[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 8
attr = A,SP
hitflag = MAF
guardflag = MA
animtype = heavy
priority = 4,Hit
damage = Ceil(Var(12) * FVar(10)),Ceil(Var(12)*const(BC.ChipLight))
guardpoints = floor((32 + Var(12)) * 0.5)
pausetime = 12,12+Root,Var(13)
guard.pausetime = 12,12
sparkno = ifelse(Var(10)=2||parent,Var(11)>=2,30,10 + random%4 + (Var(10)=1) * 5)
guard.sparkno = 40
sparkxy = -40+Floor(P2Dist X*0.5),-56+Floor(P2Dist Y*0.5)
hitsound = 1,3
guardsound = 5,0
ground.type = High
ground.slidetime = 17
ground.hittime = 17
guard.hittime = 9
yaccel = 0.5
air.fall = 1
ground.velocity = -4,0
air.velocity = -4,8
fall.yvelocity = -1.00 + EnemyNear,Pos Y * 0.025
p2facing = 1
getpower = floor(Var(12)*Root,Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Root,Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))

[State 0, Dampening S]
type = ParentVarSet
triggerall = Var(8) = 1 && HitCount = 1
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
fv = 8
value = Parent,FVar(8)*(const(BC.ScalingH1) + const(BC.ScalingH2) * ifelse(Parent,FVar(8)<1,1-Parent,FVar(8),0))
ignorehitpause = 1

[State 0, VarAdd]
type = ParentVarAdd
trigger1 = Var(8) = 1 && MoveHit && NumTarget
v = 51
value = 1
ignorehitpause = 1

[State 0, Var Dire Counter Stack On]
type = ParentVarSet
triggerall = Var(8) = 1 && Var(10) = 2
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
v = 11
value = 3
ignorehitpause = 1
[State 0, ParentVarSet Counter Message]
type = ParentVarSet
triggerall = Var(8) = 1 && Var(10) = 2
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
v = 32
value = 63 + (Var(10) = 2) + (Var(10) = 3) * 10
ignorehitpause = 1
[State 0, TargetState]
type = TargetState
triggerall = Var(8) = 1
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
trigger1 = AnimElemNo(0) >= 8
trigger1 = EnemyNear,StateType = A || Var(10)=2 || Parent,Var(11)>1
value = ifelse(Var(10)=2||Parent,Var(11)>1,5345,5355)
ignorehitpause = 1
[State 0, Map Dire Trigger]
type = RootMapSet
triggerall = Var(8) = 1 && (Var(10) = 2 || Parent,Var(11) > 1)
triggerall = NumTarget && MoveHit
trigger1 = Target,MoveType = H
trigger1 = AnimElemNo(0) >= 8
map = "DireAct"
value = Root,Var(11) - 1
ignorehitpause = 1

[State 1000, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 4890

;---------------------------------------------------------------------------
; H - ACopy WALL
[Statedef 4814]
type    = A
movetype= A
physics = N
ctrl = 0
facep2 = 1
sprpriority = 2
movehitpersist = 1

[State 0, VarSet]
type = VarSet
trigger1 = !Time
v = 2
value = StateNo
[State 0, HitOverride]
type = HitOverride
trigger1 = AnimElemNo(0) = [1,5]
attr = SCA,NA,SA,NP,SP
slot = 1
stateno = 999
time = 1
ignorehitpause = 1
[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = !Time
trigger1 = Anim != 4811
value = 4811

[State 210, 1]
type = PlaySnd
trigger1 = AnimElem = 4
value = F0, 3
[State 0, Snd Voice]
type = PlaySnd
trigger1 = AnimElem = 4
value = S4804,random%5
channel = 0

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 1
x = 0
y = 0
[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 4
x = 5
[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 5
x = 10
[State 0, VelMul]
type = VelMul
trigger1 = AnimElem = 6
x = 0.5
[State 0, VelMul]
type = VelMul
trigger1 = AnimElemNo(0) >= 6
x = 0.875

[State 0, Explod]
type = Explod
trigger1 = AnimElem = 4,2
anim = 4812
id = 3000
pos = 0,0
postype = p1
bindtime = 666
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 0, Var Damage Value]
type = VarSet
trigger1 = !MoveContact && !MoveReversed
v = 12
value = 136

[State 0, HitDef]
type = HitDef
trigger1 = !MoveContact && !MoveReversed
attr = S,SP
hitflag = MAF
guardflag = M
animtype = heavy
priority = 4,Hit
damage = Ceil(Var(12) * FVar(10)),Ceil(Var(12)*const(BC.ChipLight))
guardpoints = floor((32 + Var(12)) * 0.5)
pausetime = 12,12+Root,Var(13)
guard.pausetime = 12,12
sparkno = ifelse(Var(10)=2||Parent,Var(11)>=2,30,10 + random%4 + (Var(10)=1) * 5)
guard.sparkno = 40
sparkxy = -40+Floor(P2Dist X*0.5),-48+Floor(P2Dist Y*0.5)
hitsound = 1,4
guardsound = 5,1
ground.type = Low
ground.slidetime = 23
ground.hittime = 23
guard.hittime = 8
yaccel = 0.5
fall = 1
ground.velocity = -5,-3
air.velocity = -5,-2
p2facing = 1
getpower = floor(Var(12)*Root,Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Root,Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))

[State 0, Var Dire Counter Stack On]
type = ParentVarSet
triggerall = Var(8) = 1 && Var(10) = 2
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
v = 11
value = 3
ignorehitpause = 1
[State 0, ParentVarSet Counter Message]
type = ParentVarSet
triggerall = Var(8) = 1 && Var(10) = 2
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
v = 32
value = 63 + (Var(10) = 2) + (Var(10) = 3) * 10
ignorehitpause = 1
[State 0, TargetState]
type = TargetState
triggerall = NumTarget
trigger1 = MoveHit && Var(8) = 1
trigger1 = Target,MoveType = H && (Target,StateNo = [5000,5100))
value = ifelse(Var(10)=2||Parent,Var(11)>=2,5340,5350)
ignorehitpause = 1
[State 0, Map Dire Trigger]
type = RootMapSet
triggerall = Var(8) = 1 && (Var(10) = 2 || Parent,Var(11) > 1)
triggerall = NumTarget && MoveHit
trigger1 = Target,MoveType = H
map = "DireAct"
value = Root,Var(11) - 1
ignorehitpause = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 6
movetype = I

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 4890

;---------------------------------------------------------------------------
; H - ACopy REAP
[Statedef 4815]
type    = A
movetype= A
physics = N
velset = 0,0
anim = 4813
facep2 = 1
ctrl = 0
sprpriority = 2

[State 210, 1]
type = PlaySnd
trigger1 = AnimElem = 6
value = S4805,4
[State 0, Snd Voice]
type = PlaySnd
trigger1 = AnimElem = 2
value = S4805,random%4
channel = 0

[State 0, Explod Laser]
type = Explod
triggerall = Var(5)
trigger1 = AnimElemNo(0) = [5,7]
anim = 4814 + floor((GameTime%6)*0.5)
ID = 3000
pos = 28 - 6 * Var(6),-66 - 20 * Var(6)
postype = p1
scale = 50,1
sprpriority = 1
ownpal = 1
angle = 45 * Var(6)
ignorehitpause = 1

[State 0, Explod Laser]
type = Explod
trigger1 = AnimElem = 8
anim = 4817
pos = 28,-66
postype = p1
scale = 50,1
vel = 32,0
accel = -2.25,0
sprpriority = 1
ownpal = 1
ignorehitpause = 1

[State 0, Var Damage Value]
type = VarSet
trigger1 = 1
v = 12
value = 60 / (1 + !!MoveContact)

[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 5
trigger2 = AnimElem = 6
attr = S,SP
hitflag = MAF
guardflag = M
animtype = medium
priority = 9,Hit
damage = Ceil(Var(12) * FVar(10)),Ceil(Var(12)*const(BC.ChipLight))
guardpoints = floor((16 + Var(12)) * 0.5)
pausetime = 2,8
sparkno = 10 + random%4 + (Var(10)=1) * 5
guard.sparkno = 40
sparkxy = -16,-56+Floor(P2Dist Y*0.5)
hitsound = 1,6
guardsound = 5,1
ground.type = Low
ground.slidetime = 17
ground.hittime = 17
guard.hittime = 15 + Var(5)*-5
yaccel = 0.5
air.fall = 1
ground.velocity = -5,0
air.velocity = -4,-2
p2facing = 1
getpower = floor(Var(12)*Root,Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Root,Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))
[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 7
attr = S,SP
hitflag = MAF
guardflag = M
animtype = medium
priority = 9,Hit
damage = Ceil(Var(12) * FVar(10)),Ceil(Var(12)*const(BC.ChipLight))
guardpoints = floor((16 + Var(12)) * 0.5)
pausetime = 2,8
sparkno = ifelse(Var(10)=2||Parent,Var(11)>=2,30,10 + random%4 + (Var(10)=1) * 5)
guard.sparkno = 40
sparkxy = -16,-56+Floor(P2Dist Y*0.5)
hitsound = 1,6
guardsound = 5,1
ground.type = Low
ground.slidetime = 17
ground.hittime = 17
guard.hittime = 15 + Var(5)*-5
yaccel = 0.5
air.fall = 1
ground.velocity = -5,0
air.velocity = -4,-2
p2facing = 1
getpower = floor(Var(12)*Root,Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Root,Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))

[State 0, Var Dire Counter Stack On]
type = ParentVarSet
triggerall = Var(8) = 1 && Var(10) = 2
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
v = 11
value = 3
ignorehitpause = 1
[State 0, ParentVarSet Counter Message]
type = ParentVarSet
triggerall = Var(8) = 1 && Var(10) = 2
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
v = 32
value = 63 + (Var(10) = 2) + (Var(10) = 3) * 10
ignorehitpause = 1
[State 0, TargetState]
type = TargetState
triggerall = Var(8) = 1 && (Var(10) = 2 || Parent,Var(11) > 1)
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
trigger1 = AnimElemNo(0) >= 7
value = 5340
ignorehitpause = 1
[State 0, Map Dire Trigger]
type = RootMapSet
triggerall = Var(8) = 1 && (Var(10) = 2 || Parent,Var(11) > 1)
triggerall = NumTarget && MoveHit
trigger1 = Target,MoveType = H
trigger1 = AnimElemNo(0) >= 7
map = "DireAct"
value = Root,Var(11) - 1
ignorehitpause = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 8
movetype = I

[State 1000, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 4890

;---------------------------------------------------------------------------
; H - ACopy JUST
[Statedef 4816]
type    = A
movetype= A
physics = N
velset = 0,0
anim = 4819
facep2 = 1
ctrl = 0
sprpriority = 2

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = AnimElem = 6
trigger1 = Time < 16
value = anim
elem = 4
[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = AnimElemNo(0) = [4,6]
trigger1 = MoveContact = 1
value = anim
elem = 6
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = AnimElemNo(0) = [3,4]
x = 7
[State 0, VelSet]
type = VelSet
trigger1 = AnimElemNo(0) = 6
trigger1 = MoveHit = 1
x = 16
[State 0, VelMul]
type = VelMul
trigger1 = AnimElemNo(0) >= 6
x = 0.75

[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 10
trigger2 = AnimElem = 11
x = -8

[State 0, Snd Voice]
type = PlaySnd
trigger1 = AnimElem = 2
value = S4806,random%5
channel = 0

[State 0, Map Dash FX]
type = MapSet
trigger1 = AnimElem = 3
map = "DashDustFX"
value = 1

[State 0, Explod OL]
type = Explod
trigger1 = AnimElemNo(0) = 6 
anim = 4820
pos = 0,0
postype = p1
bindtime = 666
sprpriority = 5
removeongethit = 1
ignorehitpause = 1
[State 0, Explod Sparx 1]
type = Explod
trigger1 = AnimElemNo(0) = 3
anim = 4821
pos = 0,0
postype = p1
bindtime = 666
removetime = 1
ownpal = 1
removeongethit = 1
ignorehitpause = 1
[State 0, Explod Sparx 2]
type = Explod
trigger1 = AnimElemNo(0) = [4,6]
anim = 4822 + floor(0.5 * (GameTime%6))
pos = 0,0
postype = p1
bindtime = 666
removetime = 1
ownpal = 1
removeongethit = 1
ignorehitpause = 1
[State 0, Explod Sparx 3]
type = Explod
trigger1 = AnimElem = 7
anim = 4826
pos = 0,0
postype = p1
bindtime = 666
removetime = -2
ownpal = 1
removeongethit = 1
ignorehitpause = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = AnimElemNo(0) = 6
value = -1
ignorehitpause = 1

[State 0, Var Damage Value]
type = VarSet
trigger1 = !Time
v = 12
value = 136
[State 0, Var Damage Value]
type = VarSet
trigger1 = AnimElem = 7
v = 12
value = 128

[State 0, HitDef]
type = HitDef
triggerall = AnimElemNo(0) = [4,5]
trigger1 = !MoveContact && !MoveReversed
attr = S,SP
hitflag = MAF
guardflag = M
animtype = heavy
priority = 1,Miss
damage = Ceil(Var(12) * FVar(10)),Ceil(Var(12)*const(BC.ChipLight))
guardpoints = floor((32 + Var(12)) * 0.5)
pausetime = 12,12+Root,Var(13)
guard.pausetime = 12,12
sparkno = ifelse(Var(10)=2||parent,Var(11)>=2,30,10 + random%4 + (Var(10)=1) * 5)
guard.sparkno = var(19)
sparkxy = -16+Floor(P2Dist X),-48+Floor(P2Dist Y*0.5)
hitsound = 1,3
guardsound = 5,0
ground.type = High
ground.slidetime = 24
ground.hittime = 24
guard.hittime = 24
yaccel = 0.5
fall = 1
ground.velocity = 3 - 2 * (Var(10)=2||Var(11)>1),-9 * (Var(10)=2||Var(11)>1)
air.velocity = 3 - 2 * (Var(10)=2||Var(11)>1),-9 * (Var(10)=2||Var(11)>1)
guard.velocity = -4
p2facing = 1
getpower = floor(Var(12)*Root,Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Root,Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))
[State 0, HitDef]
type = HitDef
triggerall = AnimElemNo(0) = 7
trigger1 = !MoveContact && !MoveReversed
attr = S,SP
hitflag = MAF
guardflag = M
animtype = heavy
priority = 3,Hit
damage = Ceil(Var(12) * FVar(10)),Ceil(Var(12)*const(BC.ChipLight))
guardpoints = floor((32 + Var(12)) * 0.5)
pausetime = 12,12+Root,Var(13)
guard.pausetime = 12,12
sparkno = ifelse(Var(10)=2||parent,Var(11)>=2,30,10 + random%4 + (Var(10)=1) * 5)
guard.sparkno = var(19)
sparkxy = -24+Floor(P2Dist X*0.5),-48+Floor(P2Dist Y*0.5)
hitsound = 1,2
guardsound = 5,0
ground.type = High
ground.slidetime = 20
ground.hittime = 20
guard.hittime = 20
yaccel = 0.5
air.fall = 1
ground.velocity = -4,0
air.velocity = -1,-3
p2facing = 1
getpower = floor(Var(12)*Root,Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Root,Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))

[State 0, Var Dire Counter Stack On]
type = ParentVarSet
triggerall = Var(8) = 1 && Var(10) = 2
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
v = 11
value = 3
ignorehitpause = 1
[State 0, ParentVarSet Counter Message]
type = ParentVarSet
triggerall = Var(8) = 1 && Var(10) = 2
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
v = 32
value = 63 + (Var(10) = 2) + (Var(10) = 3) * 10
ignorehitpause = 1
[State 0, TargetState]
type = TargetState
triggerall = NumTarget
trigger1 = MoveHit && Var(8) = 1
trigger1 = Target,MoveType = H && (Target,StateNo = [5000,5100))
trigger1 = AnimElemNo(0) < 7 || Var(10) = 2 || Var(11) >= 2
value = ifelse(Var(10) = 2 || Parent,Var(11) >= 2,ifelse(AnimElemNo(0)<7,5400,5320),5355)
ignorehitpause = 1
[State 0, Map Dire Trigger]
type = RootMapSet
triggerall = Var(8) = 1 && (Var(10) = 2 || Parent,Var(11) > 1)
triggerall = NumTarget && MoveHit
trigger1 = Target,MoveType = H
map = "DireAct"
value = Root,Var(11) - 1
ignorehitpause = 1

[State 0, TargetBind]
type = TargetBind
trigger1 = Var(8) = 1
trigger1 = !MoveReversed
trigger1 = !MoveGuarded
trigger1 = AnimElemNo(0) = 6
time = 1
pos = 0,-8
ignorehitpause = 1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = MoveHit
value = 0
ignorehitpause = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 8
movetype = I

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 4890

;---------------------------------------------------------------------------
; H - ACopy IKUE
[Statedef 4817]
type    = A
movetype= A
physics = N
velset = 0,0
ctrl = 0
anim = 4827
facep2 = 1
sprpriority = 2

[State 210, 1]
type = PlaySnd
trigger1 = AnimElem = 7
value = F0, 8
[State 0, Snd Voice]
type = PlaySnd
trigger1 = AnimElem = 2
value = S4807,random%6
channel = 0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = Time < 20
value = ,NA,SA,NP,SP,NT,ST
time = 3

[State 0, Explod]
type = Explod
trigger1 = AnimElemNo(0) = [7,11]
anim = 4821 + AnimElemNo(-(Var(8)!=0)) - (AnimElemNo(-(Var(8)!=0)) >= 10) 
id = 3000
postype = p1
bindtime = 666
pausemovetime = 2
sprpriority = 3
ownpal = 1
removeongethit = 1
ignorehitpause = 1
[State 0, Explod]
type = Explod
trigger1 = AnimElem = 12
anim = 4832
id = 3000
postype = p1
bindtime = 666
pausemovetime = 666
sprpriority = 3
ownpal = 1
removeongethit = 1

[State 0, Var Damage Value]
type = VarSet
trigger1 = 1
v = 12
value = 80 - (MoveHit!=0) * 40

[State 0, HitDef]
type = HitDef
trigger1 = !MoveContact && !MoveReversed
trigger2 = AnimElem = 8
trigger3 = AnimElem = 9
attr = S,SP
hitflag = MAF
guardflag = M
animtype = heavy
priority = 3,Hit
damage = Ceil(Var(12) * FVar(10)),Ceil(160*0.33*const(BC.ChipLight))
guardpoints = floor((32 + Var(12)) * 0.5)
pausetime = 12,12+Root,Var(13)
guard.pausetime = 12,12
sparkno = ifelse(AnimElemNo(0)>=9&&(Var(10)=2||Parent,Var(11)>=2),30,25+random%4)
guard.sparkno = 40
sparkxy = -40+Floor(P2Dist X*0.5),-56+Floor(P2Dist Y*0.5)
hitsound = 1,7
guardsound = 5,1
ground.type = Low
ground.slidetime = 32
ground.hittime = 32
guard.hittime = 24
yaccel = 0.5
fall = 1
ground.velocity = 1,-9
air.velocity = -2,-8
guard.velocity = -4
p2facing = 1
getpower = floor(Var(12)*Root,Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Root,Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))

[State 0, Var Dire Counter Stack On]
type = ParentVarSet
triggerall = Var(8) = 1 && Var(10) = 2
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
v = 11
value = 3
ignorehitpause = 1
[State 0, ParentVarSet Counter Message]
type = ParentVarSet
triggerall = Var(8) = 1 && Var(10) = 2
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
v = 32
value = 63 + (Var(10) = 2) + (Var(10) = 3) * 10
ignorehitpause = 1
[State 0, TargetState]
type = TargetState
triggerall = Var(8) = 1 && (Var(10) = 2 || Parent,Var(11) > 1)
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
trigger1 = AnimElemNo(0) >= 9
value = 5335
ignorehitpause = 1
[State 0, Map Dire Trigger]
type = RootMapSet
triggerall = Var(8) = 1 && (Var(10) = 2 || Parent,Var(11) > 1)
triggerall = NumTarget && MoveHit
trigger1 = Target,MoveType = H
trigger1 = AnimElemNo(0) >= 9
map = "DireAct"
value = Root,Var(11) - 1
ignorehitpause = 1

[State 0, VelSet]
type = VelAdd
trigger1 = AnimElemNo(0) = 2
trigger2 = AnimElemNo(0) = [3,5]
x = 0.025 * Time
[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 7
x = 8
[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 8
y = -9
[State 0, VelAdd]
type = VelAdd
trigger1 = AnimElemNo(0) >= 8
y = 0.5
[State 0, VelMul]
type = VelMul
trigger1 = AnimElemNo(0) >= 8
x = 0.9

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 10
movetype = I

[State 1000, 7]
type = ChangeState
trigger1 = Pos Y + Vel Y >= 0
trigger1 = AnimElemNo(0) >= 9
value = 4890

;---------------------------------------------------------------------------
; H - ACopy BOUN
[Statedef 4818]
type    = A
movetype= A
physics = N
ctrl = 0
anim = 4833
facep2 = 1
velset = 0,0
sprpriority = 2

[State 440, 2]
type = PlaySnd
trigger1 = AnimElem = 9
value = F0, 3
[State 0, Snd Teleport]
type = PlaySnd
trigger1 = Time = 1
value = S4808,4
[State 0, Snd Voice]
type = PlaySnd
trigger1 = AnimElem = 2
value = S4808,random%4
channel = 0

[State 0, Explod]
type = Explod
trigger1 = Time = 1
anim = 4834
pos = 0,-52
postype = p1
bindtime = 2
sprpriority = -5
ownpal = 1
removeongethit = 1

[State 0, PosSet]
type = PosAdd
trigger1 = Time = 1
x = P2Dist X
y = -Pos Y - 96

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 9
y = 10
[State 0, VelAdd]
type = VelAdd
trigger1 = AnimElemNo(0) >= 9
y = 1

[State 0, Var Damage Value]
type = VarSet
trigger1 = !MoveContact && !MoveReversed
v = 12
value = 112

[State 0, HitDef]
type = HitDef
trigger1 = !MoveContact && !MoveReversed
attr = A,SP
hitflag = MAF
guardflag = M
animtype = heavy
priority = 3,Hit
damage = Ceil(Var(12) * FVar(10)),Ceil(Var(12)*const(BC.ChipLight))
guardpoints = floor((32 + Var(12)) * 0.5)
pausetime = 12,12+Root,Var(13)
guard.pausetime = 12,12
sparkno = ifelse(Var(10)=2||Parent,Var(11)>=2,30,10 + random%4 + (Var(10)=1) * 5)
guard.sparkno = var(19)
sparkxy = -40+Floor(P2Dist X*0.5),-16+Floor(P2Dist Y*0.5)
hitsound = 1,3
guardsound = 5,0
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
guard.hittime = 8
air.fall = 1
yaccel = 0.5
ground.velocity = -2,0
air.velocity = -2,-3
p2facing = 1
getpower = floor(Var(12)*Root,Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Root,Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))

[State 0, Var Dire Counter Stack On]
type = ParentVarSet
triggerall = Var(8) = 1 && Var(10) = 2
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
v = 11
value = 3
ignorehitpause = 1
[State 0, ParentVarSet Counter Message]
type = ParentVarSet
triggerall = Var(8) = 1 && Var(10) = 2
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
v = 32
value = 63 + (Var(10) = 2) + (Var(10) = 3) * 10
ignorehitpause = 1
[State 0, TargetState]
type = TargetState
triggerall = NumTarget
trigger1 = MoveHit && Var(8) = 1
trigger1 = Target,MoveType = H && (Target,StateNo = [5000,5100))
trigger1 = Var(10) = 2 || Parent,Var(11) >= 2 || EnemyNear,StateType = A
value = ifelse(Var(10)=2||Parent,Var(11)>=2,5345,5355)
ignorehitpause = 1
[State 0, Map Dire Trigger]
type = RootMapSet
triggerall = Var(8) = 1 && (Var(10) = 2 || Parent,Var(11) > 1)
triggerall = NumTarget && MoveHit
trigger1 = Target,MoveType = H
map = "DireAct"
value = Root,Var(11) - 1
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = Time > 4
trigger1 = Pos Y + Vel Y >= 8
value = 4890

;---------------------------------------------------------------------------
; H - ACopy BAXT
[Statedef 4819]
type    = A
movetype= A
physics = S
velset = 0,0
anim = 4835
facep2 = 1
ctrl = 0
sprpriority = 2

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 2
x = 4
y = -4
[State 0, VelAdd]
type = VelAdd
trigger1 = AnimElemNo(0) >= 2
y = 0.25
[State 0, VelMul]
type = VelSet
trigger1 = AnimElem = 10
x = 1

[State 0, Snd Jump]
type = PlaySnd
trigger1 = !Time
value = S4809,4
[State 0, Snd Swing]
type = PlaySnd
trigger1 = AnimElem = 9
value = F0,8
[State 0, Snd Voice]
type = PlaySnd
trigger1 = AnimElem = 2
value = S4809,random%4
channel = 0

[State 0, Explod]
type = Explod
trigger1 = AnimElemNo(0) = [10,14]
anim = 4836 + (AnimElemNo(0)-10)
ID = 3000
postype = p1
sprpriority = 4
ownpal = 1
removeongethit = 1
ignorehitpause = 1

[State 0, Var Damage Value]
type = VarSet
trigger1 = !MoveContact && !MoveReversed
v = 12
value = 128

[State 0, HitDef]
type = HitDef
trigger1 = !MoveContact && !MoveReversed
attr = A,SP
hitflag = MAF
guardflag = M
animtype = heavy
priority = 3,Hit
damage = Ceil(Var(12) * FVar(10)),Ceil(Var(12)*const(BC.ChipLight))
guardpoints = floor((32 + Var(12)) * 0.5)
pausetime = 12,12+Root,Var(13)
guard.pausetime = 12,12
sparkno = ifelse(Var(10)=2||Parent,Var(11)>=2,30,15 + random%4)
guard.sparkno = 40
sparkxy = -40+Floor(P2Dist X*0.5),-56+Floor(P2Dist Y*0.5)
hitsound = 1,3
guardsound = 5,1
ground.type = Low
ground.slidetime = 24
ground.hittime = 24
guard.hittime = 14
yaccel = 0.5
fall = 1
ground.velocity = -2,4
air.velocity = -2,4
guard.velocity = -4
fall.yvelocity = -4.5
p2facing = 1
getpower = floor(Var(12)*Root,Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Root,Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))

[State 0, Var Dire Counter Stack On]
type = ParentVarSet
triggerall = Var(8) = 1 && Var(10) = 2
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
v = 11
value = 3
ignorehitpause = 1
[State 0, ParentVarSet Counter Message]
type = ParentVarSet
triggerall = Var(8) = 1 && Var(10) = 2
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
v = 32
value = 63 + (Var(10) = 2) + (Var(10) = 3) * 10
ignorehitpause = 1
[State 0, TargetState]
type = TargetState
triggerall = NumTarget
trigger1 = MoveHit && Var(8) = 1
trigger1 = Target,MoveType = H && (Target,StateNo = [5000,5100))
;trigger1 = Var(10) = 2 || Parent,Var(11) >= 2 || EnemyNear,StateType = A
value = ifelse(Var(10)=2||Parent,Var(11)>=2,5345,5355)
ignorehitpause = 1
[State 0, Map Dire Trigger]
type = RootMapSet
triggerall = Var(8) = 1 && (Var(10) = 2 || Parent,Var(11) > 1)
triggerall = NumTarget && MoveHit
trigger1 = Target,MoveType = H
map = "DireAct"
value = Root,Var(11) - 1
ignorehitpause = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 2
statetype = A
movetype = A
physics = N
[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 13
movetype = I

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
trigger2 = Pos Y + Vel Y > 0 && Time > 4
value = 4890

;---------------------------------------------------------------------------
; H - ACopy TERI
[Statedef 4820]
type    = A
movetype = A
physics = N
anim = 4841
velset = 0,0
facep2 = 1
ctrl = 0
sprpriority = 1

[State 0, PosSet]
type = PosSet
trigger1 = AnimElem = 2
x = EnemyNear,Pos X - 80 * Facing * (1 - 2 * (EnemyNear,BackEdgeDist < 4))

[State 0, Turn]
type = Turn
trigger1 = !Time
trigger1 = Facing != EnemyNear,Facing
trigger2 = AnimElem = 2
trigger2 = P2Dist X < 0

[State 0, Explod SLAYER]
type = Explod
trigger1 = AnimElem = 2
anim = 4842
ID = 3000
pos = 0,0
postype = p1
bindtime = 666
shadow = -1
removeongethit = 1
[State 0, Explod Slash FX 2]
type = Explod
trigger1 = AnimElem = 4
anim = 4843
ID = 3000
postype = p1
bindtime = 666
pausemovetime = 666
sprpriority = 3
ownpal = 1
removeongethit = 1
[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = AnimElemNo(0) = 6
id = 3000
ignorehitpause = 1
[State 0, Explod Slash FX 2]
type = Explod
trigger1 = AnimElemNo(0) = 6
anim = 4844
ID = 3000
postype = p1
bindtime = 4
pausemovetime = 666
supermovetime = 666
sprpriority = 3
ownpal = 1
removeongethit = 1
ignorehitpause = 1

[State 0, VelMul]
type = VelMul
trigger1 = AnimElemNo(0) < 5
x = 0.9
[State 0, VelMul]
type = VelMul
trigger1 = AnimElemNo(0) >= 5
x = 0.5

[State 0, PlayerPush]
type = PlayerPush
trigger1 = Time < 12
value = 0

[State 210, Snd Swing]
type = PlaySnd
trigger1 = AnimElem = 4
value = F0, 3
[State 0, Snd Voice]
type = PlaySnd
trigger1 = AnimElem = 3
value = S4810,random%6
channel = 0

[State 0, Var Damage Value]
type = VarSet
trigger1 = !MoveContact && !MoveReversed
v = 12
value = 136

[State 0, HitDef]
type = HitDef
trigger1 = !MoveContact && !MoveReversed
attr = S,SP
hitflag = MAF
guardflag = M
animtype = heavy
priority = 3,Hit
damage = Ceil(Var(12) * FVar(10)),Ceil(Var(12)*const(BC.ChipLight))
guardpoints = floor((32 + Var(12)) * 0.5)
pausetime = 12,12+Root,Var(13)
guard.pausetime = 12,12
sparkno = ifelse(Var(10)=2||Parent,Var(11)>=2,30,15 + random%4)
guard.sparkno = 40
sparkxy = -40+Floor(P2Dist X*0.5),-56+Floor(P2Dist Y*0.5)
hitsound = 1,7
guardsound = 5,0
ground.type = High
ground.slidetime = 21
ground.hittime = 21
guard.hittime = 13
yaccel = 0.5
ground.velocity = -2
air.velocity = -2,-3.5
guard.velocity = -1
p2facing = 1
getpower = floor(Var(12)*Root,Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Root,Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))

[State 0, Var Dire Counter Stack On]
type = ParentVarSet
triggerall = Var(8) = 1 && Var(10) = 2
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
v = 11
value = 3
ignorehitpause = 1
[State 0, ParentVarSet Counter Message]
type = ParentVarSet
triggerall = Var(8) = 1 && Var(10) = 2
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
v = 32
value = 63 + (Var(10) = 2) + (Var(10) = 3) * 10
ignorehitpause = 1
[State 0, TargetState]
type = TargetState
triggerall = NumTarget
trigger1 = MoveHit && Var(8) = 1
trigger1 = Target,MoveType = H && (Target,StateNo = [5000,5100))
trigger1 = Var(10) = 2 || Parent,Var(11) >= 2
value = 5320
ignorehitpause = 1
[State 0, Map Dire Trigger]
type = RootMapSet
triggerall = Var(8) = 1 && (Var(10) = 2 || Parent,Var(11) > 1)
triggerall = NumTarget && MoveHit
trigger1 = Target,MoveType = H
map = "DireAct"
value = Root,Var(11) - 1
ignorehitpause = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 7
movetype = I

[State 200, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 4890

;---------------------------------------------------------------------------
; H - ACopy CICI
[Statedef 4821]
type    = A
movetype= A
physics = N
anim = 4845
ctrl = 0
velset = 2,-6
sprpriority = 2

[State 0, VelAdd]
type = VelAdd
trigger1 = Time < 12
y = 0.4
[State 0, VelAdd]
type = VelAdd
trigger1 = AnimElemNo(0) = [4,16]
trigger1 = Vel Y < 2
y = 0.1
[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 4
x = 1
y = -1
[State 0, VelSet]
type = VelSet
trigger1 = AnimElemNo(0) <= 16
trigger1 = Vel Y > 2
y = 2
[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 16
x = -1.5
y = -2.5

[State 0, Explod Pawn]
type = Explod
trigger1 = AnimElemNo(0) = [4,14]
trigger1 = Time%2 = 0
anim = 4846 + floor(0.5*(AnimElemNo(0)%4))
pos = -16 + (GameTime%11)*4 + Time%8,-8 + (GameTime%5)*4
postype = p1
bindtime = 4
sprpriority = 1 + GameTime%6
ownpal = 1
removeongethit = 1

[State 200, Snd Swing]
type = PlaySnd
trigger1 = AnimElem = 4
trigger2 = AnimElem = 6
trigger3 = AnimElem = 8
trigger4 = AnimElem = 10
trigger5 = AnimElem = 12
value = F0, 1
channel = 1+(Time%8>=4)
[State 200, Snd Swing]
type = PlaySnd
trigger1 = AnimElem = 14
value = F0, 3
[State 0, Snd Voice]
type = PlaySnd
trigger1 = AnimElem = 3
value = S4811,random%8
channel = 0

[State 0, Var Damage Value]
type = VarSet
trigger1 = !Time
v = 12
value = 20
[State 0, Var Damage Value]
type = VarSet
trigger1 = AnimElem = 15
v = 12
value = 36

[State 0, HitDef]
type = HitDef
trigger1 = Time%4 = 2
trigger1 = AnimElemNo(0) < 14
attr = A,SP
hitflag = MAF
guardflag = M
animtype = heavy
priority = 5,Hit
damage = Ceil(Var(12) * FVar(10)),Ceil(136*(1.0/6.0)*const(BC.ChipLight))
guardpoints = floor((4 + Var(12)) * 0.1)
pausetime = 2,2
guard.pausetime = 4,4
sparkno = 5 + random%4
guard.sparkno = 40
sparkxy = -0+Floor(P2Dist X*0.5)-random%32,-32+Floor(P2Dist Y*0.5)-random%24
hitsound = 1,2
guardsound = 5,1
ground.type = Low
ground.slidetime = 16
ground.hittime = 16
guard.hittime = 10
yaccel = 0.5
air.fall = 1
ground.velocity = -Vel X
air.velocity = -Vel X,-1+Vel Y - 1 * (P2Dist Y >= 0)
guard.velocity = -1
p2facing = 1
getpower = floor(Var(12)*Root,Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Root,Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 15
attr = A,SP
hitflag = MAF
guardflag = M
animtype = heavy
priority = 5,Hit
damage = Ceil(Var(12) * FVar(10)),Ceil(136*(1.0/6.0)*const(BC.ChipLight))
guardpoints = floor((16 + Var(12)) * 0.5)
pausetime = 12,12+Root,Var(13)
guard.pausetime = 12,12
sparkno = ifelse(Parent,Var(11)>=2,30,10 + random%4)
guard.sparkno = 40
sparkxy = -40+Floor(P2Dist X*0.5),-56+Floor(P2Dist Y*0.5)
hitsound = 1,4
guardsound = 5,1
ground.type = Low
ground.slidetime = 20
ground.hittime = 20
guard.hittime = 14
yaccel = 0.5
fall = 1
ground.velocity = -2,8
air.velocity = -2,8
guard.velocity = -2
fall.yvelocity = -4
p2facing = 1
getpower = floor(Var(12)*Root,Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Root,Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))

[State 0, Var Dire Counter Stack On]
type = ParentVarSet
triggerall = Var(8) = 1 && Var(10) = 2
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
v = 11
value = 3
ignorehitpause = 1
[State 0, ParentVarSet Counter Message]
type = ParentVarSet
triggerall = Var(8) = 1 && Var(10) = 2
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
v = 32
value = 63 + (Var(10) = 2) + (Var(10) = 3) * 10
ignorehitpause = 1
[State 0, TargetState]
type = TargetState
triggerall = NumTarget
trigger1 = MoveHit && Var(8) = 1
trigger1 = Target,MoveType = H && (Target,StateNo = [5000,5100))
trigger1 = AnimElemNo(0) >= 15
value = ifelse(Var(10)=2||Parent,Var(11)>=2,5345,5355)
ignorehitpause = 1
[State 0, Map Dire Trigger]
type = RootMapSet
triggerall = Var(8) = 1 && (Var(10) = 2 || Parent,Var(11) > 1)
triggerall = NumTarget && MoveHit
trigger1 = Target,MoveType = H
trigger1 = AnimElemNo(0) >= 15
map = "DireAct"
value = Root,Var(11) - 1
ignorehitpause = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 16
movetype = I
physics = A

[State 0, ChangeState]
type = ChangeState
trigger1 = Time > 4
trigger1 = Pos Y + Vel Y > 0
value = 4890

;---------------------------------------------------------------------------
; H - ACopy BERN
[Statedef 4822]
type    = A
movetype= A
physics = N
velset = 0,0
anim = 4848
ctrl = 0
sprpriority = 2

[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 2
trigger2 = AnimElem = 3
trigger3 = AnimElem = 4
trigger4 = AnimElem = 6
trigger5 = AnimElem = 7
trigger6 = AnimElem = 8
trigger7 = AnimElem = 12
trigger8 = AnimElem = 13
x = 8

[State 0, VelSet]
type = VelAdd
trigger1 = AnimElemNo(0) = 2
x = 2
[State 0, VelSet]
type = VelAdd
trigger1 = AnimElemNo(0) = 6
x = 1

[State 0, VelMul]
type = VelMul
trigger1 = AnimElemNo(0) >= 2
x = 0.9
[State 0, VelMul]
type = VelMul
trigger1 = AnimElemNo(0) = 4
trigger2 = AnimElemNo(0) = [8,9]
x = 0.5

[State 0, Snd Swing]
type = PlaySnd
trigger1 = AnimElem = 3
value = F0,2
[State 0, Snd Swing]
type = PlaySnd
trigger1 = AnimElem = 6
value = F0,3
[State 0, Snd Voice]
type = PlaySnd
trigger1 = AnimElem = 2
value = S4812,random%9
channel = 0

[State 0, VarSet]
type = VarSet
trigger1 = !Time 
v = 12
value = 48
[State 0, VarSet]
type = VarSet
trigger1 = AnimElem = 8
v = 12
value = 96

[State 0, HitDef]
type = HitDef
trigger1 = !MoveContact && !MoveReversed
trigger1 = AnimElemNo(0) < 8
attr = S,SP
hitflag = MAF
guardflag = M
animtype = medium
priority = 5,Hit
damage = Ceil(Var(12) * FVar(10)),Ceil(Var(12)*const(BC.ChipLight))
guardpoints = floor((32 + Var(12)) * 0.5)
pausetime = 12,12+Root,Var(13)
guard.pausetime = 12,12
sparkno = 10 + random%4 + (Var(10)=1) * 5
guard.sparkno = 40
sparkxy = -40+Floor(P2Dist X*0.5),-56+Floor(P2Dist Y*0.5)
hitsound = 1,2
guardsound = 5,0
ground.type = High
ground.slidetime = 16
ground.hittime = 16 + 2 * (Var(5))
guard.hittime = 12
yaccel = 0.5
air.fall = 1
ground.velocity = -6
air.velocity = -2,-3.5
p2facing = 1
getpower = floor(Var(12)*Root,Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Root,Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))
[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 8
attr = S,SP
hitflag = MAF
guardflag = M
animtype = heavy
priority = 5,Hit
damage = Ceil(Var(12) * FVar(10)),Ceil(Var(12)*const(BC.ChipLight))
guardpoints = floor((32 + Var(12)) * 0.5)
pausetime = 12,12+Root,Var(13)
guard.pausetime = 12,12
sparkno = ifelse(Var(10)=2||Parent,Var(11)>=2,30,10 + random%4 + (Var(10)=1) * 5)
guard.sparkno = 40
sparkxy = -40+Floor(P2Dist X*0.5),-56+Floor(P2Dist Y*0.5)
hitsound = 1,3
guardsound = 5,1
ground.type = High
ground.slidetime = 22
ground.hittime = 22
guard.hittime = 15
yaccel = 0.5
fall = 1
ground.velocity = -2,8
air.velocity = -4,8
fall.yvelocity = -4
p2facing = 1
getpower = floor(Var(12)*Root,Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Root,Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))

[State 0, Var Dire Counter Stack On]
type = ParentVarSet
triggerall = Var(8) = 1 && Var(10) = 2
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
v = 11
value = 3
ignorehitpause = 1
[State 0, ParentVarSet Counter Message]
type = ParentVarSet
triggerall = Var(8) = 1 && Var(10) = 2
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
v = 32
value = 63 + (Var(10) = 2) + (Var(10) = 3) * 10
ignorehitpause = 1
[State 0, TargetState]
type = TargetState
triggerall = NumTarget
trigger1 = MoveHit && Var(8) = 1
trigger1 = Target,MoveType = H && (Target,StateNo = [5000,5100))
trigger1 = AnimElemNo(0) >= 8
value = ifelse(Var(10)=2||Parent,Var(11)>=2,5345,5355)
ignorehitpause = 1
[State 0, Map Dire Trigger]
type = RootMapSet
triggerall = Var(8) = 1 && (Var(10) = 2 || Parent,Var(11) > 1)
triggerall = NumTarget && MoveHit
trigger1 = Target,MoveType = H
trigger1 = AnimElemNo(0) >= 8
map = "DireAct"
value = Root,Var(11) - 1
ignorehitpause = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 10
movetype = I

[State 1000, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 4890

;---------------------------------------------------------------------------
; H - ACopy JANE
[Statedef 4823]
type    = A
movetype= A
physics = S
ctrl = 0
velset = 0,0
anim = 4849

[State 0, Explod]
type = Explod
trigger1 = AnimElem = 3, 1
anim = 4850
postype = p1
bindtime = 2
sprpriority = 5
ownpal = 1
removeongethit = 1

[State 0, Snd Snap]
type = PlaySnd
trigger1 = AnimElem = 3, 1
value = S200,0
channel = 1
[State 0, Snd Fire]
type = PlaySnd
trigger1 = AnimElem = 4
value = S4813,4
[State 0, Snd Voice]
type = PlaySnd
trigger1 = AnimElem = 3
value = S4813,random%4
channel = 0

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 4
name = "SNAP"
ID = 4873
stateno = 4873
pos = 56,-64
postype = p1
ownpal = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 4
movetype = I

[State 210, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 4890

;---------------------------------------------------------------------------
; H - Snap Proj
[Statedef 4873]
type    = A
movetype= A
physics = N
anim = 4851
velset = 6
sprpriority = 3

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, NotHitBy]
type = NotHitBy
trigger1 = !Time
value = ,NA,SA,HA,NT,ST,HT
time = 666
[State 0, HitOverride]
type = HitOverride
trigger1 = !Time
attr = SCA,NP,SP,HP
stateno = 4874
time = 666

[State 0, Snd Fire]
type = PlaySnd
trigger1 = !Time
value = S1000,0

[State 0, Var Damage Value]
type = VarSet
trigger1 = !Time
v = 12
value = 80

[State 0, HitDef]
type = HitDef
trigger1 = !MoveContact && !MoveReversed
attr = S,NP
hitflag = MAF
guardflag = MA
animtype = medium
priority = 3,Hit
damage = Ceil(Var(12) * FVar(10)),Ceil(Var(12)*const(BC.ChipLight))
guardpoints = floor((32 + Var(12)) * 0.5)
pausetime = 1, 12 + Root,var(13)
sparkno = -1
guard.sparkno = 40
sparkxy = 0,0
hitsound = -1
guardsound = 5,1
ground.type = Low
ground.slidetime = 19
ground.hittime = 19
guard.hittime = 10
yaccel = 0.5
air.fall = 1
ground.velocity = -4,0
air.velocity = -1.5,-4
getpower = floor(Var(12)*Root,Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Root,Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))

[State 0, PalFX]
type = PalFX
trigger1 = !Time
time = 666
add = 16,16,16
sinadd = 32,32,32,4

[State 0, DestroySelf]
type = DestroySelf
trigger1 = FrontEdgeDist < -64
[State 0, DestroySelf]
type = ChangeState
trigger1 = MoveContact
trigger2 = MoveReversed
value = 4874

;---------------------------------------------------------------------------
; H - Snap Hit
[Statedef 4874]
type    = A
movetype= I
physics = N
anim = 666
velset = 0,0
movehitpersist = 1
hitdefpersist = 1
sprpriority = 3

[State 0, Snd Fire]
type = PlaySnd
triggerall = !Time
trigger1 = !NumTarget && MoveContact
trigger1 = TeamSide = 1
trigger2 = NumTarget && MoveContact
trigger3 = gethitvar(damage) > 0
trigger3 = TeamSide = 1
value = F1,10
[State 0, Snd Hit]
type = PlaySnd
triggerall = !Time
trigger1 = !NumTarget && MoveHit
trigger1 = TeamSide = 1
trigger2 = NumTarget && MoveHit
trigger3 = gethitvar(damage) > 0
trigger3 = TeamSide = 1
value = F1,2

[State 0, Explod HitSpark]
type = Explod
triggerall = !Time
trigger1 = NumTarget && MoveHit && !MoveReversed
anim = F ifelse(Var(10)=2||Root,Var(11)>=2,30,10 + random%4)
pos = 0,-P2Dist Y
postype = p2
pausemovetime = 666
supermovetime = 666
sprpriority = 9
ontop = 1
ownpal = 1

[State 0, Explod]
type = Explod
trigger1 = !Time
anim = 4852
pos = 0,0
postype = p1
sprpriority = 3

[State 0, Var Dire Counter Stack On]
type = RootVarSet
triggerall = !Time && Var(10) = 2
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
v = 11
value = 3
ignorehitpause = 1

[State 0, ParentVarSet Counter Message]
type = RootVarSet
triggerall = !Time && Var(10)
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
v = 32
value = 63 + (Var(10) = 2) + (Var(10) = 3) * 10

[State 0, TargetState]
type = TargetState
triggerall = !Time
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
trigger1 = Root,Var(11)>=2
value = 5325

[State 0, VarSet]
type = RootMapSet
trigger1 = !Time && Target,StateNo = [5000,6000)
trigger1 = NumTarget && MoveHit
map = "FXColor"
value = ifelse(Root,Var(59)=1,5292256,ifelse(Root,Var(59)=2,12599544,ifelse(Root,Var(59)=3,16308288,ifelse(Root,Var(59)=4,16277552,ifelse(Root,Var(59)=5,6332648,ifelse(Root,Var(59)=6,14215416,ifelse(Root,Var(59)=7,6320256,ifelse(Root,Var(59)=8,16261184,ifelse(Root,Var(59)=9,16308352,ifelse(Root,Var(59)=10,2146368,ifelse(Root,Var(59)=11,5794024,ifelse(Root,Var(59)=12,43200,ifelse(Root,Var(59)=13,16285888,ifelse(Root,Var(59)=14,12599544,ifelse(Root,Var(59)=15,12582944,ifelse(Root,Var(59)=16,6344800,ifelse(Root,Var(59)=17,4243456,ifelse(Root,Var(59)=18,15241376,ifelse(Root,Var(59)=19,9496736,ifelse(Root,Var(59)=20,15212576,6303824))))))))))))))))))))
ignorehitpause = 1
[State 0, TargetState]
type = RootMapSet
trigger1 = !Time && Target,StateNo = [5000,6000)
trigger1 = NumTarget && MoveHit
map = "HitFX"
value = 1
ignorehitpause = 1
redirectid = Target,ID

[State 0, Map Dire Trigger]
type = RootMapSet
triggerall = Root,Var(11) >= 2
triggerall = !Time
triggerall = NumTarget && MoveHit
trigger1 = Target,MoveType = H
map = "DireAct"
value = Root,Var(11) - 1
ignorehitpause = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = Time = 2

;---------------------------------------------------------------------------
; H - ACopy ISAB
[Statedef 4824]
type    = A
movetype= A
physics = S
velset = 0,0
movehitpersist = 1
anim = 4853
ctrl = 0
sprpriority = 2

[State 210, 1]
type = PlaySnd
trigger1 = AnimElem = 6
value = F0, 7
[State 0, Snd Voice]
type = PlaySnd
trigger1 = AnimElem = 5
value = S4814,random%2
channel = 0

[State 0, Explod]
type = Explod
trigger1 = AnimElem = 7
anim = 4854
id = 3000
postype = p1
bindtime = 2
sprpriority = 3
ownpal = 1
removeongethit = 1

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 7
name = "Vayne"
ID = 4875
stateno = 4875
pos = max(16,P2Dist X)+8,0
ownpal = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 7
movetype = I

[State 200, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 4890

;---------------------------------------------------------------------------
; H - Bladepillar
[Statedef 4875]
type    = A
movetype= A
physics = N
anim = 4855
movehitpersist = 1
sprpriority = 3

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
flag2 = invisible

[State 0, Explod]
type = Explod
trigger1 = AnimElem = 2
trigger2 = AnimElem = 3, 1
trigger3 = AnimElem = 5
anim = 4855
pos = Sin(GameTime*0.5)*8,Cos(GameTime*0.5)*2
postype = p1
bindtime = 666
sprpriority = Cos(GameTime*0.5)*5
ownpal = 1

[State 0, Snd Swish]
type = PlaySnd
trigger1 = !Time
value = S4814,2

[State 0, VarSet]
type = VarSet
trigger1 = !Time
v = 5
value = 0
[State 0, VarAdd]
type = VarAdd
trigger1 = MoveContact = 1
v = 5
value = 1

[State 0, Var Damage Value]
type = VarSet
trigger1 = !Time
v = 12
value = 56

[State 0, HitDef]
type = HitDef
triggerall = Var(5) < 2
trigger1 = AnimElem = 2
trigger2 = AnimElem = 3
attr = S,SP
hitflag = MAFD
guardflag = MA
animtype = medium
priority = 3,Hit
damage = Ceil(Var(12) * FVar(10)),Ceil(Var(12)*const(BC.ChipLight))
guardpoints = floor((16 + Var(12)) * 0.25)
pausetime = 2, ifelse(AnimElemNo(0)>=3,12+Root,var(13),6)
guard.pausetime = 2, 4
sparkno = ifelse(Root,Var(11)>1&&AnimElemNo(0)>=3,30,25 + random%4)
guard.sparkno = 40
sparkxy = 0,-32-Floor(P2Dist Y*0.5)
hitsound = 1,6
guardsound = 5,1
ground.type = Low
ground.slidetime = 14
ground.hittime = 14
guard.hittime = 10
yaccel = 0.5
air.fall = 1
guard.dist = 32
ground.velocity = -2.5,0
air.velocity = -1,-1.5
getpower = floor(Var(12)*Root,Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Root,Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0

[State 0, ParentVarSet Counter Message]
type = RootVarSet
trigger1 = Var(8) = 1 && HitCount = 1
trigger1 = Var(10) && MoveHit
trigger1 = NumTarget && Target,MoveType = H
v = 32
value = 62 + Var(10)
ignorehitpause = 1

[State 0, Var Dire Counter Stack On]
type = RootVarSet
triggerall = Var(8) = 1 && Var(10) = 2 && HitCount = 1
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
v = 11
value = 3
ignorehitpause = 1

[State 0, TargetState]
type = TargetState
triggerall = Var(8) = 1 && AnimElemNo(0) >= 3
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
trigger1 = Root,Var(11)>=2
value = 5335
ignorehitpause = 1

[State 0, Map Dire Trigger]
type = RootMapSet
triggerall = Root,Var(11) >= 2
triggerall = Var(8) = 1 && AnimElemNo(0) >= 3
triggerall = NumTarget && MoveHit
trigger1 = Target,MoveType = H
map = "DireAct"
value = Root,Var(11) - 1
ignorehitpause = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 5
movetype = I

[State 0, PalFX]
type = PalFX
trigger1 = !Time
time = 666
add = 16,16,16
sinadd = 32,32,32,4

[State 0, DestroySelf]
type = DestroySelf
trigger1 = AnimTime = 0

;---------------------------------------------------------------------------
; H - ACopy GOLI
[Statedef 4825]
type    = A
movetype= A
physics = N
velset = 0,0
anim = 4856
ctrl = 0
sprpriority = 2

[State 0, MapSet]
type = MapSet
trigger1 = AnimElem = 5
map = "DashDustFX"
value = 1

[State 0, Snd Swing]
type = PlaySnd
trigger1 = AnimElem = 5
value = F0,4
[State 0, Snd Swing]
type = PlaySnd
trigger1 = AnimElem = 9
value = F0,3
[State 0, Snd Voice1]
type = PlaySnd
trigger1 = AnimElem = 4
value = S4815,random%3
channel = 0
[State 0, Snd Voice2]
type = PlaySnd
trigger1 = AnimElem = 9
value = S4815,3 + random%6
channel = 0

[State 0, VelAdd]
type = VelAdd
trigger1 = AnimElemNo(0) = 4
x = 1
[State 0, VelAdd]
type = VelAdd
trigger1 = AnimElemNo(0) = 5
x = 4
[State 0, VelMul]
type = VelMul
trigger1 = AnimElemNo(0) >= 7
x = 0.7
[State 0, VelMul]
type = VelMul
trigger1 = AnimElemNo(0) != 5
x = 0.8

[State 0, VelAdd]
type = VelAdd
trigger1 = AnimElemNo(0) = 10
x = max(0,min(8,P2BodyDist X * 0.1))
[State 0, VelMul]
type = VelMul
trigger1 = AnimElemNo(0) >= 8
x = 0.7

[State 0, Var Damage Value]
type = VarSet
trigger1 = !Time
v = 12
value = 112
[State 0, Var Damage Value]
type = VarSet
trigger1 = AnimElem = 10
v = 12
value = 16

[State 0, HitDef]
type = HitDef
trigger1 = !MoveContact && !MoveReversed
trigger1 = AnimElemNo(0) < 10
attr = S,SP
hitflag = MAF
guardflag = M
animtype = heavy
priority = 4,Hit
damage = Ceil(Var(12) * FVar(10)),Ceil(Var(12)*const(BC.ChipLight))
guardpoints = floor((const(BC.GuardFlat) + Var(12)) * const(BC.GuardScaleMid))
pausetime = 12,12+Root,Var(13)
guard.pausetime = 12,12
sparkno = 10 + random%4 + (Var(10)=1) * 5
guard.sparkno = 40
sparkxy = -56+Floor(P2Dist X*0.5),-48+Floor(P2Dist Y*0.5)
hitsound = 1,3
guardsound = 5,1
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
guard.hittime = 12
yaccel = 0.5
air.fall = 1
ground.velocity = -4,0
air.velocity = -1,-4
p2facing = 1
getpower = floor(Var(12)*Root,Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Root,Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))
[State 0, HitDef]
type = HitDef
trigger1 = !MoveContact && !MoveReversed
trigger1 = AnimElemNo(0) >= 10
trigger2 = AnimElem = 10
attr = S,SP
hitflag = MAF
guardflag = M
animtype = heavy
priority = 4,Hit
damage = Ceil(Var(12) * FVar(10)),Ceil(Var(12)*const(BC.ChipLight))
guardpoints = floor((const(BC.GuardFlat) + Var(12)) * const(BC.GuardScaleMid))
pausetime = 12,12+Root,Var(13)
guard.pausetime = 12,12
sparkno = ifelse((Var(10)=2||Parent,Var(11)>=2),30,10 + random%4 + (Var(10)=1) * 5)
guard.sparkno = 40
sparkxy = -56+Floor(P2Dist X*0.5),-48+Floor(P2Dist Y*0.5)
hitsound = 1,3
guardsound = 5,1
ground.type = Low
ground.slidetime = 17
ground.hittime = 17
guard.hittime = 13
yaccel = 0.5
fall = 1
ground.velocity = -2,-6
air.velocity = -1,-7
p2facing = 1
getpower = floor(Var(12)*Root,Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Root,Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))

[State 0, Var Dire Counter Stack On]
type = ParentVarSet
triggerall = Var(8) = 1 && Var(10) = 2
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
v = 11
value = 3
ignorehitpause = 1
[State 0, ParentVarSet Counter Message]
type = ParentVarSet
triggerall = Var(8) = 1 && Var(10) = 2
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
v = 32
value = 63 + (Var(10) = 2) + (Var(10) = 3) * 10
ignorehitpause = 1
[State 0, TargetState]
type = TargetState
triggerall = NumTarget
trigger1 = MoveHit && Var(8) = 1
trigger1 = Target,MoveType = H && (Target,StateNo = [5000,5100))
trigger1 = AnimElemNo(0) >= 10
trigger1 = Var(10) = 2 || Parent,Var(11) >= 2
value = 5335
ignorehitpause = 1
[State 0, Map Dire Trigger]
type = RootMapSet
triggerall = Var(8) = 1 && (Var(10) = 2 || Parent,Var(11) > 1)
triggerall = NumTarget && MoveHit
trigger1 = Target,MoveType = H
trigger1 = AnimElemNo(0) >= 10
map = "DireAct"
value = Root,Var(11) - 1
ignorehitpause = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 13
movetype = I

[State 1000, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 4890

;---------------------------------------------------------------------------
; H - ACopy NECC
[Statedef 4826]
type    = A
movetype= A
physics = S
velset = 0,0
ctrl = 0
anim = 4857

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 4
statetype = A
physics = N

[State 0, MapSet]
type = MapSet
trigger1 = AnimElem = 4
map = "DashDustFX"
value = 1

[State 0, Snd Voice1]
type = PlaySnd
trigger1 = AnimElem = 3
value = S4821,random%7
channel = 0

[State 0, VelSet]
type = VelAdd
trigger1 = AnimElemNo(0) = 4
x = 2 + 0.50
[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 4
y = -2.00

[State 0, VelMul]
type = VelMul
trigger1 = AnimElemNo(0) >= 6
x = 0.975
[State 0, VelMul]
type = VelMul
trigger1 = AnimElemNo(0) = 9
x = 0.8

[State 0, VelAdd]
type = VelAdd
trigger1 = AnimElemNo(0) >= 4
y = 0.2

[State 0, Var Damage Value]
type = VarSet
trigger1 = !MoveContact && !MoveReversed
v = 12
value = 96

[State 0, HitDef]
type = HitDef
trigger1 = !MoveContact && !MoveReversed
attr = S,SP
hitflag = MAF
guardflag = M
animtype = light
priority = 4,Hit
damage = Ceil(Var(12) * FVar(10)),Ceil(136*const(BC.ChipLight))
guardpoints = floor((32 + Var(12)) * 0.5)
pausetime = 12,12+Root,Var(13)
guard.pausetime = 12,12
sparkno = 5 + random%4 + (Var(10)=1) * 5
guard.sparkno = var(19)
sparkxy = -24+Floor(P2Dist X*0.5),-32+Floor(P2Dist Y*0.5)
hitsound = 1,1
guardsound = 5,0
ground.type = High
ground.slidetime = 24
ground.hittime = 24
guard.hittime = 18
yaccel = 0.5
forcenofall = 1
ground.velocity = 0,0
air.velocity = 0,0
guard.velocity = -4
p2facing = 1
getpower = floor(Var(12)*Root,Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Root,Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))

[State 0, Var Dire Counter Stack On]
type = ParentVarSet
triggerall = MoveHit && !MoveReversed
triggerall = EnemyNear,MoveType = H
trigger1 = Var(8) = 1 && Var(10) = 2
v = 11
value = 3
ignorehitpause = 1

[State 0, TargetState]
type = TargetState
triggerall = NumTarget
trigger1 = MoveHit && Var(8) = 1
trigger1 = Target,MoveType = H && (Target,StateNo = [5000,5100))
value = 5010
ignorehitpause = 1
[State 0, TargetBind]
type = TargetBind
triggerall = NumTarget
trigger1 = MoveHit && Var(8) = 1
trigger1 = Target,MoveType = H && Target,StateNo = 5010
time = 1
pos = 16 + P2Dist X * 0.50,-Pos Y
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
triggerall = NumTarget
trigger1 = MoveHit && (Target,StateNo = [5010,5020))
value = 4876

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 8
movetype = I

[State 210, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 4890

;---------------------------------------------------------------------------
; H - ACopy NECC S
[Statedef 4876]
type    = A
movetype= A
physics = N
anim = 4858
velset = 0,0
sprpriority = 1

[State 0, Snd Swing]
type = PlaySnd
trigger1 = AnimElem = 4
value = F0,3

[State 0, PosAdd]
type = PosAdd
trigger1 = Time = 1
x = P2Dist X * 0.125

[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElemNo(0) = 4
x = P2Dist X * 0.125
y = enemynear,const(size.head.pos.y) * 0.025

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 6
x = 0.5
y = -1
[State 0, VelAdd]
type = VelAdd
trigger1 = AnimElemNo(0) >= 6
y = 0.25

[State 0, Var Damage Value]
type = VarSet
trigger1 = !MoveContact && !MoveReversed
v = 12
value = 48

[State 0, HitDef]
type = HitDef
trigger1 = !MoveContact && !MoveReversed
attr = S,SP
hitflag = MAF
guardflag = M
animtype = heavy
priority = 4,Hit
damage = Ceil(Var(12) * FVar(10)),Ceil(Var(12)*const(BC.ChipMid))
guardpoints = floor((const(BC.GuardFlat) + Var(12)) * const(BC.GuardScaleMid))
pausetime = 12,12+Root,Var(13)
guard.pausetime = 12,12
sparkno = ifelse((Var(10)=2||Parent,Var(11)>=2),30,10 + random%4 + (Var(10)=1) * 5)
guard.sparkno = 40
sparkxy = -56+Floor(P2Dist X*0.5),-48+Floor(P2Dist Y*0.5)
hitsound = 1,3
guardsound = 5,1
ground.type = Low
ground.slidetime = 17
ground.hittime = 17
guard.hittime = 13
yaccel = 0.5
fall = 1
ground.velocity = -2.5,-6
air.velocity = -3,-5.5
p2facing = 1
getpower = floor(Var(12)*Root,Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Root,Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))

[State 0, TargetState]
type = TargetState
triggerall = NumTarget
trigger1 = MoveHit && Var(8) = 1
trigger1 = Target,MoveType = H && (Target,StateNo = [5000,5100))
trigger1 = Parent,Var(11) > 1
value = 5330
ignorehitpause = 1
[State 0, Map Dire Trigger]
type = RootMapSet
triggerall = MoveHit && !MoveReversed
triggerall = EnemyNear,MoveType = H
trigger1 = Parent,Var(11) > 1 && Var(8) = 1
map = "DireAct"
value = Root,Var(11) - 1
ignorehitpause = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 6
movetype = I

[State 210, 5]
type = ChangeState
trigger1 = Pos Y + Vel Y > 0
value = 4890

;---------------------------------------------------------------------------
; H - ACopy EMIC
[Statedef 4827]
type    = A
movetype= A
physics = N
ctrl = 0
anim = 4859
velset = 0,0
sprpriority = 2

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = Time < 16
trigger1 = Time%2 = 0
flag = invisible

[State 0, NotHitBy]
type = NotHitBy
trigger1 = Time < 16
value = ,NA,SA,NP,SP,NT,ST,HT
time = 3

[State 0, Snd Swing]
type = PlaySnd
trigger1 = AnimElem = 4
value = F0,8
channel = 1
[State 0, Snd Voice1]
type = PlaySnd
trigger1 = AnimElem = 4
value = S4817,random%6
channel = 0

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 6
x = 14
y = -8
[State 0, VelMul]
type = VelMul
trigger1 = 1
x = 0.6
[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 4
trigger3 = AnimElem = 5
x = 4

[State 0, PosAdd]
type = PosAdd
trigger1 = Time < 10
x = max(0,min(p2dist x - 24,8))

[State 0, VelAdd]
type = VelAdd
trigger1 = AnimElemNo(0) >= 6
y = 0.45

[State 0, Explod Slash FX 1]
type = Explod
trigger1 = AnimElemNo(0) = [5,6]
trigger1 = GameTime%3
anim = 4860 + (AnimElemNo(-(Var(8)!=0))-5)
ID = 3000
postype = p1
removetime = 1
sprpriority = -3
ownpal = 1
removeongethit = 0
ignorehitpause = 1
[State 0, Explod Slash FX 2]
type = Explod
trigger1 = AnimElemNo(0) = [7,10]
trigger1 = GameTime%3
anim = 4862 + (AnimElemNo(-(Var(8)!=0))-7)
ID = 3000
postype = p1
removetime = 1
sprpriority = -3
ownpal = 1
removeongethit = 0
ignorehitpause = 1
[State 0, Explod Slash FX 3]
type = Explod
trigger1 = AnimElem = 11
anim = 4866
ID = 3000
postype = p1
bindtime = 4
sprpriority = -3
ownpal = 1
removeongethit = 0

[State 0, Var Damage Value]
type = VarSet
trigger1 = !Time
v = 12
value = 120

[State 0, HitDef]
type = HitDef
trigger1 = !MoveContact && !MoveReversed
attr = S,SP
hitflag = MAF
guardflag = M
animtype = heavy
priority = 5,Hit
damage = Ceil(Var(12) * FVar(10)),Ceil(Var(12)*const(BC.ChipLight))
guardpoints = floor((32 + Var(12)) * 0.5)
pausetime = 12,12+Root,Var(13)
guard.pausetime = 12,12
sparkno = ifelse(Var(10)=2||Parent,Var(11)>=2,30,25 + random%4)
guard.sparkno = var(19)
sparkxy = -40+Floor(P2Dist X*0.5),-56+Floor(P2Dist Y*0.5)
hitsound = 1,7
guardsound = 5,1
ground.type = Low
ground.slidetime = 24
ground.hittime = 24
guard.hittime = 12
yaccel = 0.5
fall = 1
ground.velocity = -2,-7.5
air.velocity = -2.5,-6
p2facing = 1
getpower = floor(Var(12)*Root,Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Root,Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))

[State 0, Var Dire Counter Stack On]
type = ParentVarSet
triggerall = Var(8) = 1 && Var(10) = 2
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
v = 11
value = 3
ignorehitpause = 1
[State 0, ParentVarSet Counter Message]
type = ParentVarSet
triggerall = Var(8) = 1 && Var(10) = 2
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
v = 32
value = 63 + (Var(10) = 2) + (Var(10) = 3) * 10
ignorehitpause = 1
[State 0, TargetState]
type = TargetState
triggerall = NumTarget
trigger1 = MoveHit && Var(8) = 1
trigger1 = Target,MoveType = H && (Target,StateNo = [5000,5100))
trigger1 = Var(10) = 2 || Parent,Var(11) >= 2
value = 5335
ignorehitpause = 1
[State 0, Map Dire Trigger]
type = RootMapSet
triggerall = Var(8) = 1 && (Var(10) = 2 || Parent,Var(11) > 1)
triggerall = NumTarget && MoveHit
trigger1 = Target,MoveType = H
map = "DireAct"
value = Root,Var(11) - 1
ignorehitpause = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 10
movetype = I

[State 200, 3]
type = ChangeState
trigger1 = Time > 4
trigger1 = Pos Y + Vel Y > 0
value = 4890

;---------------------------------------------------------------------------
; H - ACopy LUCY
[Statedef 4828]
type    = A
movetype= A
physics = S
velset = 0,0
anim = 4867
ctrl = 0
sprpriority = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = AnimElem = 9
trigger1 = Time < 32
value = Anim
elem = 6

[State 0, VelAdd]
type = VelAdd
trigger1 = AnimElemNo(0) = [4,5]
trigger1 = Time <= 20
x = 2
[State 0, VelMul]
type = VelMul
trigger1 = 1
x = 0.95
[State 0, VelMul]
type = VelMul
trigger1 = AnimElemNo(0) >= 9
x = 0.8

[State 0, Snd Spinny]
type = PlaySnd
trigger1 = AnimElem = 4
value = S1000,0
[State 0, Snd Voice1]
type = PlaySnd
trigger1 = AnimElem = 3
value = S4818,random%7
channel = 0

[State 0, MapSet]
type = MapSet
trigger1 = AnimElem = 4
map = "DashDustFX"
value = 1

[State 0, Explod Asmos FX1]
type = Explod
trigger1 = !Time
anim = 4868
postype = p1
sprpriority = 3
bindtime = 666
ownpal = 1
removeongethit = 0
ignorehitpause = 1
[State 0, Explod Asmos FX2]
type = Explod
trigger1 = AnimElemNo(0) = 5
anim = 4869
postype = p1
removetime = 1
sprpriority = 3
ownpal = 1
removeongethit = 0
ignorehitpause = 1
[State 0, Explod Asmos FX3]
type = Explod
trigger1 = AnimElemNo(0) = [6,8]
anim = 4870 + (Time*0.33)%2
postype = p1
removetime = 1
sprpriority = 3
ownpal = 1
removeongethit = 0
ignorehitpause = 1
[State 0, Explod Asmos FX4]
type = Explod
trigger1 = AnimElem = 9
anim = 4872
postype = p1
sprpriority = 3
bindtime = 666
ownpal = 1
removeongethit = 0
ignorehitpause = 1

[State 0, Var Damage Value]
type = VarSet
trigger1 = !MoveContact && !MoveReversed
trigger2 = MoveHit = 1
v = 12
value = 88 - 56 * (HitCount>0) - 24 * (HitCount>1)

[State 0, HitDef]
type = HitDef
trigger1 = !MoveContact && !MoveReversed
trigger2 = AnimElem = 6
trigger3 = AnimElem = 7
trigger4 = AnimElem = 8
attr = S,SP
hitflag = MAF
guardflag = M
animtype = heavy
priority = 3,Hit
damage = Ceil(Var(12) * FVar(10)),Ceil(Var(12)*const(BC.ChipLight))
guardpoints = floor((const(BC.GuardFlat) + Var(12)) * const(BC.GuardScaleMulti))
pausetime = ifelse(Time<34,3,12),ifelse(Time<34,3,12+Root,var(13))
sparkno = ifelse((Var(10)=2||Parent,Var(11)>=2)&&Time>=34,30,25 + random%4)
guard.sparkno = var(19)
sparkxy = -20+Floor(P2Dist X*0.25) - random%21,-32+Floor(P2Dist Y*0.5) - random%25
hitsound = 1,6 + (Time>=34)
guardsound = 5,0
ground.type = Low
ground.slidetime = 16
ground.hittime = 16
guard.hittime = 10
yaccel = 0.5
fall = (Time>=34)
air.fall = 1
ground.velocity = -4 + (P2BodyDist X * 0.1),-4 * (Time>=34)
air.velocity = -5 + 1 * (Time>=34),-0.5 - 2 * (Time>=34)
p2facing = 1
getpower = floor(Var(12)*Root,Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Root,Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))

[State 0, Var Dire Counter Stack On]
type = ParentVarSet
triggerall = Var(8) = 1 && Var(10) = 2
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
v = 11
value = 3
ignorehitpause = 1
[State 0, ParentVarSet Counter Message]
type = ParentVarSet
triggerall = Var(8) = 1 && Var(10) = 2
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
v = 32
value = 63 + (Var(10) = 2) + (Var(10) = 3) * 10
ignorehitpause = 1
[State 0, TargetState]
type = TargetState
triggerall = NumTarget
trigger1 = MoveHit && Var(8) = 1
trigger1 = Target,MoveType = H && (Target,StateNo = [5000,5100))
trigger1 = AnimElemNo(0) >= 8 && Time >= 34
trigger1 = Var(10) = 2 || Parent,Var(11) >= 2
value = 5330
ignorehitpause = 1
[State 0, Map Dire Trigger]
type = RootMapSet
triggerall = Var(8) = 1 && (Var(10) = 2 || Parent,Var(11) > 1)
triggerall = NumTarget && MoveHit
trigger1 = Target,MoveType = H
trigger1 = AnimElemNo(0) >= 8 && Time >= 34
map = "DireAct"
value = Root,Var(11) - 1
ignorehitpause = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 4
physics = N
[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 9
movetype = I

[State 1000, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 4890

;---------------------------------------------------------------------------
; H - ACopy GABB
[Statedef 4829]
type    = A
movetype= A
physics = N
velset = 0,0
ctrl = 0
anim = 4873
sprpriority = 1

[State 0, PosAdd]
type = PosAdd
triggerall = Anim = 4873
trigger1 = AnimElem = 3
trigger2 = AnimElem = 4
x = -8
[State 0, PosAdd]
type = PosAdd
triggerall = Anim = 4873
trigger1 = AnimTime = 0
x = 16

[State 0, Snd Slide Right In]
type = PlaySnd
trigger1 = !Time
value = S4819,0
[State 0, Snd Voice]
type = PlaySnd
triggerall = Anim = 4873
trigger1 = AnimTime = 0
value = S4822,random%7
channel = 0

[State 0, Explod Cannon Start]
type = Explod
trigger1 = Anim = 4873
trigger1 = AnimElemNo(0) = 1 && AnimTime
anim = 4876
postype = p1
removetime = 1
sprpriority = 2
ownpal = 1
shadow = -1
[State 0, Explod Cannon Blast]
type = Explod
trigger1 = Anim = 4873
trigger1 = AnimTime = 0
anim = 4877
pos = -16,0
postype = p1
sprpriority = 3
ownpal = 1
shadow = -1
[State 0, Explod Cannon Blast FX]
type = Explod
trigger1 = Anim = 4873
trigger1 = AnimTime = 0
anim = 4878
pos = -16,0
postype = p1
sprpriority = 4
ownpal = 1

[State 0, VelSet]
type = VelSet
trigger1 = Anim = 4873
trigger1 = AnimTime = 0
x = 12

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = Anim = 4873
trigger1 = AnimTime = 0
value = 4874
[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = Anim = 4874
trigger1 = Var(7) = 1
value = 4875

[State 0, Var Timer]
type = VarSet
trigger1 = !Time
v = 7
value = 15
[State 0, VarSet]
type = VarSet
trigger1 = MoveHit = 1 && NumTarget
v = 7
value = 11
[State 0, VarAdd]
type = VarAdd
trigger1 = Anim = 4874
trigger1 = Var(7)
v = 7
value = -1
[State 0, VarSet]
type = VarSet
trigger1 = MoveGuarded = 1
v = 7
value = 1 + floor(Var(7)*0.5)

[State 0, PosSet]
type = PosSet
trigger1 = !Time
y = min(Pos Y,0)

[State 0, PlayerPush]
type = PlayerPush
trigger1 = MoveHit && NumTarget
value = 0

[State 0, VelSet]
type = VelSet
trigger1 = Var(7) = 1
x = Vel X * 0.33
[State 0, VelMul]
type = VelMul
trigger1 = Anim = 4874
x = 0.95
[State 0, VelSet]
type = VelSet
trigger1 = Anim = 4875
x = 0
y = 0

[State 0, Snd Kaboom]
type = PlaySnd
trigger1 = !Time
value = S1000,1
channel = 1

[State 0, Explod Aura]
type = Explod
trigger1 = Anim = 4874
anim = 4879 + 0.5 * (Time%6) 
postype = p1
sprpriority = -5 + 10 * (GameTime%3=2)
ownpal = 1
ignorehitpause = 1
trans = addalpha
alpha = 256 - 32 * (GameTime%3),32 * (GameTime%3)
[State 0, Explod Aura]
type = Explod
trigger1 = Anim = 1050
anim = 4879 + 0.5 * (Time%6)
postype = p1
sprpriority = -5
ownpal = 1
ignorehitpause = 1

[State 0, Explod Trail FX]
type = Explod
trigger1 = Anim = 4874
anim = 4882
ID = 3000
pos = 0,-54
postype = p1
removetime = 1
scale = max(0,min(1,0.2*Time) - 0.075 * Time),1
sprpriority = -6
ownpal = 1
removeongethit = 1
trans = addalpha
alpha = 256 - 32 * (GameTime%3),32 * (GameTime%3)
ignorehitpause = 1

[State 0, Var Damage Value]
type = VarSet
trigger1 = !Time
v = 12
value = 128

[State 0, HitDef]
type = HitDef
trigger1 = !MoveContact && !MoveReversed
attr = S,SP
hitflag = MAF
guardflag = M
animtype = heavy
priority = 4,Hit
damage = Ceil(Var(12) * FVar(10)),Ceil(Var(12)*const(BC.ChipLight))
guardpoints = floor((const(BC.GuardFlat) + Var(12)) * const(BC.GuardScaleMid))
pausetime = 12,12+Root,Var(13)
guard.pausetime = 12,12
sparkno = ifelse(Var(10)=2||Parent,Var(11)>=2,30,10 + random%4 + (Var(10)=1) * 5)
guard.sparkno = 40
sparkxy = -56+Floor(P2Dist X*0.5),-48+Floor(P2Dist Y*0.5)
hitsound = 1,3
guardsound = 5,1
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
guard.hittime = 12
yaccel = 0.5
fall = 1
ground.velocity = -2,-7
air.velocity = -3,-6
p2facing = 1
getpower = floor(Var(12)*Root,Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Root,Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))

[State 0, Var Dire Counter Stack On]
type = ParentVarSet
triggerall = Var(8) = 1 && Var(10) = 2
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
v = 11
value = 3
ignorehitpause = 1
[State 0, ParentVarSet Counter Message]
type = ParentVarSet
triggerall = Var(8) = 1 && Var(10) = 2
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
v = 32
value = 63 + (Var(10) = 2) + (Var(10) = 3) * 10
ignorehitpause = 1
[State 0, TargetState]
type = TargetState
triggerall = NumTarget
trigger1 = MoveHit && Var(8) = 1
trigger1 = Target,MoveType = H && (Target,StateNo = [5000,5100))
trigger1 = Var(10) = 2 || Parent,Var(11) >= 2
value = 5340
ignorehitpause = 1
[State 0, Map Dire Trigger]
type = RootMapSet
triggerall = Var(8) = 1 && (Var(10) = 2 || Parent,Var(11) > 1)
triggerall = NumTarget && MoveHit
trigger1 = Target,MoveType = H
map = "DireAct"
value = Root,Var(11) - 1
ignorehitpause = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = Var(7) = 1
movetype = I

[State 0, ChangeState]
type = ChangeState
triggerall = Var(6) > 1
triggerall = !MoveGuarded
trigger1 = Var(7) <= 2
trigger2 = Pos Y + Vel Y > 0
value = Var(6) + (Var(6)=1005)

[State 1000, 7]
type = ChangeState
trigger1 = AnimTime = 0
trigger1 = Anim = 4875
value = 4890

;---------------------------------------------------------------------------
; H - ACopy TYRA
[Statedef 4830]
type    = A
movetype= A
physics = N
velset = 0,0
ctrl = 0
anim = 4883
sprpriority = 1

[State 0, Width]
type = Width
trigger1 = MoveHit && NumTarget
edge = EnemyNear,const(size.ground.front) + EnemyNear,const(size.ground.back) + 4,0
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = AnimElem = 6
trigger2 = AnimElem = 10
anim = 4884
ID = 3000
pos = 22 + 16 * (AnimElemNo(0)<10),0
postype = p1
bindtime = 2
sprpriority = 3
ownpal = 1
removeongethit = 1
[State 0, Explod]
type = Explod
trigger1 = AnimElem = 16, 1
anim = 4885
ID = 3000
postype = p1
bindtime = 2
sprpriority = 5
ownpal = 1
removeongethit = 1

[State 0, MapSet]
type = MapSet
trigger1 = AnimElem = 6
trigger2 = AnimElem = 10
map = "GroundHitFX"
value = 24 + 15 * (AnimElemNo(0)<10)

[State 0, Snd Stompo]
type = PlaySnd
trigger1 = AnimElem = 6
trigger2 = AnimElem = 10
value = F7,0
[State 0, Snd Stompo]
type = PlaySnd
trigger1 = AnimElem = 6
trigger2 = AnimElem = 10
value = S4820,1
[State 0, Snd Swing]
type = PlaySnd
trigger1 = AnimElem = 15
value = F0,3
[State 0, Snd Shwing]
type = PlaySnd
trigger1 = AnimElem = 16
value = S4820,0
[State 0, Snd Voice]
type = PlaySnd
trigger1 = !Time
value = S4823,random%3
channel = 0

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 15
x = 0
y = 0
[State 0, VelAdd]
type = VelSet
trigger1 = AnimElemNo(0) = [3,11]
trigger1 = Vel X < 2.75
x = min(Vel X + 0.75,2.75)
[State 0, VelMul]
type = VelMul
trigger1 = AnimElemNo(0) = [12,14]
x = 0.75

[State 0, Var Damage Value]
type = VarSet
trigger1 = !MoveContact && !MoveReversed
v = 12
value = 12
[State 0, Var Damage Value]
type = VarSet
trigger1 = AnimElem = 17
v = 12
value = 128

[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 6
trigger2 = AnimElem = 10
attr = S,SP
hitflag = MAFD
guardflag = M
animtype = heavy
priority = 4,Hit
damage = Ceil(Var(12) * FVar(10) * (0.75 + 1.25 * (!MoveHit))),Ceil(Var(12)*const(BC.ChipLight))
guardpoints = floor((const(BC.GuardFlat) + Var(12)) * const(BC.GuardScaleMid))
pausetime = 6,6
sparkno = 10 + random%4 + (Var(10)=1) * 5
guard.sparkno = var(19)
sparkxy = -48+Floor(P2Dist X*0.5),-48+Floor(P2Dist Y*0.5)
hitsound = 1,3
guardsound = 5,0
ground.type = Low
ground.slidetime = 22
ground.hittime = 22
guard.hittime = 14
yaccel = 0.5
air.fall = 1
ground.velocity = -4,0
air.velocity = -1 + Vel X * -0.5,-5 + P2Dist Y * -0.01
fall.yvelocity = -8
p2facing = 1
getpower = floor(Var(12)*Root,Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Root,Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))
[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 17
attr = S,SP
hitflag = MAF
guardflag = M
animtype = heavy
priority = 4,Hit
damage = Ceil(Var(12) * FVar(10) * (0.75 + 1.25 * (!MoveHit))),Ceil(Var(12)*const(BC.ChipLight))
guardpoints = floor((const(BC.GuardFlat) + Var(12)) * const(BC.GuardScaleMid))
pausetime = 12,12+Root,Var(13)
guard.pausetime = 12,12
sparkno = ifelse(Var(10)=2||Parent,Var(11)>=2,30,10 + random%4 + (Var(10)=1) * 5)
guard.sparkno = var(19)
sparkxy = -40+Floor(P2Dist X*0.5),-44+Floor(P2Dist Y*0.5)
hitsound = 1,4
guardsound = 5,0
ground.type = High
ground.slidetime = 20
ground.hittime = 20
guard.hittime = 12
yaccel = 0.5
air.fall = 1
ground.velocity = -4
air.velocity = -5,-4
p2facing = 1
getpower = floor(Var(12)*Root,Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Root,Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))

[State 0, TargetState]
type = TargetState
triggerall = NumTarget
trigger1 = MoveHit && Var(8) = 1
trigger1 = Target,MoveType = H && Target,StateNo = 5080
value = 5355
ignorehitpause = 1
[State 0, Var Dire Counter Stack On]
type = ParentVarSet
triggerall = Var(8) = 1 && Var(10) = 2
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
v = 11
value = 3
ignorehitpause = 1
[State 0, ParentVarSet Counter Message]
type = ParentVarSet
triggerall = Var(8) = 1 && Var(10) = 2
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
v = 32
value = 63 + (Var(10) = 2) + (Var(10) = 3) * 10
ignorehitpause = 1
[State 0, TargetState]
type = TargetState
triggerall = NumTarget
trigger1 = MoveHit && Var(8) = 1
trigger1 = Target,MoveType = H && (Target,StateNo = [5000,5100))
trigger1 = AnimElemNo(0) >= 17
value = ifelse(EnemyNear,StateType=A,5340,5325)
ignorehitpause = 1
[State 0, Map Dire Trigger]
type = RootMapSet
triggerall = Var(8) = 1 && (Var(10) = 2 || Parent,Var(11) > 1)
triggerall = NumTarget && MoveHit
trigger1 = Target,MoveType = H
trigger1 = AnimElemNo(0) >= 17
map = "DireAct"
value = Root,Var(11) - 1
ignorehitpause = 1

[State 0, EnvShake]
type = VarSet
trigger1 = AnimElem = 6
trigger2 = AnimElem = 10
trigger3 = AnimElem = 16
v = 9
value = 3

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 18
movetype = I

[State 1000, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 4890

;---------------------------------------------------------------------------
; H - ACopy End
[Statedef 4890]
type    = A
movetype= A
physics = N
velset = 0,0
ctrl = 0
sprpriority = 5
anim = 666

[State 0, VarSet]
type = VarSet
trigger1 = !Time
v = 5
value = 0

[State 0, Explod]
type = Explod
trigger1 = !Time
anim = 4800
ID = 4000
pos = 8,0
postype = p1
sprpriority = 5
ownpal = 1
[State 0, MapSet]
type = ParentMapSet
trigger1 = !Time
map = "AsmosBusy"
value = 0

[State 0, Snd Transform]
type = PlaySnd
trigger1 = !Time
value = S910,1

[State 0, PosSet]
type = PosSet
trigger1 = !Time
y = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = !Time
value = 4090
elem = 38

[State 0, ChangeState]
type = ChangeState
trigger1 = !Time
value = 4000

;---------------------------------------------------------------------------
; H - GEMS
[Statedef 4900]
type    = A
movetype= I
physics = N
ctrl = 1
anim = 666

; 1 SP(3) - Mammon Medal (yellow coin) / Greed / Rapid / Elec FX
; 2 LK(2) - LeviaLock (green lock) / Envy / Homing / Burn FX
; 3 SK(4) - BelphegOrb (orange sphere) / Sloth / Lightning / Freeze FX
; 4 LP(1) - BeelzeBlood (blue sphere) / Gluttony / Fire

; Blu Map(LuckGems)&1 FX1
; Grn Map(LuckGems)&2 FX2
; Yel Map(LuckGems)&4 FX3
; Red Map(LuckGems)&8 FX4

[State 0, VarSet]
type = VarSet
trigger1 = 1
v = 6
value = !!(Root,Map(LuckGems)&(2**Var(5)))

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = NumHelper(990)
flag = noshadow
flag2 = invisible

[State 0, Turn]
type = Turn
trigger1 = Facing != 1 - 2 * (TeamSide=2)

[State 0, MapSet]
type = MapSet
triggerall = Map(XOff) != 0
trigger1 = 0;!Time
trigger2 = Root,Ctrl
trigger3 = Root,StateNo = 3005
trigger4 = Root,StateNo = 2500
trigger5 = Root,StateNo = 2600
map = "XOff"
value = 0
[State 0, MapSet]
type = MapSet
triggerall = Map(YOff) != 0
trigger1 = 0;!Time
trigger2 = Root,Ctrl
trigger3 = Root,StateNo = 3005
trigger4 = Root,StateNo = 2500
trigger5 = Root,StateNo = 2600
map = "YOff"
value = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = Anim != 950 + 10 * Var(5)
value = 950 + 10 * Var(5)

[State 0, PalFX]
type = PalFX
trigger1 = Var(5) = 0
time = 1
add = floor((Root,Map(LuckGemFX1)%16777216)*0.0000152587890625*0.75*Var(6)*max(0,Cos((GameTime+16*Var(5))*0.1))),floor((Root,Map(LuckGemFX1)%65536)*0.00390625*0.75*Var(6)*max(0,Cos((GameTime+16*Var(5))*0.1))),floor((Root,Map(LuckGemFX1)%256)*0.75*Var(6)*max(0,Cos((GameTime+16*Var(5))*0.1)))
mul = 192+64*Var(6)-32*Var(6)*max(0,Cos((GameTime+16*Var(5))*0.1)),192+64*Var(6)-32*Var(6)*max(0,Cos((GameTime+16*Var(5))*0.1)),192+64*Var(6)-32*Var(6)*max(0,Cos((GameTime+16*Var(5))*0.1))
[State 0, PalFX]
type = PalFX
trigger1 = Var(5) = 1
time = 1
add = floor((Root,Map(LuckGemFX2)%16777216)*0.0000152587890625*0.75*Var(6)*max(0,Cos((GameTime+16*Var(5))*0.1))),floor((Root,Map(LuckGemFX2)%65536)*0.00390625*0.75*Var(6)*max(0,Cos((GameTime+16*Var(5))*0.1))),floor((Root,Map(LuckGemFX2)%256)*0.75*Var(6)*max(0,Cos((GameTime+16*Var(5))*0.1)))
mul = 192+64*Var(6)-32*Var(6)*max(0,Cos((GameTime+16*Var(5))*0.1)),192+64*Var(6)-32*Var(6)*max(0,Cos((GameTime+16*Var(5))*0.1)),192+64*Var(6)-32*Var(6)*max(0,Cos((GameTime+16*Var(5))*0.1))
[State 0, PalFX]
type = PalFX
trigger1 = Var(5) = 2
time = 1
add = floor((Root,Map(LuckGemFX3)%16777216)*0.0000152587890625*0.75*Var(6)*max(0,Cos((GameTime+16*Var(5))*0.1))),floor((Root,Map(LuckGemFX3)%65536)*0.00390625*0.75*Var(6)*max(0,Cos((GameTime+16*Var(5))*0.1))),floor((Root,Map(LuckGemFX3)%256)*0.75*Var(6)*max(0,Cos((GameTime+16*Var(5))*0.1)))
mul = 192+64*Var(6)-32*Var(6)*max(0,Cos((GameTime+16*Var(5))*0.1)),192+64*Var(6)-32*Var(6)*max(0,Cos((GameTime+16*Var(5))*0.1)),192+64*Var(6)-32*Var(6)*max(0,Cos((GameTime+16*Var(5))*0.1))
[State 0, PalFX]
type = PalFX
trigger1 = Var(5) = 3
time = 1
add = floor((Root,Map(LuckGemFX4)%16777216)*0.0000152587890625*0.75*Var(6)*max(0,Cos((GameTime+16*Var(5))*0.1))),floor((Root,Map(LuckGemFX4)%65536)*0.00390625*0.75*Var(6)*max(0,Cos((GameTime+16*Var(5))*0.1))),floor((Root,Map(LuckGemFX4)%256)*0.75*Var(6)*max(0,Cos((GameTime+16*Var(5))*0.1)))
mul = 192+64*Var(6)-32*Var(6)*max(0,Cos((GameTime+16*Var(5))*0.1)),192+64*Var(6)-32*Var(6)*max(0,Cos((GameTime+16*Var(5))*0.1)),192+64*Var(6)-32*Var(6)*max(0,Cos((GameTime+16*Var(5))*0.1))

[State 0, MapSet]
type = MapSet
trigger1 = !Map(XOff)
map = "SprPrio"
value = 1 + floor(6 * Cos((Root,Map(LuckGemRot) + Var(5) * 160) * 0.01))

[State 0, Explod Underglow]
type = Explod
triggerall = !NumHelper(990)
triggerall = Time%3
triggerall = EnemyNear,Var(54) = 0
trigger1 = Var(6)
anim = Anim + 1 + floor(0.5*(Time%4))
postype = p1
sprpriority = -3 + floor(0.5*(Time%4)) + Map(SprPrio)
supermovetime = 666
ownpal = 1
[State 0, Explod Underglow]
type = Explod
triggerall = !NumHelper(990)
triggerall = Time%3 || Map(XOff)
triggerall = EnemyNear,Var(54) = 0
trigger1 = 1;!Var(6)
anim = Anim + 4
postype = p1
sprpriority = ifelse(Map(XOff),Map(SprPrio)-1,-3 + floor(0.5*(Time%4)) + Map(SprPrio))
supermovetime = 666
removetime = 1 + 4 * !!Map(XOff)
ownpal = 1

[State 0, Map XOff Reset]
type = MapSet
trigger1 = Var(5) = 0 && Root,StateNo != 205
trigger2 = Var(5) = 2 && Root,StateNo != 210 && Root,StateNo != 410
trigger3 = Var(5) = 3 && Root,StateNo != 310
map = "XOff"
value = 0
[State 0, MapSet]
type = MapSet
trigger1 = Var(5) = 0 && Root,StateNo != 205
trigger2 = Var(5) = 2 && Root,StateNo != 210 && Root,StateNo != 410
trigger3 = Var(5) = 3 && Root,StateNo != 310
map = "YOff"
value = 0

; = = = 6LP
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 0 ; GRATTONI
trigger1 = Root,StateNo = 205 && Root,AnimElemNo(0) = 1
map = "XOff"
value = -8
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 0 ; GRATTONI
trigger1 = Root,StateNo = 205 && Root,AnimElemNo(0) = 1
map = "YOff"
value = -48
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 0 ; GRATTONI
trigger1 = Root,StateNo = 205 && Root,AnimElemNo(0) = 2
map = "XOff"
value = -16
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 0 ; GRATTONI
trigger1 = Root,StateNo = 205 && Root,AnimElemNo(0) = 2
map = "YOff"
value = -52
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 0 ; GRATTONI
trigger1 = Root,StateNo = 205 && Root,AnimElemNo(0) = 3
map = "XOff"
value = 32
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 0 ; GRATTONI
trigger1 = Root,StateNo = 205 && Root,AnimElemNo(0) = 3
map = "YOff"
value = -56
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 0 ; GRATTONI
trigger1 = Root,StateNo = 205 && Root,AnimElemNo(0) = [4,5]
map = "XOff"
value = 60
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 0 ; GRATTONI
trigger1 = Root,StateNo = 205 && Root,AnimElemNo(0) = [4,5]
map = "YOff"
value = -54
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 0 ; GRATTONI
trigger1 = Root,StateNo = 205 && Root,AnimElemNo(0) = 5
map = "PosMul"
value = 1.0
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 0 ; GRATTONI
trigger1 = Root,StateNo = 205 && Root,AnimElemNo(0) = [4,5]
map = "SprPrio"
value = 5
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 0 ; GRATTONI
trigger1 = Root,StateNo = 205 && Root,AnimElem = 7
trigger2 = Root,PrevStateNo = 205 && Root,NumTarget && Root,Time = 1
map = "PosMul"
value = 0
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 0 ; GRATTONI
trigger1 = Root,StateNo = 205 && Root,AnimElem = 7
trigger2 = Root,PrevStateNo = 205 && Root,NumTarget && Root,Time = 1
map = "XOff"
value = 0
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 0 ; GRATTONI
trigger1 = Root,StateNo = 205 && Root,AnimElem = 7
trigger2 = Root,PrevStateNo = 205 && Root,NumTarget && Root,Time = 1
map = "YOff"
value = 0

; = = = 5SP
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 2 ; CAVITAS
trigger1 = Root,StateNo = 210 && Root,AnimElemNo(0) <= 2 && Root,AnimTime
map = "XOff"
value = 12
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 2 ; CAVITAS
trigger1 = Root,StateNo = 210 && Root,AnimElemNo(0) <= 2 && Root,AnimTime
map = "YOff"
value = -64
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 2 ; CAVITAS
trigger1 = Root,StateNo = 210 && Root,AnimElemNo(0) <= 2 && Root,AnimTime
map = "PosMul"
value = 0.2 * Root,Time
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 2 ; CAVITAS
trigger1 = Root,StateNo = 210 && Root,AnimElemNo(0) = 3
map = "XOff"
value = 32
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 2 ; CAVITAS
trigger1 = Root,StateNo = 210 && Root,AnimElemNo(0) = 3
map = "YOff"
value = -56
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 2 ; CAVITAS
trigger1 = Root,StateNo = 210 && Root,AnimElemNo(0) = [3,4]
map = "PosMul"
value = 0.9
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 2 ; CAVITAS
trigger1 = Root,StateNo = 210 && Root,AnimElemNo(0) <= 3 && Root,AnimTime
map = "SprPrio"
value = -1
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 2 ; CAVITAS
trigger1 = Root,StateNo = 210 && Root,AnimElemNo(0) = 4
map = "XOff"
value = 64
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 2 ; CAVITAS
trigger1 = Root,StateNo = 210 && Root,AnimElemNo(0) = 4
map = "YOff"
value = -60
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 2 ; CAVITAS
trigger1 = Root,StateNo = 210 && Root,AnimElemNo(0) = [4,5]
map = "SprPrio"
value = 5
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 2 ; CAVITAS
trigger1 = Root,StateNo = 210 && Root,AnimElemNo(0) = 5
trigger1 = !Root,MoveContact || Root,Var(8)
map = "PosMul"
value = 1.0
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 2 ; CAVITAS
trigger1 = Root,StateNo = 210 && Root,AnimElem = 5 && !Root,MoveContact
map = "XOff"
value = 64
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 2 ; CAVITAS
trigger1 = Root,StateNo = 210 && Root,AnimElem = 5 && !Root,MoveContact
map = "YOff"
value = -56
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 2 ; CAVITAS
trigger1 = Root,StateNo = 210 && Root,AnimElem = 5, 1 && !Root,MoveContact
map = "XOff"
value = 48
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 2 ; CAVITAS
trigger1 = Root,StateNo = 210 && Root,AnimElem = 5, 1 && !Root,MoveContact
map = "YOff"
value = -46
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 2 ; CAVITAS
trigger1 = Root,StateNo = 210 && Root,AnimElem = 5, 2 && !Root,MoveContact
map = "XOff"
value = 24
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 2 ; CAVITAS
trigger1 = Root,StateNo = 210 && Root,AnimElem = 5, 2 && !Root,MoveContact
map = "YOff"
value = -40
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 2 ; CAVITAS
trigger1 = Root,StateNo = 210 && Root,AnimElem = 5, 3 && !Root,MoveContact
trigger2 = Root,StateNo = 210 && Root,AnimElemNo(0) = 5 && Root,Var(8)
map = "XOff"
value = 4
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 2 ; CAVITAS
trigger1 = Root,StateNo = 210 && Root,AnimElem = 5, 3 && !Root,MoveContact
trigger2 = Root,StateNo = 210 && Root,AnimElemNo(0) = 5 && Root,Var(8)
map = "YOff"
value = -36
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 2 ; CAVITAS
trigger1 = Root,StateNo = 210 && Root,AnimElem = 6
trigger2 = Root,StateNo = 210 && Root,Var(8) = 12
map = "PosMul"
value = 0
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 2 ; CAVITAS
trigger1 = Root,StateNo = 210 && Root,AnimElem = 6
trigger2 = Root,StateNo = 210 && Root,Var(8) = 12
map = "XOff"
value = 0
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 2 ; CAVITAS
trigger1 = Root,StateNo = 210 && Root,AnimElem = 6
trigger2 = Root,StateNo = 210 && Root,Var(8) = 12
map = "YOff"
value = 0
[State 0, MapSet]
type = VelSet
triggerall = Var(5) = 2 ; CAVITAS
trigger1 = Root,StateNo = 210 && Root,AnimElem = 6
trigger2 = Root,StateNo = 210 && Root,Var(8) = 12
x = -8 * Root,Facing
y = -1

; = = = 5SK
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 3 ; SUROSA
trigger1 = Root,StateNo = 310 && Root,AnimElemNo(0) <= 3 && Root,AnimTime
map = "XOff"
value = 12
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 3 ; SUROSA
trigger1 = Root,StateNo = 310 && Root,AnimElemNo(0) <= 3 && Root,AnimTime
map = "YOff"
value = -4
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 3 ; SUROSA
trigger1 = Root,StateNo = 310 && Root,AnimElemNo(0) <= 3 && Root,AnimTime
map = "PosMul"
value = 0.2 * Root,Time
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 3 ; SUROSA
trigger1 = Root,StateNo = 310 && Root,AnimElemNo(0) = [4,5]
map = "SprPrio"
value = 5
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 3 ; SUROSA
trigger1 = Root,StateNo = 310 && Root,AnimElemNo(0) = [4,5]
trigger1 = !Root,MoveContact || Root,Var(8)
map = "PosMul"
value = 1.0
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 3 ; SUROSA
trigger1 = Root,StateNo = 310 && Root,AnimElem = 4 && !Root,MoveContact
map = "XOff"
value = 40
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 3 ; SUROSA
trigger1 = Root,StateNo = 310 && Root,AnimElem = 4 && !Root,MoveContact
map = "YOff"
value = -16
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 3 ; SUROSA
trigger1 = Root,StateNo = 310 && Root,AnimElem = 4, 1 && !Root,MoveContact
trigger2 = Root,StateNo = 310 && Root,AnimElemNo(0) = 4 && Root,Var(8)
map = "XOff"
value = 60
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 3 ; SUROSA
trigger1 = Root,StateNo = 310 && Root,AnimElem = 4, 1 && !Root,MoveContact
trigger2 = Root,StateNo = 310 && Root,AnimElemNo(0) = 4 && Root,Var(8)
map = "YOff"
value = -44
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 3 ; SUROSA
trigger1 = Root,StateNo = 310 && Root,AnimElem = 5 && !Root,MoveContact
map = "XOff"
value = 56
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 3 ; SUROSA
trigger1 = Root,StateNo = 310 && Root,AnimElem = 5 && !Root,MoveContact
map = "YOff"
value = -64
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 3 ; SUROSA
trigger1 = Root,StateNo = 310 && Root,AnimElem = 5, 1 && !Root,MoveContact
map = "XOff"
value = 52
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 3 ; SUROSA
trigger1 = Root,StateNo = 310 && Root,AnimElem = 5, 1 && !Root,MoveContact
map = "YOff"
value = -76
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 3 ; SUROSA
trigger1 = Root,StateNo = 310 && Root,AnimElem = 5, 2 && !Root,MoveContact
trigger2 = Root,StateNo = 310 && Root,AnimElemNo(0) = 5 && Root,Var(8)
map = "XOff"
value = 44
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 3 ; SUROSA
trigger1 = Root,StateNo = 310 && Root,AnimElem = 5, 2 && !Root,MoveContact
trigger2 = Root,StateNo = 310 && Root,AnimElemNo(0) = 5 && Root,Var(8)
map = "YOff"
value = -82
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 3 ; SUROSA
trigger1 = Root,StateNo = 310 && Root,AnimElem = 6
trigger2 = Root,StateNo = 310 && Root,Var(8) = 12
map = "PosMul"
value = 0
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 3 ; SUROSA
trigger1 = Root,StateNo = 310 && Root,AnimElem = 6
trigger2 = Root,StateNo = 310 && Root,Var(8) = 12
map = "XOff"
value = 0
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 3 ; SUROSA
trigger1 = Root,StateNo = 310 && Root,AnimElem = 6
trigger2 = Root,StateNo = 310 && Root,Var(8) = 12
map = "YOff"
value = 0
[State 0, MapSet]
type = VelSet
triggerall = Var(5) = 3 ; SUROSA
trigger1 = Root,StateNo = 310 && Root,AnimElem = 6
trigger2 = Root,StateNo = 310 && Root,Var(8) = 12
x = -3 * Root,Facing
y = -2

; = = = 4SP
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 2 ; CAVITAS
trigger1 = Root,StateNo = 410 && Root,AnimElemNo(0) <= 3 && Root,AnimTime
map = "XOff"
value = 30
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 2 ; CAVITAS
trigger1 = Root,StateNo = 410 && Root,AnimElemNo(0) <= 3 && Root,AnimTime
map = "YOff"
value = -36
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 2 ; CAVITAS
trigger1 = Root,StateNo = 410 && Root,AnimElemNo(0) <= 3 && Root,AnimTime
map = "PosMul"
value = 0.2 * Root,Time
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 2 ; CAVITAS
trigger1 = Root,StateNo = 410 && Root,AnimElemNo(0) = [4,5]
map = "SprPrio"
value = 5
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 2 ; CAVITAS
trigger1 = Root,StateNo = 410 && Root,AnimElemNo(0) = [4,5]
trigger1 = !Root,MoveContact || Root,Var(8)
map = "PosMul"
value = 1.0
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 2 ; CAVITAS
trigger1 = Root,StateNo = 410 && Root,AnimElem = 4 && !Root,MoveContact
map = "XOff"
value = 36
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 2 ; CAVITAS
trigger1 = Root,StateNo = 410 && Root,AnimElem = 4 && !Root,MoveContact
map = "YOff"
value = -44
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 2 ; CAVITAS
trigger1 = Root,StateNo = 410 && Root,AnimElem = 4, 1 && !Root,MoveContact
trigger2 = Root,StateNo = 410 && Root,AnimElemNo(0) = 4 && Root,Var(8) = [1,12]
map = "XOff"
value = 38
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 2 ; CAVITAS
trigger1 = Root,StateNo = 410 && Root,AnimElem = 4, 1 && !Root,MoveContact
trigger2 = Root,StateNo = 410 && Root,AnimElemNo(0) = 4 && Root,Var(8) = [1,12]
map = "YOff"
value = -68
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 2 ; CAVITAS
trigger1 = Root,StateNo = 410 && Root,AnimElem = 5 && !Root,MoveContact
map = "XOff"
value = 32
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 2 ; CAVITAS
trigger1 = Root,StateNo = 410 && Root,AnimElem = 5 && !Root,MoveContact
map = "YOff"
value = -96
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 2 ; CAVITAS
trigger1 = Root,StateNo = 410 && Root,AnimElem = 5, 1 && !Root,MoveContact
trigger2 = Root,StateNo = 410 && Root,AnimElemNo(0) = 5 && Root,Var(8) = [1,12]
map = "XOff"
value = 28
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 2 ; CAVITAS
trigger1 = Root,StateNo = 410 && Root,AnimElem = 5, 1 && !Root,MoveContact
trigger2 = Root,StateNo = 410 && Root,AnimElemNo(0) = 5 && Root,Var(8) = [1,12]
map = "YOff"
value = -116
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 2 ; CAVITAS
trigger1 = Root,StateNo = 410 && Root,AnimElem = 6 && !Root,MoveContact
trigger2 = Root,StateNo = 410 && Root,Var(8) = 12
map = "PosMul"
value = 0.0
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 2 ; CAVITAS
trigger1 = Root,StateNo = 410 && Root,AnimElem = 6 && !Root,MoveContact
trigger2 = Root,StateNo = 410 && Root,Var(8) = 12
map = "XOff"
value = 0
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 2 ; CAVITAS
trigger1 = Root,StateNo = 410 && Root,AnimElem = 6 && !Root,MoveContact
trigger2 = Root,StateNo = 410 && Root,Var(8) = 12
map = "YOff"
value = 0
[State 0, MapSet]
type = VelSet
triggerall = Var(5) = 2 ; CAVITAS
trigger1 = Root,StateNo = 410 && Root,AnimElem = 6 && !Root,MoveContact
trigger2 = Root,StateNo = 410 && Root,Var(8) = 12
x = -2 * Root,Facing
y = -6

; = = = 4SK
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 3 ; SUROSA
trigger1 = Root,StateNo = 510 && Root,AnimElemNo(0) <= 3 && Root,AnimTime
map = "XOff"
value = 2
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 3 ; SUROSA
trigger1 = Root,StateNo = 510 && Root,AnimElemNo(0) <= 3 && Root,AnimTime
map = "YOff"
value = -72
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 3 ; SUROSA
trigger1 = Root,StateNo = 510 && Root,AnimElemNo(0) <= 3 && Root,AnimTime
map = "PosMul"
value = 0.2 * Root,Time
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 3 ; SUROSA
trigger1 = Root,StateNo = 510 && Root,AnimElemNo(0) = 4
map = "XOff"
value = 64
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 3 ; SUROSA
trigger1 = Root,StateNo = 510 && Root,AnimElemNo(0) = 4
map = "YOff"
value = -16
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 3 ; SUROSA
trigger1 = Root,StateNo = 510 && Root,AnimElemNo(0) = [4,5]
map = "SprPrio"
value = 5
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 3 ; SUROSA
trigger1 = Root,StateNo = 510 && Root,AnimElem = 4
map = "PosMul"
value = 0.5
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 3 ; SUROSA
trigger1 = Root,StateNo = 510 && Root,AnimElemNo(0) = 5
trigger1 = !Root,MoveContact || Root,Var(8)
trigger2 = Root,StateNo = 510 && Root,AnimElem = 4, 1
map = "PosMul"
value = 1.0
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 3 ; SUROSA
trigger1 = Root,StateNo = 510 && Root,AnimElem = 5 && !Root,MoveContact
map = "XOff"
value = 72
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 3 ; SUROSA
trigger1 = Root,StateNo = 510 && Root,AnimElem = 5 && !Root,MoveContact
map = "YOff"
value = -4
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 3 ; SUROSA
trigger1 = Root,StateNo = 510 && Root,AnimElem = 5, 1 && !Root,MoveContact
map = "XOff"
value = 72
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 3 ; SUROSA
trigger1 = Root,StateNo = 510 && Root,AnimElem = 5, 1 && !Root,MoveContact
map = "YOff"
value = -4
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 3 ; SUROSA
trigger1 = Root,StateNo = 510 && Root,AnimElem = 5, 2 && !Root,MoveContact
trigger2 = Root,StateNo = 510 && Root,AnimElemNo(0) = 5 && Root,Var(8)
map = "XOff"
value = 72
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 3 ; SUROSA
trigger1 = Root,StateNo = 510 && Root,AnimElem = 5, 2 && !Root,MoveContact
trigger2 = Root,StateNo = 510 && Root,AnimElemNo(0) = 5 && Root,Var(8)
map = "YOff"
value = -4
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 3 ; SUROSA
trigger1 = Root,StateNo = 510 && Root,AnimElem = 6
trigger2 = Root,StateNo = 510 && Root,Var(8) = 12
map = "PosMul"
value = 0
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 3 ; SUROSA
trigger1 = Root,StateNo = 510 && Root,AnimElem = 6
trigger2 = Root,StateNo = 510 && Root,Var(8) = 12
map = "XOff"
value = 0
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 3 ; SUROSA
trigger1 = Root,StateNo = 510 && Root,AnimElem = 6
trigger2 = Root,StateNo = 510 && Root,Var(8) = 12
map = "YOff"
value = 0
[State 0, MapSet]
type = VelSet
triggerall = Var(5) = 3 ; SUROSA
trigger1 = Root,StateNo = 510 && Root,AnimElem = 6
trigger2 = Root,StateNo = 510 && Root,Var(8) = 12
x = -1 * Root,Facing
y = -2

; = = = j.SP
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 0 ; GRATTONI
trigger1 = Root,StateNo = 610 && Root,AnimElemNo(0) <= 2 && Root,AnimTime
map = "XOff"
value = -8
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 0 ; GRATTONI
trigger1 = Root,StateNo = 610 && Root,AnimElemNo(0) <= 2 && Root,AnimTime
map = "YOff"
value = -90
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 0 ; GRATTONI
trigger1 = Root,StateNo = 610 && Root,AnimElemNo(0) <= 2 && Root,AnimTime
map = "PosMul"
value = 0.2 * Root,Time
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 0 ; GRATTONI
trigger1 = Root,StateNo = 610 && Root,AnimElemNo(0) <= 3 && Root,AnimTime
map = "SprPrio"
value = -1
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 0 ; GRATTONI
trigger1 = Root,StateNo = 610 && Root,AnimElemNo(0) = [4,6]
map = "SprPrio"
value = 5
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 0 ; GRATTONI
trigger1 = Root,StateNo = 610 && Root,AnimElemNo(0) = [3,6]
trigger1 = !Root,MoveContact || Root,Var(8)
map = "PosMul"
value = 1.0
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 0 ; GRATTONI
trigger1 = Root,StateNo = 610 && Root,AnimElem = 3 && !Root,MoveContact
map = "XOff"
value = 12
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 0 ; GRATTONI
trigger1 = Root,StateNo = 610 && Root,AnimElem = 3 && !Root,MoveContact
map = "YOff"
value = -90
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 0 ; GRATTONI
trigger1 = Root,StateNo = 610 && Root,AnimElem = 3, 1 && !Root,MoveContact
map = "XOff"
value = 32
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 0 ; GRATTONI
trigger1 = Root,StateNo = 610 && Root,AnimElem = 3, 1 && !Root,MoveContact
map = "YOff"
value = -84
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 0 ; GRATTONI
trigger1 = Root,StateNo = 610 && Root,AnimElem = 4 && !Root,MoveContact
map = "XOff"
value = 46
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 0 ; GRATTONI
trigger1 = Root,StateNo = 610 && Root,AnimElem = 4 && !Root,MoveContact
map = "YOff"
value = -70
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 0 ; GRATTONI
trigger1 = Root,StateNo = 610 && Root,AnimElem = 4, 1 && !Root,MoveContact
trigger2 = Root,StateNo = 610 && Root,AnimElemNo(0) = 4 && Root,Var(8)
map = "XOff"
value = 48
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 0 ; GRATTONI
trigger1 = Root,StateNo = 610 && Root,AnimElem = 4, 1 && !Root,MoveContact
trigger2 = Root,StateNo = 610 && Root,AnimElemNo(0) = 4 && Root,Var(8)
map = "YOff"
value = -52
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 0 ; GRATTONI
trigger1 = Root,StateNo = 610 && Root,AnimElem = 5 && !Root,MoveContact
map = "XOff"
value = 44
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 0 ; GRATTONI
trigger1 = Root,StateNo = 610 && Root,AnimElem = 5 && !Root,MoveContact
map = "YOff"
value = -32
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 0 ; GRATTONI
trigger1 = Root,StateNo = 610 && Root,AnimElem = 5, 1 && !Root,MoveContact
trigger2 = Root,StateNo = 610 && Root,AnimElemNo(0) = 5 && Root,Var(8)
map = "XOff"
value = 32
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 0 ; GRATTONI
trigger1 = Root,StateNo = 610 && Root,AnimElem = 5, 1 && !Root,MoveContact
trigger2 = Root,StateNo = 610 && Root,AnimElemNo(0) = 5 && Root,Var(8)
map = "YOff"
value = -16
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 0 ; GRATTONI
trigger1 = Root,StateNo = 610 && Root,AnimElem = 6 && !Root,MoveContact
map = "XOff"
value = 2
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 0 ; GRATTONI
trigger1 = Root,StateNo = 610 && Root,AnimElem = 6 && !Root,MoveContact
map = "YOff"
value = -12
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 0 ; GRATTONI
trigger1 = Root,StateNo = 610 && Root,AnimElem = 6, 1 && !Root,MoveContact
trigger2 = Root,StateNo = 610 && Root,AnimElemNo(0) = 6 && Root,Var(8)
map = "XOff"
value = -24
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 0 ; GRATTONI
trigger1 = Root,StateNo = 610 && Root,AnimElem = 6, 1 && !Root,MoveContact
trigger2 = Root,StateNo = 610 && Root,AnimElemNo(0) = 6 && Root,Var(8)
map = "YOff"
value = -24
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 0 ; GRATTONI
trigger1 = Root,StateNo = 610 && Root,AnimElem = 7
trigger2 = Root,StateNo = 610 && Root,Var(8) = 12
map = "PosMul"
value = 0
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 0 ; GRATTONI
trigger1 = Root,StateNo = 610 && Root,AnimElem = 7
trigger2 = Root,StateNo = 610 && Root,Var(8) = 12
map = "XOff"
value = 0
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 0 ; GRATTONI
trigger1 = Root,StateNo = 610 && Root,AnimElem = 7
trigger2 = Root,StateNo = 610 && Root,Var(8) = 12
map = "YOff"
value = 0
[State 0, MapSet]
type = VelSet
triggerall = Var(5) = 0 ; GRATTONI
trigger1 = Root,StateNo = 610 && Root,AnimElem = 7
trigger2 = Root,StateNo = 610 && Root,Var(8) = 12
x = -4 * Root,Facing
y = -4

; = = = j.SK
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 1 ; ENVIA
trigger1 = Root,StateNo = 710 && Root,AnimElemNo(0) <= 2 && Root,AnimTime
map = "XOff"
value = -16
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 1 ; ENVIA
trigger1 = Root,StateNo = 710 && Root,AnimElemNo(0) <= 2 && Root,AnimTime
map = "YOff"
value = -4
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 1 ; ENVIA
trigger1 = Root,StateNo = 710 && Root,AnimElemNo(0) <= 2 && Root,AnimTime
map = "PosMul"
value = 0.2 * Root,Time
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 1 ; ENVIA
trigger1 = Root,StateNo = 710 && Root,AnimElem = 3
map = "XOff"
value = 16
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 1 ; ENVIA
trigger1 = Root,StateNo = 710 && Root,AnimElem = 3
map = "YOff"
value = -8
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 1 ; ENVIA
trigger1 = Root,StateNo = 710 && Root,AnimElem = 3, 1
map = "XOff"
value = 40
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 1 ; ENVIA
trigger1 = Root,StateNo = 710 && Root,AnimElem = 3, 1
map = "YOff"
value = -12
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 1 ; ENVIA
trigger1 = Root,StateNo = 710 && Root,AnimElemNo(0) <= 4 && Root,AnimTime
map = "SprPrio"
value = 5
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 1 ; ENVIA
trigger1 = Root,StateNo = 710 && Root,AnimElemNo(0) = [3,4]
trigger1 = !Root,MoveContact || Root,Var(8)
map = "PosMul"
value = 1.0
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 1 ; ENVIA
trigger1 = Root,StateNo = 710 && Root,AnimElem = 4 && !Root,MoveContact
map = "XOff"
value = 58
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 1 ; ENVIA
trigger1 = Root,StateNo = 710 && Root,AnimElem = 4 && !Root,MoveContact
map = "YOff"
value = -20
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 1 ; ENVIA
trigger1 = Root,StateNo = 710 && Root,AnimElem = 4, 1 && !Root,MoveContact
map = "XOff"
value = 68
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 1 ; ENVIA
trigger1 = Root,StateNo = 710 && Root,AnimElem = 4, 1 && !Root,MoveContact
map = "YOff"
value = -44
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 1 ; ENVIA
trigger1 = Root,StateNo = 710 && Root,AnimElem = 4, 2 && !Root,MoveContact
trigger2 = Root,StateNo = 710 && Root,AnimElemNo(0) = 4 && Root,Var(8)
map = "XOff"
value = 60
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 1 ; ENVIA
trigger1 = Root,StateNo = 710 && Root,AnimElem = 4, 2 && !Root,MoveContact
trigger2 = Root,StateNo = 710 && Root,AnimElemNo(0) = 4 && Root,Var(8)
map = "YOff"
value = -64
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 1 ; ENVIA
trigger1 = Root,StateNo = 710 && Root,AnimElem = 5
trigger2 = Root,StateNo = 710 && Root,Var(8) = 12
map = "PosMul"
value = 0
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 1 ; ENVIA
trigger1 = Root,StateNo = 710 && Root,AnimElem = 5
trigger2 = Root,StateNo = 710 && Root,Var(8) = 12
map = "XOff"
value = 0
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 1 ; ENVIA
trigger1 = Root,StateNo = 710 && Root,AnimElem = 5
trigger2 = Root,StateNo = 710 && Root,Var(8) = 12
map = "YOff"
value = 0
[State 0, MapSet]
type = VelSet
triggerall = Var(5) = 1 ; ENVIA
trigger1 = Root,StateNo = 710 && Root,AnimElem = 5
trigger2 = Root,StateNo = 710 && Root,Var(8) = 12
x = -3 * Root,Facing
y = -5

; = = = 236P
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 2 ; CAVITAS
trigger1 = Root,StateNo = 1050 && Root,AnimElemNo(0) <= 7 && Root,AnimTime
map = "XOff"
value = 54
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 2 ; CAVITAS
trigger1 = Root,StateNo = 1050 && Root,AnimElemNo(0) <= 7 && Root,AnimTime
map = "YOff"
value = -46
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 2 ; CAVITAS
trigger1 = Root,StateNo = 1050 && Root,AnimElemNo(0) <= 7 && Root,AnimTime
map = "PosMul"
value = min(1.0,1.1 ** Root,Time * 0.05)
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 2 ; CAVITAS
trigger1 = Root,StateNo = 1050 && Root,AnimElemNo(0) <= 7 && Root,AnimTime
map = "SprPrio"
value = 1
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 2 ; CAVITAS
trigger1 = Root,StateNo = 1050 && Root,AnimElem = 8
map = "PosMul"
value = 0
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 2 ; CAVITAS
trigger1 = Root,StateNo = 1050 && Root,AnimElem = 8
map = "XOff"
value = 0
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 2 ; CAVITAS
trigger1 = Root,StateNo = 1050 && Root,AnimElem = 8
map = "YOff"
value = 0
[State 0, MapSet]
type = VelSet
triggerall = Var(5) = 2 ; CAVITAS
trigger1 = Root,StateNo = 1050 && Root,AnimElem = 8
x = 6 * Root,Facing

; = = = QCB+PK CHARGE
[State 0, MapSet]
type = MapSet
triggerall = Root,StateNo = 1700 && Root,AnimElemNo(0) = [1,2] && Root,AnimTime
trigger1 = Var(5) = (Root,Var(5))
map = "PosMul"
value = Map(PosMul) * 0.5
[State 0, MapSet]
type = MapSet
triggerall = Root,StateNo = 1700 && Root,AnimElem = 3
trigger1 = Var(5) = (Root,Var(5))
map = "PosMul"
value = 1
[State 0, MapSet]
type = MapSet
triggerall = Root,StateNo = 1700 && Root,AnimElemNo(0) = [1,5] && Root,AnimTime
trigger1 = Var(5) = (Root,Var(5))
map = "XOff"
value = -10
[State 0, MapSet]
type = MapSet
triggerall = Root,StateNo = 1700 && Root,AnimElemNo(0) = [1,5] && Root,AnimTime
trigger1 = Var(5) = (Root,Var(5))
map = "YOff"
value = -98
[State 0, MapSet]
type = MapSet
triggerall = Root,StateNo = 1700 && Root,AnimElemNo(0) = [3,5]
trigger1 = Var(5) = (Root,Var(5))
map = "SprPrio"
value = -1

; = = = QCB+PK RELEASE
[State 0, MapSet]
type = MapSet
triggerall = Root,StateNo = 1705 && Root,AnimElemNo(0) = [1,2] && Root,AnimTime
trigger1 = Var(5) = (Root,Var(5))
map = "PosMul"
value = Map(PosMul) * 0.5
[State 0, MapSet]
type = MapSet
triggerall = Root,StateNo = 1705 && Root,AnimElemNo(0) = [1,3] && Root,AnimTime
trigger1 = Var(5) = (Root,Var(5))
map = "XOff"
value = -10
[State 0, MapSet]
type = MapSet
triggerall = Root,StateNo = 1705 && Root,AnimElemNo(0) = [1,3] && Root,AnimTime
trigger1 = Var(5) = (Root,Var(5))
map = "YOff"
value = -98
[State 0, MapSet]
type = MapSet
triggerall = Root,StateNo = 1705 && Root,AnimElemNo(0) = [3,5]
trigger1 = Var(5) = (Root,Var(5))
map = "SprPrio"
value = -1
[State 0, MapSet]
type = MapSet
triggerall = Root,StateNo = 1705 && Root,AnimElemNo(0) = 4
trigger1 = Var(5) = (Root,Var(5))
map = "XOff"
value = -11
[State 0, MapSet]
type = MapSet
triggerall = Root,StateNo = 1705 && Root,AnimElemNo(0) = 4 
trigger1 = Var(5) = (Root,Var(5))
map = "YOff"
value = -91
[State 0, MapSet]
type = MapSet
triggerall = Root,StateNo = 1705 && Root,AnimElemNo(0) = 5
trigger1 = Var(5) = (Root,Var(5))
map = "SprPrio"
value = 5
[State 0, MapSet]
type = MapSet
triggerall = Root,StateNo = 1705 && Root,AnimElem = 5
trigger1 = Var(5) = (Root,Var(5))
map = "XOff"
value = -8
[State 0, MapSet]
type = MapSet
triggerall = Root,StateNo = 1705 && Root,AnimElem = 5
trigger1 = Var(5) = (Root,Var(5))
map = "YOff"
value = -64
[State 0, MapSet]
type = MapSet
triggerall = Root,StateNo = 1705 && Root,AnimElem = 5, 1
trigger1 = Var(5) = (Root,Var(5))
map = "XOff"
value = 12
[State 0, MapSet]
type = MapSet
triggerall = Root,StateNo = 1705 && Root,AnimElem = 5, 1
trigger1 = Var(5) = (Root,Var(5))
map = "YOff"
value = -52
[State 0, MapSet]
type = MapSet
triggerall = Root,StateNo = 1705 && Root,AnimElemNo(0) = [3,7]
trigger1 = Var(5) = (Root,Var(5))
map = "PosMul"
value = 1
[State 0, MapSet]
type = MapSet
triggerall = Root,StateNo = 1705 && Root,AnimElemNo(0) >= 6
trigger1 = Var(5) = (Root,Var(5))
map = "XOff"
value = 48
[State 0, MapSet]
type = MapSet
triggerall = Root,StateNo = 1705 && Root,AnimElemNo(0) >= 6
trigger1 = Var(5) = (Root,Var(5))
map = "YOff"
value = -56

; = = = 22K
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 3 ; SUROSA
trigger1 = Root,StateNo = 1800 && Root,AnimElemNo(0) <= 4 && Root,AnimTime
map = "XOff"
value = -2
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 3 ; SUROSA
trigger1 = Root,StateNo = 1800 && Root,AnimElemNo(0) <= 4 && Root,AnimTime
map = "YOff"
value = -100
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 3 ; SUROSA
trigger1 = Root,StateNo = 1800 && Root,AnimElemNo(0) <= 4 && Root,AnimTime
map = "PosMul"
value = min(1.0,0.05 * Root,Time)
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 3 ; SUROSA
trigger1 = Root,StateNo = 1800 && Root,AnimElemNo(0) <= 7 && Root,AnimTime
map = "SprPrio"
value = 3
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 3 ; SUROSA
trigger1 = Root,StateNo = 1800 && Root,AnimElemNo(0) = [5,7]
map = "PosMul"
value = min(1.0,0.05 * Root,Time)
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 3 ; SUROSA
trigger1 = Root,StateNo = 1800 && Root,AnimElemNo(0) = 5
map = "XOff"
value = 0.1
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 3 ; SUROSA
trigger1 = Root,StateNo = 1800 && Root,AnimElemNo(0) = 5
map = "YOff"
value = -96
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 3 ; SUROSA
trigger1 = Root,StateNo = 1800 && Root,AnimElem = 6
map = "XOff"
value = 16
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 3 ; SUROSA
trigger1 = Root,StateNo = 1800 && Root,AnimElem = 6
map = "YOff"
value = -44
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 3 ; SUROSA
trigger1 = Root,StateNo = 1800 && Root,AnimElem = 6, 1
map = "XOff"
value = 10
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 3 ; SUROSA
trigger1 = Root,StateNo = 1800 && Root,AnimElem = 6, 1
map = "YOff"
value = -16
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 3 ; SUROSA
trigger1 = Root,StateNo = 1800 && Root,AnimElemNo(0) = 7
map = "XOff"
value = 10
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 3 ; SUROSA
trigger1 = Root,StateNo = 1800 && Root,AnimElemNo(0) = 7
map = "YOff"
value = -4
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 3 ; SUROSA
trigger1 = Root,StateNo = 1800 && Root,AnimElem = 8
map = "PosMul"
value = 0
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 3 ; SUROSA
trigger1 = Root,StateNo = 1800 && Root,AnimElem = 8
map = "XOff"
value = 0
[State 0, MapSet]
type = MapSet
triggerall = Var(5) = 3 ; SUROSA
trigger1 = Root,StateNo = 1800 && Root,AnimElem = 8
map = "YOff"
value = 0
[State 0, MapSet]
type = VelSet
triggerall = Var(5) = 3 ; SUROSA
trigger1 = Root,StateNo = 1800 && Root,AnimElem = 8
x = 1 * Root,Facing
y = -4

; = = = QCF+K
[State 0, MapSet]
type = MapSet
triggerall = Root,StateNo = 1900 && Root,AnimElem = 1
trigger1 = Var(5) = 1 ; ENVIA
map = "PosMul"
value = 1
[State 0, MapSet]
type = MapSet
triggerall = Root,StateNo = 1900 && Root,AnimElemNo(0) = 1
trigger1 = Var(5) = 1 ; ENVIA
map = "XOff"
value = 8
[State 0, MapSet]
type = MapSet
triggerall = Root,StateNo = 1900 && Root,AnimElemNo(0) = 1
trigger1 = Var(5) = 1 ; ENVIA
map = "YOff"
value = -64

; = = = 214214PP
[State 0, MapSet]
type = MapSet
trigger1 = Root,StateNo = 2610 && Root,AnimElemNo(0) < 3 && Var(5) = 0 && Root,AnimTime
trigger2 = Root,StateNo = 2610 && Root,AnimElemNo(0) < 4 && Var(5) = 1 && Root,AnimTime
trigger3 = Root,StateNo = 2610 && Root,AnimElemNo(0) < 5 && Var(5) = 2 && Root,AnimTime
trigger4 = Root,StateNo = 2610 && Root,AnimElemNo(0) < 6 && Var(5) = 3 && Root,AnimTime
map = "XOff"
value = 36 + (12 * Sin((Root,Map(LuckGemRot) + Var(5) * 150) * 0.0005 * Root,Time))
[State 0, MapSet]
type = MapSet
trigger1 = Root,StateNo = 2610 && Root,AnimElemNo(0) < 3 && Var(5) = 0 && Root,AnimTime
trigger2 = Root,StateNo = 2610 && Root,AnimElemNo(0) < 4 && Var(5) = 1 && Root,AnimTime
trigger3 = Root,StateNo = 2610 && Root,AnimElemNo(0) < 5 && Var(5) = 2 && Root,AnimTime
trigger4 = Root,StateNo = 2610 && Root,AnimElemNo(0) < 6 && Var(5) = 3 && Root,AnimTime
map = "YOff"
value = -48 - (16 * Cos((Root,Map(LuckGemRot) + Var(5) * 150) * 0.0005 * Root,Time))
[State 0, MapSet]
type = MapSet
trigger1 = Root,StateNo = 2610 && Root,AnimElemNo(0) < 3 && Var(5) = 0 && Root,AnimTime
trigger2 = Root,StateNo = 2610 && Root,AnimElemNo(0) < 4 && Var(5) = 1 && Root,AnimTime
trigger3 = Root,StateNo = 2610 && Root,AnimElemNo(0) < 5 && Var(5) = 2 && Root,AnimTime
trigger4 = Root,StateNo = 2610 && Root,AnimElemNo(0) < 6 && Var(5) = 3 && Root,AnimTime
map = "PosMul"
value = min(1.0,0.025 * Root,Time)
[State 0, MapSet]
type = MapSet
trigger1 = Root,StateNo = 2610 && Root,AnimElemNo(0) < 3 && Var(5) = 0 && Root,AnimTime
trigger2 = Root,StateNo = 2610 && Root,AnimElemNo(0) < 4 && Var(5) = 1 && Root,AnimTime
trigger3 = Root,StateNo = 2610 && Root,AnimElemNo(0) < 5 && Var(5) = 2 && Root,AnimTime
trigger4 = Root,StateNo = 2610 && Root,AnimElemNo(0) < 6 && Var(5) = 3 && Root,AnimTime
map = "SprPrio"
value = 2 + floor(4 * Cos((Root,Map(LuckGemRot) + Var(5) * 150) * 0.0005 * Root,Time))
[State 0, MapSet]
type = MapSet
trigger1 = Root,StateNo = 2610 && Root,AnimElem = 3 && Var(5) = 0
trigger2 = Root,StateNo = 2610 && Root,AnimElem = 4 && Var(5) = 1
trigger3 = Root,StateNo = 2610 && Root,AnimElem = 5 && Var(5) = 2
trigger4 = Root,StateNo = 2610 && Root,AnimElem = 6 && Var(5) = 3
map = "PosMul"
value = 0
[State 0, MapSet]
type = MapSet
trigger1 = Root,StateNo = 2610 && Root,AnimElem = 3 && Var(5) = 0
trigger2 = Root,StateNo = 2610 && Root,AnimElem = 4 && Var(5) = 1
trigger3 = Root,StateNo = 2610 && Root,AnimElem = 5 && Var(5) = 2
trigger4 = Root,StateNo = 2610 && Root,AnimElem = 6 && Var(5) = 3
map = "XOff"
value = 0
[State 0, MapSet]
type = MapSet
trigger1 = Root,StateNo = 2610 && Root,AnimElem = 3 && Var(5) = 0
trigger2 = Root,StateNo = 2610 && Root,AnimElem = 4 && Var(5) = 1
trigger3 = Root,StateNo = 2610 && Root,AnimElem = 5 && Var(5) = 2
trigger4 = Root,StateNo = 2610 && Root,AnimElem = 6 && Var(5) = 3
map = "YOff"
value = 0
[State 0, MapSet]
type = VelSet
trigger1 = Root,StateNo = 2610 && Root,AnimElem = 3 && Var(5) = 0
trigger2 = Root,StateNo = 2610 && Root,AnimElem = 4 && Var(5) = 1
trigger3 = Root,StateNo = 2610 && Root,AnimElem = 5 && Var(5) = 2
trigger4 = Root,StateNo = 2610 && Root,AnimElem = 6 && Var(5) = 3
x = -8 * Root,Facing
y = -4 + (Time%5) * 2

; = = = 214214KK
[State 0, MapSet]
type = MapSet
trigger1 = Root,StateNo = 2700 && Root,AnimElemNo(0) <= 8 && Root,AnimTime
map = "XOff"
value = 28 + (12 * Sin((Root,Map(LuckGemRot) + Var(5) * 150) * 0.01))
[State 0, MapSet]
type = MapSet
trigger1 = Root,StateNo = 2700 && Root,AnimElemNo(0) <= 8 && Root,AnimTime
map = "YOff"
value = -48 + (32 * Cos((Root,Map(LuckGemRot) + Var(5) * 150) * 0.01))
[State 0, MapSet]
type = MapSet
trigger1 = Root,StateNo = 2700 && Root,AnimElemNo(0) <= 8 && Root,AnimTime
map = "PosMul"
value = min(1.0,0.05 * Root,Time)
[State 0, MapSet]
type = MapSet
trigger1 = Root,StateNo = 2700 && Root,AnimElem = 9
map = "PosMul"
value = 0
[State 0, MapSet]
type = MapSet
trigger1 = Root,StateNo = 2700 && Root,AnimElem = 9
map = "XOff"
value = 0
[State 0, MapSet]
type = MapSet
trigger1 = Root,StateNo = 2700 && Root,AnimElem = 9
map = "YOff"
value = 0
[State 0, MapSet]
type = VelSet
trigger1 = Root,StateNo = 2700 && Root,AnimElem = 9
x = -8 * Root,Facing
y = -1

; = = = WINPOSE 1
[State 0, MapSet]
type = MapSet
trigger1 = Root,StateNo = 180
map = "XOff"
value = -24 + (16 * Sin((Root,Map(LuckGemRot) + Var(5) * 150) * 0.01))
[State 0, MapSet]
type = MapSet
trigger1 = Root,StateNo = 180
map = "YOff"
value = -80 + (4 * Cos((Root,Map(LuckGemRot) + Var(5) * 150) * 0.01))
[State 0, MapSet]
type = MapSet
trigger1 = Root,StateNo = 180
map = "PosMul"
value = min(1.0,0.005 * Root,Time)


; = = = WINPOSE 2
[State 0, MapSet]
type = MapSet
trigger1 = Root,StateNo = [181,182]
map = "XOff"
value = (16 + Root,Time * 0.5) * Sin((Root,Map(LuckGemRot) + Var(5) * 150) * 0.01)
[State 0, MapSet]
type = MapSet
trigger1 = Root,StateNo = [181,182]
map = "YOff"
value = -32 - (Root,Time * 0.1) ** 3 + (4 * Cos((Root,Map(LuckGemRot) + Var(5) * 150) * 0.01))
[State 0, MapSet]
type = MapSet
trigger1 = Root,StateNo = [181,182]
map = "PosMul"
value = min(1.0,0.005 * Root,Time)

[State 0, PosAdd]
type = PosAdd
trigger1 = EnemyNear,Var(54) = 0
trigger1 = !Map(XOff)
x = (RootDist X + 32 * Sin((Root,Map(LuckGemRot) + Var(5) * 150) * 0.01)) * Map(PosMul)
y = (RootDist Y + Map(YOff) - 32 - 16 * (Root,StateType!=C) + (8 + Root,Vel Y * 2) * Cos((Root,Map(LuckGemRot) + Var(5) * 150) * 0.01)) * Map(PosMul)
[State 0, PosAdd]
type = PosAdd
trigger1 = EnemyNear,Var(54) = 0
trigger1 = Map(XOff)
x = (RootDist X + Map(XOff) * Root,Facing * Facing) * Map(PosMul)
y = (RootDist Y + Map(YOff)) * Map(PosMul)

[State 0, Map PosMul Average]
type = MapSet
trigger1 = 1
map = "PosMul"
value = (0.075+Map(PosMul))*0.5 + Root,Map(LuckGemSpd) * 0.01
[State 0, Map PosMul Average]
type = MapSet
trigger1 = Map(XOff)
map = "PosMul"
value = (0.25+Map(PosMul))*0.5 + Root,Map(LuckGemSpd) * 0.01

[State 0, VelMul]
type = VelMul
trigger1 = !Map(XOff)
x = 1.0 - 0.5 * Map(PosMul)
y = 1.0 - 0.5 * Map(PosMul)

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = Map(SprPrio)

[State 0, DestroySelf]
type = DestroySelf
trigger1 = NumHelper(4900 + Var(5)) > 1
[State 0, Helper]
type = Helper
trigger1 = Var(5) = (Root,Var(5))
trigger1 = Root,StateNo = 1705 && Root,AnimElem = 7
name = "Gemothy"
ID = 4900 + Var(5)
stateno = 4910 + Var(5)
postype = p1
ownpal = 1
[State 0, Helper]
type = Helper
trigger1 = Var(5) = 1
trigger1 = Root,StateNo = 1900 && Root,AnimElem = 2
name = "Gemothy"
ID = 4901
stateno = 4920
postype = p1
ownpal = 1
[State 0, ChangeState]
type = ChangeState
trigger1 = Root,MoveType = H
trigger1 = Root,StateNo != [120,160) && Root,StateType = A
trigger2 = RoundState > 2
trigger2 = Root,Life <= 0 || !Root,Win
value = 4950

;---------------------------------------------------------------------------
; H - GEM 1st G
[Statedef 4901]
type    = A

[State 0, VarSet]
type = VarSet
trigger1 = 1
v = 5
value = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = 1
value = 4900

;---------------------------------------------------------------------------
; H - GEM 1st R
[Statedef 4902]
type    = A

[State 0, VarSet]
type = VarSet
trigger1 = 1
v = 5
value = 2

[State 0, ChangeState]
type = ChangeState
trigger1 = 1
value = 4900

;---------------------------------------------------------------------------
; H - GEM 1st B
[Statedef 4903]
type    = A

[State 0, VarSet]
type = VarSet
trigger1 = 1
v = 5
value = 3

[State 0, ChangeState]
type = ChangeState
trigger1 = 1
value = 4900

;---------------------------------------------------------------------------
; H - GEM Proj
[Statedef 4910]
type    = A
movetype= A
physics = N
anim = 1714 + 10 * Var(5)
ctrl = 0

[State 0, Turn]
type = Turn
trigger1 = !Time
trigger1 = Facing != Root,Facing

[State 0, PosAdd]
type = PosAdd
trigger1 = !Time
x = -(RootDist X + 40)
y = -(Pos Y + 56)

[State 0, VarSet]
type = VarSet
trigger1 = !Time
trigger1 = Var(5) = 3
v = 6
value = 4
[State 0, VarAdd]
type = VarAdd
triggerall = Var(6) > 0
trigger1 = MoveContact
v = 6
value = -1 - (MoveGuarded && Var(6) >= 3)

[State 0, Counter Check Reset]
type = VarSet
trigger1 = !MoveContact
v = 10
value = Root,Var(10) * !Root,Var(51)
ignorehitpause = 1
[State 0, Scaling Reset]
type = VarSet
trigger1 = !MoveContact
fv = 10
value = max(Root,FVar(8) + (Var(10)=1)*const(BC.CounterBonus),const(BC.ScalingMin))
ignorehitpause = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = !Time
value = ,NA,SA,HA,NT,ST,HT
time = 666
[State 0, HitOverride]
type = HitOverride
trigger1 = !Time
attr = SCA,NP,SP,HP
stateno = 4950
time = 666

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
flag2 = invisible
ignorehitpause = 1

[State 0, Map Consume]
type = RootMapAdd
trigger1 = !Time
trigger1 = !!(Root,Map(LuckGems)&2**Var(5))
map = "LuckGems"
value = -(2**Var(5))

[State 0, Explod Blast FX1]
type = Explod
trigger1 = Time < 2
trigger1 = Var(5) = 2
anim = 1737
pos = 0,0
postype = p1
vel = 2+random%7,-3+random%7
accel = random*-0.001,(-500+random)*-0.001
sprpriority = -3+random%7
ownpal = 1
[State 0, Explod Blast FX1]
type = Explod
trigger1 = Time < 2
trigger1 = Var(5) = 2
anim = 1737
pos = 0,0
postype = p1
vel = 2+random%7,-3+random%7
accel = random*-0.001,(-500+random)*-0.001
accel = 0,0
sprpriority = -3+random%7
ownpal = 1
[State 0, Explod Blast FX1]
type = Explod
trigger1 = Time < 2
trigger1 = Var(5) = 2
anim = 1737
pos = 0,0
postype = p1
vel = 2+random%7,-3+random%7
accel = random*-0.001,(-500+random)*-0.001
accel = 0,0
sprpriority = -3+random%7
ownpal = 1

[State 0, Explod Gem]
type = Explod
trigger1 = 1
anim = 950 + 10 * Var(5)
postype = p1
pos = 0,0
removetime = 1
sprpriority = 3
shadow = -1
ownpal = 0
ignorehitpause = 1
[State 0, Explod]
type = Explod
trigger1 = Var(5) != 3
trigger1 = GameTime%3 = 0
anim = Anim
ID = Anim
postype = p1
pos = 0,0
bindtime = 2
removetime = -2
sprpriority = -3 + (GameTime%2) * 4
ignorehitpause = 1
[State 0, Explod Trail]
type = Explod
trigger1 = Time%2
anim = 953 + 10 * Var(5)
pos = 0,0
postype = p1
sprpriority = -4
ownpal = 1
ignorehitpause = 1
[State 0, Explod]
type = Explod
trigger1 = Var(5) != 3
anim = 1715 + 10 * Var(5)
pos = 0,0
postype = p1
removetime = 1
sprpriority = -3 + (GameTime%3) * 3
ownpal = 1
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = Var(5) = 3
trigger1 = GameTime%3 = 0
anim = Anim
ID = Anim
postype = p1
pos = min(20,Time) * Sin(GameTime*0.33),min(20,Time) * Cos(GameTime*0.33)
bindtime = 2
removetime = -2
sprpriority = -3 + (GameTime%2) * 4
ignorehitpause = 1
[State 0, Explod]
type = Explod
trigger1 = Var(5) = 3
anim = 1715 + 10 * Var(5)
pos = min(20,Time) * Sin(GameTime*0.33),min(20,Time) * Cos(GameTime*0.33)
postype = p1
removetime = 1
sprpriority = -3 + (GameTime%3) * 3
ownpal = 1
ignorehitpause = 1
[State 0, Explod]
type = Explod
trigger1 = Var(5) = 3
trigger1 = GameTime%3 = 0
anim = Anim
ID = Anim
postype = p1
pos = min(20,Time) * Sin(GameTime*0.33 + 16),min(20,Time) * Cos(GameTime*0.33 + 16)
bindtime = 2
removetime = -2
sprpriority = -3 + (GameTime%2) * 4
ignorehitpause = 1
[State 0, Explod]
type = Explod
trigger1 = Var(5) = 3
anim = 1715 + 10 * Var(5)
pos = min(20,Time) * Sin(GameTime*0.33 + 16),min(20,Time) * Cos(GameTime*0.33 + 16)
postype = p1
removetime = 1
sprpriority = -3 + (GameTime%3) * 3
ownpal = 1
ignorehitpause = 1

[State 0, PosAdd]
type = PosAdd
trigger1 = Var(5) = 0
trigger1 = Time
x = (RootDist X + 48 * Cos(Time*0.1)) * (0.05 * Min(20,Time))
y = (RootDist Y - 48 + 32 * Sin(Time*0.1)) * (0.05 * Min(20,Time))
[State 0, PosAdd]
type = PosAdd
trigger1 = MoveContact = 1
trigger1 = Var(6) > 0
x = -Vel X*0.5

[State 0, Explod]
type = Explod
triggerall = GameTime%2
trigger1 = MoveContact = 1
trigger2 = MoveContact && NumTarget
anim = 1711
pos = 0,0
postype = p1
facing = -1+2*(random%2)
vfacing = -1+2*(random%2)
vel = -Var(6)*1.5 + (random % (Var(6)*3+1)),-Var(6)*1.5 + (random % (Var(6)*3+1))
sprpriority = 1
ownpal = 1
ignorehitpause = 1

[State 0, Snd Release]
type = PlaySnd
trigger1 = !Time
value = S1705,Var(5)
channel = 1

[State 0, VelSet]
type = VelSet
trigger1 = Time < 48 && Var(5) = 1
x = 5 * sin(Time*0.1)
y = -5 * cos(Time*0.1)
[State 0, PosAdd]
type = PosAdd
trigger1 = Time < 48 && Var(5) = 1
y = -0.1
[State 0, VelAdd]
type = VelAdd
trigger1 = Time >= 48 && Var(5) = 1
x = -0.1

[State 0, VelSet]
type = PosAdd
trigger1 = Time
trigger1 = Var(5) = 2
x = 8 - (Time*1)
[State 0, VarSet]
type = RootVarSet
trigger1 = !Time
trigger1 = Var(5) = 2
v = 9
value = 6

[State 0, VelSet]
type = VelAdd
trigger1 = Time < 4
trigger1 = Var(5) = 3
x = min(1,max(0.2,P2Dist X * 0.01))
[State 0, VelMul]
type = VelMul
trigger1 = Var(5) = 3
x = 0.9

[State 0, VarSet]
type = VarSet
trigger1 = !Time
trigger1 = Var(5) != 3
v = 12
value = 128
[State 0, VarSet]
type = VarSet
trigger1 = !Time
trigger1 = Var(5) = 3
v = 12
value = 32

[State 0, HitDef]
type = HitDef
trigger1 = !MoveContact && !MoveReversed
trigger1 = Var(5) != 3
attr = S,SP
hitflag = MAF
guardflag = MA
animtype = medium
priority = 3,Hit
damage = Ceil(Var(12) * FVar(10)),Ceil(Var(12)*const(BC.ChipLight))
guardpoints = floor((32 + Var(12)) * 0.5)
pausetime = 4, 12 + Root,Var(13)
guard.pausetime = 4,12
sparkno = -1
guard.sparkno = 40
sparkxy = 0,0
hitsound = -1
guardsound = 5,1
ground.type = Low
ground.slidetime = 12
ground.hittime = 12
guard.hittime = 8
air.hittime = 12
yaccel = 0.5
fall = !(Var(5)=0||Var(10)=2||Parent,Var(11)>1)
air.fall = 1
ground.velocity = -2 - Vel X * 0.5,-3 * !(Var(5)=0||Var(10)=2||Parent,Var(11)>1)
air.velocity = -2 - Vel X * 0.25,-1
getpower = floor(Var(12)*Root,Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Root,Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
[State 0, HitDef]
type = HitDef
trigger1 = Time > 8
trigger1 = Var(6) && Var(5) = 3
attr = S,SP
hitflag = MAF
guardflag = MA
animtype = medium
priority = 3,Hit
damage = Ceil(Var(12) * FVar(10) * (0.75 + 1.25 * (!MoveHit||!NumTarget))),Ceil(Var(12)*const(BC.ChipLight))
guardpoints = floor((32 + Var(12)) * 0.5)
pausetime = 6, 12 + Root,Var(13)
guard.pausetime = 6,12
sparkno = -1;10 + random%4 + (Var(10)=1) * 5
guard.sparkno = 40
sparkxy = 0,0;Floor(P2Dist X*0.5),-16+Floor(P2Dist Y*0.5)
hitsound = -1;1,2
guardsound = 5,1
ground.type = Low
ground.slidetime = 12
ground.hittime = 12
guard.hittime = 8
air.hittime = 12
yaccel = 0.5
fall = (Var(6)=1)
air.fall = 1
ground.velocity = -2 + (P2Dist X * 0.15),-4 * (Var(6)=1)
air.velocity = -1 + (P2Dist X * 0.075),-2 - P2Dist Y * 0.01
guard.velocity = -1
getpower = floor(Var(12)*Root,Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Root,Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0

[State 0, Snd Pop]
type = PlaySnd
trigger1 = Var(8) = 1 && Target,StateNo = [5000,6000)
trigger1 = NumTarget && MoveHit
value = F1,10
ignorehitpause = 1
[State 0, Snd Hit]
type = PlaySnd
triggerall = Var(8) = 1
trigger1 = !NumTarget && MoveHit
trigger1 = TeamSide = 1
trigger2 = NumTarget && MoveHit
value = F1,2 + (Var(6)<=1) + (Var(6)=2)
ignorehitpause = 1

[State 0, Explod HitSpark]
type = Explod
trigger1 = Var(8) = 1 && Target,StateNo = [5000,6000)
trigger1 = NumTarget && MoveHit
anim = F ifelse((Var(10)=2||Root,Var(11)>=2)&&Var(6)<=1&&Var(5)!=2,30,10 + random%4)
pos = 0,-P2Dist Y
postype = p2
pausemovetime = 666
supermovetime = 666
sprpriority = 9
ontop = 1
ownpal = 1
ignorehitpause = 1

[State 0, Var Dire Counter Stack On]
type = RootVarSet
triggerall = Var(8) = 1 && Target,StateNo = [5000,6000)
triggerall = NumTarget && MoveHit
trigger1 = Var(10) = 2
trigger1 = HitCount = 1
v = 11
value = 3; - (Var(5)=2)
ignorehitpause = 1

[State 0, HitAdd]
type = RootVarAdd
trigger1 = Var(8) = 1 && Target,StateNo = [5000,6000)
trigger1 = NumTarget && MoveHit
v = 51
value = 1
ignorehitpause = 1

[State 0, VarSet Counter Message]
type = RootVarSet
triggerall = Var(8) = 1 && Target,StateNo = [5000,6000)
triggerall = NumTarget && MoveHit
trigger1 = Var(10)
trigger1 = HitCount = 1
v = 32
value = 63 + (Var(10) = 2) + (Var(10) = 3) * 10
ignorehitpause = 1

[State 0, Dampening S]
type = RootVarSet
trigger1 = Var(8) = 1 && Target,StateNo = [5000,6000)
trigger1 = NumTarget && MoveHit
trigger1 = HitCount = 1
fv = 8
value = Root,FVar(8)*(const(BC.ScalingH1) + const(BC.ScalingH2) * ifelse(Root,FVar(8)<1,1-Root,FVar(8),0))
ignorehitpause = 1

[State 0, TargetState]
type = TargetState
triggerall = Var(8) = 1 && Target,StateNo = [5000,6000)
triggerall = NumTarget && MoveHit
trigger1 = Root,Var(11) >= 2
trigger1 = Var(6) <= 1
value = 5325
ignorehitpause = 1
[State 0, TargetState]
type = TargetState
triggerall = Var(8) = 1 && Target,StateNo = [5000,6000)
triggerall = NumTarget && MoveHit
trigger1 = Var(5) = 2
value = ifelse(EnemyNear,StateType=A,5390,5340)
ignorehitpause = 1

[State 0, Map Dire Trigger]
type = RootMapSet
triggerall = Var(8) = 1 && Target,StateNo = [5000,6000)
triggerall = NumTarget && MoveHit
trigger1 = Var(10) = 2 && Var(5) = 2 || Root,Var(11) >= 2
trigger1 = Var(6) <= 1
map = "DireAct"
value = Root,Var(11) - 1
ignorehitpause = 1

[State 0, VarSet]
type = RootMapSet
trigger1 = Var(8) = 1 && Target,StateNo = [5000,6000)
trigger1 = NumTarget && MoveHit
map = "FXColor"
value = Root,Map(LuckGemFX1) * (Var(5)=0) + Root,Map(LuckGemFX2) * (Var(5)=1) + Root,Map(LuckGemFX3) * (Var(5)=2) + Root,Map(LuckGemFX4) * (Var(5)=3)
ignorehitpause = 1
[State 0, TargetState]
type = RootMapSet
trigger1 = Var(8) = 1 && Target,StateNo = [5000,6000)
trigger1 = NumTarget && MoveHit
map = "HitFX"
value = 1
ignorehitpause = 1
redirectid = Target,ID

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = FrontEdgeDist < -32
trigger1 = Var(5) = 2
trigger2 = BackEdgeDist < -32
trigger2 = Var(5) = 1
trigger3 = MoveContact && NumTarget
trigger3 = Var(5) = 0 || Var(5) = 1
trigger4 = MoveReversed
trigger5 = Time = 160 && Var(5) = 0
trigger6 = Var(6) <= 0 && Var(5) = 3
trigger7 = Time = 96 && Var(5) = 3
trigger8 = Time = 8 && Var(5) = 2
movetype = I

[State 0, StopSnd]
type = StopSnd
trigger1 = MoveType = I
trigger1 = Var(5) = 3
channel = 1

[State 0, Helper]
type = Helper
trigger1 = Root,StateNo = [2000,3000)
name = "Gemothy"
postype = p1
ID = 4900 + Var(5)
stateno = 4900 + Var(5)
supermovetime = -1
ownpal = 1
[State 0, ChangeState]
type = DestroySelf
trigger1 = Root,StateNo = [2000,3000)

[State 0, ChangeState]
type = ChangeState
trigger1 = MoveType = I
trigger2 = EnemyNear,Var(51)
trigger3 = Root,MoveType = H && Root,StateNo != [120,160)
value = 4950
ctrl = 0

;---------------------------------------------------------------------------
; H - GEM Proj G
[Statedef 4911]
type    = A

[State 0, VarSet]
type = VarSet
trigger1 = 1
v = 5
value = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = 1
value = 4910

;---------------------------------------------------------------------------
; H - GEM Proj R
[Statedef 4912]
type    = A

[State 0, VarSet]
type = VarSet
trigger1 = 1
v = 5
value = 2

[State 0, ChangeState]
type = ChangeState
trigger1 = 1
value = 4910

;---------------------------------------------------------------------------
; H - GEM Proj B
[Statedef 4913]
type    = A

[State 0, VarSet]
type = VarSet
trigger1 = 1
v = 5
value = 3

[State 0, ChangeState]
type = ChangeState
trigger1 = 1
value = 4910

;---------------------------------------------------------------------------
; H - GEM LockSmash
[Statedef 4920]
type    = A
movetype= A
physics = N
anim = 1910 + (Root,Var(5))
ctrl = 0

[State 0, Turn]
type = Turn
trigger1 = !Time
trigger1 = Facing != Root,Facing

[State 0, VarSet]
type = VarSet
trigger1 = !Time
v = 5
value = 1
[State 0, VarSet]
type = VarSet
trigger1 = !Time
v = 6
value = Root,Var(5)
[State 0, VarSet]
type = VarSet
trigger1 = !Time
v = 7
value = !!(Root,Map(LuckGems)&2)

[State 0, Counter Check Reset]
type = VarSet
trigger1 = !MoveContact
v = 10
value = Root,Var(10) * !Root,Var(51)
ignorehitpause = 1
[State 0, Scaling Reset]
type = VarSet
trigger1 = !MoveContact
fv = 10
value = max(Root,FVar(8) + (Var(10)=1)*const(BC.CounterBonus),const(BC.ScalingMin))
ignorehitpause = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = !Time
value = SCA
time = 666

[State 0, VelSet]
type = VelSet
trigger1 = !Time
x = max(2,min(6 + 6 * Var(6),p2dist x * 0.08 + enemynear,vel x * -0.5))
y = -4 - 2.5 * Var(6)
[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 5
y = 2

[State 0, VelAdd]
type = VelAdd
trigger1 = AnimElemNo(0) = [2,7)
y = 0.5 + 2 * (AnimElemNo(0)>=5)
[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 11
x = rootdist x * 0.1
y = -4

[State 0, VelMul]
type = VelMul
trigger1 = AnimElemNo(0) = [3,6]
x = 0.9
[State 0, VelMul]
type = VelMul
trigger1 = AnimElemNo(0) >= 11
y = 0.75

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 7
x = 0
y = 0
[State 0, PosSet]
type = PosSet
trigger1 = AnimElem = 7
y = 0

[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 12
y = -32

[State 0, MapSet]
type = MapSet
trigger1 = AnimElem = 6, 2 && !Var(6)
trigger2 = AnimElem = 6, 8 && Var(6)
map = "GroundHitFX"
value = 2

[State 0, Var EnvShake]
type = RootVarSet
trigger1 = AnimElem = 6, 2 && !Var(6)
trigger2 = AnimElem = 6, 8 && Var(6)
v = 9
value = 8

[State 0, Snd Swingo]
type = PlaySnd
trigger1 = AnimElem = 5
value = F0,4
[State 0, Snd Stompo]
type = PlaySnd
trigger1 = AnimElem = 7
value = F7,1

[State 0, Var Damage Value]
type = VarSet
trigger1 = !Time
v = 12
value = 136

[State 0, HitDef]
type = HitDef
triggerall = Root,StateNo = 1900
trigger1 = !MoveContact && !MoveReversed
attr = S,SA
hitflag = MAFD
guardflag = H
animtype = heavy
priority = 3,Hit
damage = Ceil(Var(12) * FVar(10)),Ceil(Var(12)*const(BC.ChipMid))
guardpoints = floor((32 + Var(12)) * 0.5)
pausetime = 4, 12
guard.pausetime = 4, 4
sparkno = -1
guard.sparkno = 40
hitsound = -1
guardsound = 5,1
ground.type = Low
ground.slidetime = 12
ground.hittime = 12
guard.hittime = 8
yaccel = 0.5
fall = 1
ground.velocity = -1,8
air.velocity = -1,8
down.velocity = -1,-3
fall.yvelocity = -1 - 3 * Var(7)
getpower = floor(Var(12)*Root,Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Root,Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
[State 0, HitDef]
type = HitDef
triggerall = Root,StateNo != 1900
trigger1 = !MoveContact && !MoveReversed
attr = S,SA
hitflag = MAFD
guardflag = M
animtype = heavy
priority = 3,Hit
damage = Ceil(Var(12) * FVar(10)),Ceil(Var(12)*const(BC.ChipMid))
guardpoints = floor((32 + Var(12)) * 0.5)
pausetime = 4, 12
guard.pausetime = 4, 4
sparkno = -1
guard.sparkno = 40
hitsound = -1
guardsound = 5,1
ground.type = Low
ground.slidetime = 12
ground.hittime = 12
guard.hittime = 8
yaccel = 0.5
fall = 1
ground.velocity = -1,8
air.velocity = -1,8
down.velocity = -1,-3
fall.yvelocity = -1 - 3 * Var(7)
getpower = floor(Var(12)*Root,Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Root,Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0

[State 0, Snd Hit]
type = PlaySnd
triggerall = Var(8) = 1
trigger1 = !NumTarget && MoveHit
trigger1 = TeamSide = 1
trigger2 = NumTarget && MoveHit
value = F1,4
ignorehitpause = 1

[State 0, Explod HitSpark]
type = Explod
trigger1 = Var(8) = 1 && Target,StateNo = [5000,6000)
trigger1 = NumTarget && MoveHit
anim = F ifelse(Var(10)=2||Root,Var(11)>=2,30,10 + random%4 + 5 * (Var(10)=1))
pos = 0,-P2Dist Y
postype = p2
pausemovetime = 666
supermovetime = 666
sprpriority = 9
ontop = 1
ownpal = 1
ignorehitpause = 1

[State 0, Var Dire Counter Stack On]
type = RootVarSet
triggerall = Var(8) = 1 && Target,StateNo = [5000,6000)
triggerall = NumTarget && MoveHit
trigger1 = Var(10) = 2
v = 11
value = 3
ignorehitpause = 1

[State 0, HitAdd]
type = RootVarAdd
trigger1 = Var(8) = 1 && Target,StateNo = [5000,6000)
trigger1 = NumTarget && MoveHit
v = 51
value = 1
ignorehitpause = 1

[State 0, VarSet Counter Message]
type = RootVarSet
triggerall = Var(8) = 1 && Target,StateNo = [5000,6000)
triggerall = NumTarget && MoveHit
trigger1 = Var(10)
v = 32
value = 63 + (Var(10) = 2) + (Var(10) = 3) * 10
ignorehitpause = 1

[State 0, Dampening S]
type = RootVarSet
trigger1 = Var(8) = 1 && Target,StateNo = [5000,6000)
trigger1 = NumTarget && MoveHit
fv = 8
value = Root,FVar(8)*(const(BC.ScalingH1) + const(BC.ScalingH2) * ifelse(Root,FVar(8)<1,1-Root,FVar(8),0))
ignorehitpause = 1

[State 0, TargetState]
type = TargetState
triggerall = Var(8) = 1
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5080) && Target,StateNo%10 = 0
;trigger1 = Var(10) = 2 || Root,Var(11) >= 2 || EnemyNear,StateType = A || Var(7)
value = ifelse(Root,Var(11)>=2,5345,5355)
ignorehitpause = 1

[State 0, VarAdd Dire Reduce]
type = RootVarAdd
triggerall = Var(8) = 1 && Target,StateNo = [5000,6000)
triggerall = NumTarget && MoveHit
trigger1 = Root,Var(11) >= 2
v = 11
value = -1
ignorehitpause = 1

[State 0, MapSet]
type = RootMapAdd
triggerall = Var(8) = 1 && Target,StateNo = [5000,6000)
triggerall = NumTarget && MoveHit
trigger1 = !(Root,Map(LuckGems)&2)
map = "LuckGems"
value = 2
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
triggerall = AnimElemNo(0) = [3,7]
trigger1 = EnemyNear,Var(51)
value = anim
elem = 11

[State 0, Helper]
type = Helper
trigger1 = Root,StateNo = [2000,3000)
trigger2 = AnimTime = 0
name = "Gemothy"
postype = p1
ID = 4901
stateno = 4901
supermovetime = -1
ownpal = 1
[State 0, ChangeState]
type = DestroySelf
trigger1 = Root,StateNo = [2000,3000)
trigger2 = AnimTime = 0

;---------------------------------------------------------------------------
; H - GEM HURT
[Statedef 4950]
type    = A
movetype= I
physics = N
anim = 950 + 10 * Var(5)
sprpriority = 3 * (Var(5) * -3)
movehitpersist = 1

[State 0, VarSet]
type = VarSet
trigger1 = !Time
v = 50
value = 0 - 96 * (!Ctrl)
[State 0, VarAdd]
type = VarAdd
triggerall = Var(50) < 4
trigger1 = RoundState = 2
trigger1 = Root,MoveType != H || Root,Ctrl
trigger1 = Root,Var(51) = 0
trigger2 = RoundState > 2 && Root,Life && Root,Win
trigger3 = Root,StateNo = 5120 || Root,StateNo = 5200 || Root,StateNo = 5210
trigger4 = Var(50) < 0
v = 50
value = 1

[State 0, VelSet]
type = VelSet
trigger1 = !Time
x = (Root,Vel X - RootDist X * (!MoveContact)) * ((-500 + random) * 0.0001)
y = Vel Y - 1 - random%3
[State 0, VelAdd]
type = VelAdd
trigger1 = Pos Y < -4
y = 0.35

[State 0, PosSet]
type = PosSet
trigger1 = Pos Y + Vel Y > -4
trigger2 = Pos Y > -12 && Vel Y = 0
y = -4
[State 0, VelSet]
type = VelSet
trigger1 = Pos Y + Vel Y > -4
x = 0
y = 0

[State 0, PalFX]
type = PalFX
trigger1 = 1
time = 1
mul = 192,192,192

[State 0, Helper]
type = Helper
trigger1 = Var(50) = 4
trigger2 = Root,StateNo = [2000,3000)
trigger2 = Root,MoveType != H
name = "Gemothy"
postype = p1
ID = 4900 + Var(5)
stateno = 4900 + Var(5)
supermovetime = -1
ownpal = 1
[State 0, ChangeState]
type = DestroySelf
trigger1 = Var(50) = 4
trigger2 = Root,StateNo = [2000,3000)
trigger2 = Root,MoveType != H