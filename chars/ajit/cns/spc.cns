;---------------------------------------------------------------------------
; CTech
[Statedef 900]
type    = U
movetype= A
physics = U
ctrl = 0
anim = 900 + (StateType = A) * 20
sprpriority = -1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = !Time
trigger1 = Pos Y < 0
;trigger1 = Anim != 920
statetype = A
physics = N
[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = !Time
trigger1 = Pos Y < 0
trigger1 = Anim != 920
value = 920

[State 0, VelSet]
type = VelSet
trigger1 = StateType != A
x = 0
y = 0

[State 0, AttackDist]
type = AttackDist
trigger1 = 1
value = 0 

[State 0, ChangeAnim]
type = ChangeAnim
triggerall = AnimElemNo(0) = 4
trigger1 = Time < 16
trigger2 = command = "holdy" && command = "holdb" || command = "holdc"
trigger2 = command != "holdfwd" && command != "holdback" && command != "holdup"
trigger2 = command != "holda" && command != "holdx"
trigger2 = !Var(15)
value = anim
elem = 4

[State 0, ReversalDef]
type = ReversalDef
;trigger1 = Anim = 900
trigger1 = Time < 11
reversal.attr = SCA,NA,SA,NP,SP
pausetime = 0,16
;sparkno = S1500,
;sparkxy = 0,0 ;offset
hitsound = S6,0
p1stateno = 901

[State 0, Snd Parry]
type = PlaySnd
trigger1 = !Time
value = S900,1
channel = 1

[State 0, PalFX]
type = PalFX
trigger1 = !Time
time = 10 * 2
add = 16,16,16
sinadd = 24,24,24,3

[State 0, Explod FX]
type = Explod
trigger1 = Time = 1
anim = 905
ID = 3000
pos = 36,-52; + 24 * (Anim=910)
postype = p1
bindtime = 666
sprpriority = 1
ownpal = 1
removeongethit = 1

[State 0, HitDef]
type = HitDef
trigger1 = Time >= 11

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = Time = 11
movetype = I

[State 0, VelAdd]
type = VelAdd
trigger1 = StateType = A
y = const(movement.yaccel)

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
trigger1 = Anim = 900
value = 0
ctrl = 1
[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
trigger1 = Anim = 910
value = 11
ctrl = 1

[State 1000, 7]
type = ChangeState
trigger1 = Pos Y + Vel Y > Map(StageGround)
trigger1 = Anim = 920
value = 1105

;---------------------------------------------------------------------------
; CTech S1
[Statedef 901]
type    = U
movetype= A
physics = N
facep2 = 1
velset = 0,0
ctrl = 0
anim = 901 + (StateType = C) * 10 + (StateType = A) * 20

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = Pos Y < 0 
statetype = A

[State 0, PalFX]
type = PalFX
trigger1 = !Time
time = 2
add = 128,128,128

[State 0, PosFreeze]
type = PosFreeze
trigger1 = AnimElemNo(0) = [1,4]
value = 1
ignorehitpause = 1

[State 0, Snd SMACK!]
type = PlaySnd
trigger1 = !Time
value = S900,0

[State 0, Var Voice Bank]
type = VarSet
trigger1 = Time = 2
v = 33
value = 900
[State 0, Var Voice Variant]
type = VarSet
trigger1 = Time = 2
v = 34
value = random%4

[State 0, NotHitBy]
type = NotHitBy
trigger1 = AnimElemNo(0) = [1,4]
value = ,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1

[State 0, VarAdd Lucid Gain]
type = VarAdd
trigger1 = !Time
v = 18
value = 100

[State 0, CtrlSet]
type = CtrlSet
trigger1 = AnimElem = 5
value = 1

[State 0, ChangeState]
type = ChangeState
triggerall = AnimElem = 4
;trigger1 = NumTarget
trigger1 = abs(P2BodyDist X) < 56
value = 902
ctrl = 0
[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 4
trigger1 = statetype = A
physics = A

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
trigger1 = StateType = S
value = 0
ctrl = 1
[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
trigger1 = StateType = C
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; CTech S2
[Statedef 902]
type    = U
movetype= A
physics = N
ctrl = 0
facep2 = 1
velset = 0,0
anim = 902 + (StateType = C) * 10 + (StateType = A) * 20

[State 210, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = F0, 3

[State 0, PosFreeze]
type = PosFreeze
trigger1 = AnimElemNo(0) = [1,4]
value = 1
ignorehitpause = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = AnimElemNo(0) = [1,4]
trigger2 = MoveHit && NumTarget
value = SCA
time = 2

[State 0, Explod FX]
type = Explod
trigger1 = AnimElem = 3, 1
anim = 906
ID = 3000
pos = 12,-60
postype = p1
bindtime = 666
sprpriority = 5
ownpal = 1
removeongethit = 1

[State 0, Var Damage Value]
type = VarSet
trigger1 = !MoveContact && !MoveReversed
v = 12
value = 136

[State 0, HitDef]
type = HitDef
trigger1 = !MoveContact && !MoveReversed
attr = A,HA
hitflag = MAF
;guardflag = MA
animtype = heavy
priority = 5,Hit
damage = var(12)
pausetime = 12,12
sparkno = 10 + random%4
guard.sparkno = var(19)
sparkxy = -40+Floor(P2Dist X*0.5),-56+Floor(P2Dist Y*0.5)
hitsound = 1,4
guardsound = 5,0
ground.type = Low
ground.slidetime = 16
ground.hittime = 16
guard.hittime = 10
air.hittime = 16
yaccel = 0.5
fall = 1
ground.velocity = -4,-4
air.velocity = -4,-3.5
getpower = floor(Var(12)*Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))

[State 0, VarAdd Trait Stack]
type = VarAdd
trigger1 = Var(8) = 1 && NumTarget
trigger1 = Var(40) < 4
v = 40
value = 1
ignorehitpause = 1
[State 0, VarAdd Lucid Gain]
type = VarAdd
trigger1 = Var(8) = 1 && NumTarget
v = 18
value = 400
ignorehitpause = 1

[State 0, Offset]
type = Offset
trigger1 = AnimElemNo(0) = 4
trigger1 = GameTime%2 = 0
x = -1 + GameTime%4
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = AnimElem = 3
v = 9
value = 4

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 6
trigger1 = StateType = A
physics = A

[State 210, 5]
type = ChangeState
trigger1 = AnimTime = 0
trigger1 = StateType != A
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; CTech S Proj
[Statedef 903]
type    = U
movetype= I
physics = N
facep2 = 1
ctrl = 0
velset = 0,0
anim = 901 + (StateType = C) * 10 + (StateType = A) * 20

[State 0, PalFX]
type = PalFX
trigger1 = !Time
time = 2
add = 128,128,128

[State 0, PosFreeze]
type = PosFreeze
trigger1 = 1
value = 1
ignorehitpause = 1

[State 0, Snd SMACK!]
type = PlaySnd
trigger1 = !Time
value = S900,0

[State 0, Var Voice Bank]
type = VarSet
trigger1 = Time = 2
v = 33
value = 900
[State 0, Var Voice Variant]
type = VarSet
trigger1 = Time = 2
v = 34
value = random%4

[State 0, NotHitBy]
type = NotHitBy
trigger1 = Time < 12
value = ,NP,SP,HP
time = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 4
trigger1 = statetype = A
physics = A

[State 0, VarAdd Trait Stack]
type = VarAdd
trigger1 = !Time
trigger1 = Var(40) < 4
v = 40
value = 1
[State 0, VarSet]
type = VarSet
trigger1 = !Time
fv = 20
value = 1 + (Var(40) * 0.125)
[State 0, VarAdd Lucid Gain]
type = VarAdd
trigger1 = !Time
v = 18
value = 750

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimElem = 5
trigger1 = StateType = S
value = 0
ctrl = 1
[State 0, ChangeState]
type = ChangeState
trigger1 = AnimElem = 5
trigger1 = StateType = C
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; CTech S-L Charge
[Statedef 950]
type    = U
movetype= A
physics = N
velset = Vel X * 0.1 * (StateType=A),Vel Y * 0.1 * (StateType=A)
ctrl = 0
movehitpersist = 1
anim = 950 + (StateType = A)

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = StateType = C
statetype = S

[State 0, VarAdd Lucid Gain]
type = VarAdd
trigger1 = AnimElem = 4
v = 18
value = 200

[State 0, Snd Fire]
type = PlaySnd
trigger1 = AnimElem = 3
value = S950,0

;[State 0, Var Voice Bank]
;type = VarSet
;trigger1 = AnimElem = 3
;v = 33
;value = 950
;[State 0, Var Voice Variant]
;type = VarSet
;trigger1 = AnimElem = 3
;v = 34
;value = random%3

[State 0, Explod]
type = Explod
trigger1 = AnimElem = 2
anim = anim + 5
id = 3000
postype = p1
bindtime = 12
sprpriority = 5
ownpal = 1
removeongethit = 1

[State 0, VelAdd]
type = VelAdd
trigger1 = StateType = A && AnimElemNo(0) < 6
y = 0.1
[State 0, PosAdd]
type = PosAdd
trigger1 = Pos Y + Vel Y >= 0
trigger1 = StateType = A && AnimElemNo(0) < 6
y = -Vel Y

[State 0, CtrlSet]
type = CtrlSet
trigger1 = AnimElem = 6
value = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 6
trigger1 = statetype = A
physics = A

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
trigger1 = StateType != A
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; CTech S-L Install
[Statedef 955]
type    = U
movetype= A
physics = N
velset = Vel X * 0.1 * (StateType=A),Vel Y * 0.1 * (StateType=A)
ctrl = 0
movehitpersist = 1
anim = 960 + (StateType = A)

[State 0, VarSet]
type = VarSet
trigger1 = !Time
v = 5
value = !!MoveContact

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = StateType = C
statetype = S

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = AnimElem = 5, 9 && Map(AjixStore) = 2
trigger2 = AnimElem = 5, 6 && Map(AjixStore) = 3
value = anim
elem = 6

[State 0, Snd Fire]
type = PlaySnd
trigger1 = AnimElem = 4
value = S950,0

[State 0, Var Voice Bank]
type = VarSet
trigger1 = AnimElem = 4
v = 33
value = 950
[State 0, Var Voice Variant]
type = VarSet
trigger1 = AnimElem = 4
v = 34
value = random%3

[State 0, Explod]
type = Explod
trigger1 = AnimElem = 4
anim = 965
id = 3000
postype = p1
bindtime = 12
sprpriority = 5
ownpal = 1
removeongethit = 1

[State 0, Map Install Start]
type = MapSet
trigger1 = AnimElem = 4
map = "AjixTimer"
value = 1.0

[State 0, ReversalDef]
type = ReversalDef
trigger1 = !Var(5) && Map(AjixStore) >= 2
trigger1 = AnimTime && AnimElemNo(0) < 4
reversal.attr = SCA,NA,SA
pausetime = 12,12
sparkno = var(19)
sparkxy = 0,0
hitsound = 5,0
p1stateno = 956
[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 4

[State 0, VelAdd]
type = VelAdd
trigger1 = StateType = A && AnimElemNo(0) < 6
y = 0.1
[State 0, PosAdd]
type = PosAdd
trigger1 = Pos Y + Vel Y >= 0
trigger1 = StateType = A && AnimElemNo(0) < 6
y = -Vel Y

[State 0, CtrlSet]
type = CtrlSet
trigger1 = AnimElem = 6
value = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 6
trigger1 = statetype = A
physics = A

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
trigger1 = StateType != A
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; CTech S-L Counter
[Statedef 956]
type    = U
movetype= A
physics = N
ctrl = 0

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = StateType = C
statetype = S

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = AnimElem = 5, 6
value = anim
elem = 6

[State 0, Snd Fire]
type = PlaySnd
trigger1 = AnimElem = 4
value = S950,0

[State 0, Var Voice Bank]
type = VarSet
trigger1 = AnimElem = 4
v = 33
value = 950
[State 0, Var Voice Variant]
type = VarSet
trigger1 = AnimElem = 4
v = 34
value = random%3

[State 0, Explod Eye]
type = Explod
trigger1 = AnimElem = 4
anim = 965
id = 3000
postype = p1
bindtime = 12
sprpriority = 5
ownpal = 1
removeongethit = 1
[State 0, Explod Sparko]
type = Explod
trigger1 = AnimElem = 4
anim = F20
pos = 0,-48
postype = p1
bindtime = 4
sprpriority = -5
ownpal = 1

[State 0, Map Install Start]
type = MapSet
trigger1 = AnimElem = 4
map = "AjixTimer"
value = 1.0

[State 0, VelAdd]
type = VelAdd
trigger1 = StateType = A && AnimElemNo(0) < 6
y = 0.1
[State 0, PosAdd]
type = PosAdd
trigger1 = Pos Y + Vel Y >= 0
trigger1 = StateType = A && AnimElemNo(0) < 6
y = -Vel Y

[State 0, Var Damage Value]
type = VarSet
trigger1 = !Time
v = 12
value = 96

[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 4
attr = A,SA
hitflag = MAF
;guardflag = MA
animtype = heavy
priority = 5,Hit
damage = var(12)
pausetime = 12,12
sparkno = 10 + random%4
guard.sparkno = var(19)
sparkxy = -40+Floor(P2Dist X*0.5),-56+Floor(P2Dist Y*0.5)
hitsound = 1,4
guardsound = 5,0
ground.type = Low
ground.slidetime = 16
ground.hittime = 16
yaccel = 0.5
fall = 1
ground.velocity = -1,-8
air.velocity = -1,-6
getpower = floor(Var(12)*Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))

[State 0, TargetState]
type = TargetState
triggerall = NumTarget
trigger1 = MoveHit && Var(8) = 1
trigger1 = Target,MoveType = H && (Target,StateNo = [5000,5100))
value = 5400
ignorehitpause = 1

[State 0, TargetState]
type = MapSet
triggerall = NumTarget && MoveHit && Var(8) = 1
trigger1 = Target,StateNo = 5400
map = "HitFX"
value = 1
ignorehitpause = 1
redirectid = Target,ID

[State 0, CtrlSet]
type = CtrlSet
trigger1 = AnimElem = 6
value = 1

[State 0, VarSet]
type = VarSet
trigger1 = AnimElem = 4
v = 9
value = 16

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 6
trigger1 = statetype = A
physics = A

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
trigger1 = StateType != A
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; n.CTech S-S
[Statedef 960]
type    = S
movetype= A
physics = N
velset = 0,0
anim = 1600+(PrevStateNo=961)+2*(PrevStateNo=962)
ctrl = 0
sprpriority = 2

[State 0, VarSet]
type = VarSet
trigger1 = !Time && PrevStateNo != [961,962]
v = 5
value = Var(5)*(PrevStateNo=960)+(PrevStateNo=960)
[State 0, VarSet]
type = VarSet
trigger1 = !Time
trigger2 = Var(6)
v = 6
value = (!!map(b_y)||!!map(b_b))
[State 0, VarSet]
type = VarSet
trigger1 = !Time
;trigger1 = !(PrevStateNo = 960 && Var(7) = -1)
v = 7
value = 0
[State 0, VarSet]
type = VarSet
triggerall = Time
triggerall = Var(7) = 0
trigger1 = map(b_x)
trigger2 = Var(15) && EnemyNear,StateType = A && EnemyNear,Pos Y > -48
v = 7
value = 965
[State 0, VarSet]
type = VarSet
triggerall = Time && Var(6) = 0
triggerall = Var(7) = 0
trigger1 = map(b_y)
trigger2 = Var(15) && EnemyNear,StateType != A && EnemyNear,StateNo = [5000,6000)
v = 7
value = 966
[State 0, VarSet]
type = VarSet
triggerall = Time
triggerall = Var(7) = 0
trigger1 = map(b_a)
trigger2 = Var(15) && EnemyNear,StateType = S && EnemyNear,StateNo != [5000,6000)
v = 7
value = 967
[State 0, VarSet]
type = VarSet
triggerall = Time && Var(6) = 0
triggerall = Var(7) = 0
trigger1 = map(b_b)
trigger2 = Var(15) && EnemyNear,StateType = C && EnemyNear,StateNo != [5000,6000)
trigger3 = Var(15) && EnemyNear,Pos Y < -48
v = 7
value = 968
[State 0, VarSet]
type = VarSet
trigger1 = Time && Var(6) = 0; && Var(5) = 0
trigger1 = Var(7) = 966 || Var(7) = 968
trigger1 = map(b_b) && map(b_y)
v = 7
value = 961 + (!!map(p_Bk) && Anim != 1602)
[State 0, VarSet]
type = VarSet
triggerall = Time && Var(6) = 0
triggerall = Var(7) = 0
triggerall = Anim != 1602
trigger1 = map(p_Dn)
trigger2 = Var(15) && Map(P2Proxy) >= 48
v = 7
value = -1
[State 0, VarSet]
type = VarSet
trigger1 = Time && Var(6) = 0; && Var(5) = 0
trigger1 = Var(7) = -1 || Var(7) = 961 || Var(7) = 966 || Var(7) = 968
trigger1 = map(b_b) && map(b_y) && map(p_Fd) && map(p_Dn)
v = 7
value = 964

[State 0, MapSet]
type = MapSet
trigger1 = !Time
map = "AjikBonus"
value = min(4,max(0,Map(AjikBonus)+(Anim=1601)-(Anim=1602)))

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = Var(5)
trigger1 = !Time
value = Anim
elem = 3
[State 0, ChangeAnim]
type = ChangeAnim
triggerall = Var(7) < 0
trigger1 = Anim = 1600 && AnimElemNo(0) = 4 && AnimElem = 4, >= 6
trigger2 = Anim = 1601 && AnimElemNo(0) = 7 && AnimElem = 7, >= 4
trigger3 = Anim = 1602 && AnimElemNo(0) = 7 && AnimElem = 7, >= 4
value = Anim
elem = AnimElemNo(0)+1

[State 0, PosAdd]
type = PosAdd
triggerall = Anim = [1601,1602]
trigger1 = AnimElem = 2
trigger2 = AnimElem = 3
x = -8

[State 0, VelSet]
type = VelSet
triggerall = Anim = [1601,1602]
trigger1 = AnimElem = 4
x = ifelse(Anim=1602,-6-Map(AjikBonus),max(6+1.5*Map(AjikBonus),min(12,p2bodydist x * 0.1)))

[State 0, VelMul]
type = VelMul
trigger1 = AnimElem = 6
x = 0.3
[State 0, VelMul]
type = VelMul
trigger1 = AnimElemNo(0) >= 6
x = 0.7

[State 0, Turn]
type = Turn
trigger1 = AnimElem = 7
trigger1 = P2Dist X < 0

[State 0, Snd Swing]
type = PlaySnd
trigger1 = Anim = 1600 && AnimElem = 2
value = F0,2

[State 0, MapSet]
type = MapSet
triggerall = Anim = [1601,1602]
trigger1 = AnimElem = 4
map = "DashDustFX"
value = 1 - 2 * (Anim=1602)

[State 0, CtrlSet]
type = CtrlSet
trigger1 = AnimElem = 8
value = 1
[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 8
movetype = I

[State 1000, 7]
type = ChangeState
triggerall = Var(7) > 900
triggerall = !(Var(5) && Time < 10); + 2 * Var(5))
trigger1 = Anim = [1601,1602]
trigger1 = AnimElemNo(0) = [6,7]
trigger2 = Anim = 1600
trigger2 = AnimElemNo(0) = 4
value = Var(7)
[State 1000, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; f.CTech S-S
[Statedef 961]
type    = S
movetype= A
physics = S

[State 0, VarSet]
type = VarSet
trigger1 = !Time
v = 5
value = Var(5)*(PrevStateNo=960)+(PrevStateNo=960)
[State 0, MapSet]
type = MapSet
trigger1 = !Time
trigger1 = PrevStateNo = 960 && Anim = 1602
map = "AjikBonus"
value = min(4,Map(AjikBonus)+1)

[State 0, ChangeState]
type = ChangeState
trigger1 = !Time
value = 960

;---------------------------------------------------------------------------
; b.CTech S-S
[Statedef 962]
type    = S
movetype= A
physics = S
anim = 666

[State 0, VarSet]
type = VarSet
trigger1 = !Time
v = 5
value = Var(5)*(PrevStateNo=960)+(PrevStateNo=960)

[State 0, ChangeState]
type = ChangeState
trigger1 = !Time
value = 960

;---------------------------------------------------------------------------
; j.CTech S-S
[Statedef 963]
type    = A
movetype= A
physics = N
velset = Vel X * 0.25,Vel Y * 0.25
anim = 1603
ctrl = 0
sprpriority = 2

[State 0, VarSet]
type = VarSet
trigger1 = !Time
v = 5
value = 0
[State 0, VarSet]
type = VarSet
trigger1 = !Time
trigger2 = Var(6)
v = 6
value = (!!map(b_y)||!!map(b_b))
[State 0, VarSet]
type = VarSet
trigger1 = !Time
v = 7
value = 0
[State 0, VarSet]
type = VarSet
trigger1 = Time
trigger1 = Var(7) = 0
trigger1 = map(b_x)
v = 7
value = 965
[State 0, VarSet]
type = VarSet
trigger1 = Time && Var(6) = 0
trigger1 = Var(7) = 0
trigger1 = map(b_y)
v = 7
value = 966
[State 0, VarSet]
type = VarSet
trigger1 = Time
trigger1 = Var(7) = 0
trigger1 = map(b_a)
v = 7
value = 967
[State 0, VarSet]
type = VarSet
trigger1 = Time && Var(6) = 0
trigger1 = Var(7) = 0
trigger1 = map(b_b)
v = 7
value = 968
[State 0, VarSet]
type = VarSet
trigger1 = Time && Var(6) = 0; && Var(5) = 0
trigger1 = Var(7) = 966 || Var(7) = 968
trigger1 = map(b_b) && map(b_y)
trigger1 = map(p_Fd) || map(p_Bk)
v = 7
value = 961 + (!!map(p_Bk))
[State 0, VarSet]
type = VarSet
trigger1 = Time && Var(6) = 0
trigger1 = Var(7) = 0
trigger1 = map(p_Dn); map(p_Bk) && 
v = 7
value = -1
[State 0, VarSet]
type = VarSet
trigger1 = Time && Var(6) = 0; && Var(5) = 0
trigger1 = Var(7) = -1 || Var(7) = 961 || Var(7) = 966 || Var(7) = 968
trigger1 = map(b_b) && map(b_y) && map(p_Fd) && map(p_Dn)
v = 7
value = 964

[State 0, MapSet]
type = MapSet
trigger1 = !Time
map = "AjikBonus"
value = min(4,Map(AjikBonus)+1)

[State 0, Snd Dash]
type = PlaySnd
trigger1 = AnimElem = 2
value = F2,3

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = AnimElemNo(0) = 3
value = Anim
elem = 3 + (Pos Y + Vel Y >= 0)
[State 0, ChangeAnim]
type = ChangeAnim
triggerall = Var(7) < 0
trigger1 = AnimElemNo(0) = 5 && AnimElem = 5, >= 4
value = Anim
elem = AnimElemNo(0)+1

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 3 && Vel Y < 8
x = 0
y = 8
[State 0, VelMul]
type = VelAdd
trigger1 = AnimElemNo(0) = 3
y = 1

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 4
x = 0
y = 0
[State 0, PosSet]
type = PosSet
trigger1 = AnimElem = 4
y = 0

[State 0, Turn]
type = Turn
trigger1 = AnimElem = 4
trigger1 = P2Dist X < 0

[State 0, CtrlSet]
type = CtrlSet
trigger1 = AnimElem = 6
value = 1
[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 4
statetype = S

[State 1000, 7]
type = ChangeState
triggerall = Var(7) > 900
trigger1 = AnimElemNo(0) = [4,5]
value = Var(7)
[State 1000, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; CTech, Dodge
[Statedef 964]
type    = S
movetype= A
physics = N
velset = 5,0
ctrl = 0
anim = 1620
sprpriority = 5

[State 0, MapSet]
type = MapSet
trigger1 = !Time
map = "AjikBonus"
value = min(4,Map(AjikBonus)+1)

[State 0, VelMul]
type = VelMul
trigger1 = AnimElemNo(0) >= 6
x = 0.8

[State 0, NotHitBy]
type = NotHitBy
trigger1 = AnimElemNo(0) = [2,5]
value = ,NP,SP
time = 1

[State 0, Explod Big Dust FX]
type = Explod
trigger1 = AnimElem = 2
anim = F85
postype = p1
ownpal = 1

[State 210, Swing]
type = PlaySnd
trigger1 = AnimElem = 2
value = F2, 3

[State 0, Var Voice Bank]
type = VarSet
trigger1 = AnimElem = 2
v = 33
value = 1620
[State 0, Var Voice Variant]
type = VarSet
trigger1 = AnimElem = 2
v = 34
value = random%6

[State 0, PlayerPush]
type = PlayerPush
trigger1 = AnimElemNo(0) = [2,5]
value = 0

[State 0, CtrlSet]
type = CtrlSet
trigger1 = AnimElem = 7
value = 1

[State 1000, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; CTech, LP
[Statedef 965]
type    = S
movetype= A
physics = S
velset = 0,0
ctrl = 0
facep2 = 1
anim = 1611
sprpriority = 2

[State 0, VarSet]
type = VarSet
trigger1 = !Time
v = 5
value = floor(Map(AjikBonus))

[State 210, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = F0, 3

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 2
x = max(0,min(2+Var(5)*0.5,p2dist x * 0.1))

[State 0, Var Voice Bank]
type = VarSet
trigger1 = AnimElem = 2
v = 33
value = 200
[State 0, Var Voice Variant]
type = VarSet
trigger1 = AnimElem = 2
v = 34
value = random%44

[State 0, Var Damage Value]
type = VarSet
trigger1 = !MoveContact && !MoveReversed
v = 12
value = 128 + 4 * Var(5)

[State 0, HitDef]
type = HitDef
trigger1 = !MoveContact && !MoveReversed
attr = S,SA
hitflag = MAF
guardflag = MA
animtype = medium
priority = 4,Hit
damage = Ceil(Var(12) * FVar(10) * FVar(20)),Ceil(Var(12)*const(BC.ChipLight))
guardpoints = floor((16 + Var(12)) * 0.75)
pausetime = 12,12+Var(13)
guard.pausetime = 12,12
sparkno = ifelse(Var(10)=2||Var(11)>=2,30,10 + random%4 + (Var(10)=1) * 5)
guard.sparkno = 40
sparkxy = -40+Floor(P2Dist X*0.5),-56+Floor(P2Dist Y*0.5)
hitsound = 1,2
guardsound = 5,1
ground.type = Low
ground.slidetime = 18 + 2 * floor(Var(5)*0.5)
ground.hittime = 18 + 2 * floor(Var(5)*0.5)
guard.hittime = 14 + 2 * floor(Var(5)*0.5)
yaccel = 0.5
air.fall = 1
ground.velocity = -3,0
air.velocity = -1,-5.5 - EnemyNear,Pos Y * 0.065
p2facing = 1
getpower = floor(Var(12)*Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))

[State 0, TargetState]
type = TargetState
triggerall = NumTarget
trigger1 = MoveHit && Var(8) = 1
trigger1 = Target,MoveType = H && (Target,StateNo = [5000,5100))
trigger1 = Var(10) = 2 || Var(11) >= 2 || EnemyNear,StateType = A
value = ifelse(Var(10) = 2 || Var(11) >= 2,5327,5090)
ignorehitpause = 1
[State 0, Map Dire Trigger]
type = MapSet
triggerall = MoveHit && !MoveReversed
triggerall = EnemyNear,MoveType = H
triggerall = Var(10) = 2 || Var(11) > 1
trigger1 = Var(8) = 1
map = "DireAct"
value = ifelse(Var(10)=2,2,Var(11) - 1)
ignorehitpause = 1

[State 0, VarAdd Lucid Gain]
type = VarAdd
triggerall = MoveContact && NumTarget
trigger1 = Var(8) = 1
v = 18
value = (50 + 25 * Var(5)) * (1 + !!MoveHit)
ignorehitpause = 1

[State 0, Map Momentum Loss]
type = MapSet
trigger1 = !Time
map = "AjikBonus"
value = max(0,Map(AjikBonus)-1)
[State 0, Map Momentum Loss]
type = MapSet
trigger1 = Var(8) = 1 && NumTarget
map = "AjikBonus"
value = max(0,Map(AjikBonus)-!!MoveContact-!!MoveContact)
ignorehitpause = 1

[State 0, CtrlSet]
type = CtrlSet
trigger1 = AnimElem = 7
value = 1
[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 8
movetype = I

[State 1000, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; CTech, SP
[Statedef 966]
type    = S
movetype= A
physics = N
velset = 0,0
ctrl = 0
facep2 = 1
anim = 1610
sprpriority = 2

[State 0, VarSet]
type = VarSet
trigger1 = !Time
v = 5
value = floor(Map(AjikBonus))

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = AnimElem = 1,1 && Var(5) >= 1
trigger2 = AnimElem = 3,1 && Var(5) >= 2
trigger3 = AnimElem = 4,1 && Var(5) >= 3
trigger4 = AnimElem = 5,1 && Var(5) >= 4
value = Anim
elem = AnimElemNo(0) + 1

[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 2
x = -8
[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 5
trigger2 = AnimElem = 6
x = 8

[State 0, VelAdd]
type = VelAdd
trigger1 = AnimElemNo(0) = [5,6]
x = Var(5) * 1.5
[State 0, VelMul]
type = VelMul
trigger1 = 1
x = 0.5

[State 210, 1]
type = PlaySnd
trigger1 = AnimElem = 5
value = F0, 4

[State 0, Var Voice Bank]
type = VarSet
trigger1 = AnimElem = 5
v = 33
value = 1600
[State 0, Var Voice Variant]
type = VarSet
trigger1 = AnimElem = 5
v = 34
value = random%4
[State 0, Var Voice Bank]
type = VarSet
trigger1 = AnimElem = 5
trigger1 = PrevStateNo = 1615 && Random < 500 && Var(6)
v = 33
value = 1610
[State 0, Var Voice Variant]
type = VarSet
trigger1 = AnimElem = 5
trigger1 = Var(33) = 1610
v = 34
value = random%3

[State 0, Var Damage Value]
type = VarSet
trigger1 = !MoveContact && !MoveReversed
v = 12
value = 136 + 4 * Var(5)

[State 0, HitDef]
type = HitDef
trigger1 = !MoveContact && !MoveReversed
attr = S,SA
hitflag = MAF
guardflag = MA
animtype = heavy
priority = 4,Hit
damage = Ceil(Var(12) * FVar(10) * FVar(20)),Ceil(Var(12)*const(BC.ChipMid))
guardpoints = floor((16 + Var(12)) * 0.75)
pausetime = 12,12+Var(13)
guard.pausetime = 12,12
sparkno = ifelse(Var(10)=2||Var(11)>=2,30,10 + random%4 + (Var(10)=1) * 5)
guard.sparkno = 40
sparkxy = -40+Floor(P2Dist X*0.5),-56+Floor(P2Dist Y*0.5)
hitsound = 1,4
guardsound = 5,1
ground.type = Low
ground.slidetime = 21
ground.hittime = 21
guard.hittime = 16 + 2 * floor(Var(5)*0.5)
yaccel = 0.5
air.fall = 1
ground.velocity = -5,0
air.velocity = -2,0
p2facing = 1
getpower = floor(Var(12)*Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))

[State 0, TargetState]
type = TargetState
triggerall = NumTarget
trigger1 = MoveHit && Var(8) = 1
trigger1 = Target,MoveType = H && (Target,StateNo = [5000,5100))
value = ifelse(Var(10) = 2 || Var(11) >= 2,5340,5390)
ignorehitpause = 1
[State 0, Map Dire Trigger]
type = MapSet
triggerall = MoveHit && !MoveReversed
triggerall = EnemyNear,MoveType = H
triggerall = Var(10) = 2 || Var(11) > 1
trigger1 = Var(8) = 1
map = "DireAct"
value = ifelse(Var(10)=2,2,Var(11) - 1)
ignorehitpause = 1

[State 0, VarAdd Lucid Gain]
type = VarAdd
triggerall = MoveContact && NumTarget
trigger1 = Var(8) = 1
v = 18
value = (50 + 25 * Var(5)) * (1 + !!MoveHit)
ignorehitpause = 1

[State 0, Map Momentum Loss]
type = MapSet
trigger1 = !Time
map = "AjikBonus"
value = max(0,Map(AjikBonus)-1)
[State 0, Map Momentum Loss]
type = MapSet
trigger1 = Var(8) = 1 && NumTarget
map = "AjikBonus"
value = max(0,Map(AjikBonus)-!!MoveContact-!!MoveHit)
ignorehitpause = 1

[State 0, CtrlSet]
type = CtrlSet
trigger1 = AnimElem = 14
value = 1
[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 8
movetype = I

[State 1000, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; CTech, LK
[Statedef 967]
type    = S
movetype= A
physics = S
velset = Vel X * 0.5,0
ctrl = 0
facep2 = 1
anim = 1630
sprpriority = 2

[State 0, VarSet]
type = VarSet
trigger1 = !Time
v = 5
value = floor(Map(AjikBonus))

[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 2
trigger2 = AnimElem = 3
x = 12
[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 7
trigger2 = AnimElem = 8
x = -12

[State 210, Swing]
type = PlaySnd
trigger1 = AnimElem = 3
value = F0, 3

[State 0, Var Voice Bank]
type = VarSet
trigger1 = AnimElem = 2
v = 33
value = 1630
[State 0, Var Voice Variant]
type = VarSet
trigger1 = AnimElem = 2
v = 34
value = random%4

[State 0, Var Damage Value]
type = VarSet
trigger1 = !MoveContact && !MoveReversed
v = 12
value = 136 + 4 * Var(5)

[State 0, HitDef]
type = HitDef
trigger1 = !MoveContact && !MoveReversed
attr = C,SA
hitflag = MAFD
guardflag = LA
animtype = medium
priority = 4,Hit
damage = Ceil(Var(12) * FVar(10) * FVar(20)),Ceil(Var(12)*const(BC.ChipLight))
guardpoints = floor((16 + Var(12)) * 0.75)
pausetime = 12,12+Var(13)
guard.pausetime = 12,12
sparkno = ifelse((Var(10)=2||Var(11)>=2)&&EnemyNear,StateType!=L,30,10 + random%4 + (Var(10)=1) * 5)
guard.sparkno = 40
sparkxy = -40+Floor(P2Dist X*0.5),-16+Floor(P2Dist Y*0.5)
hitsound = 1,3
guardsound = 5,0
ground.type = Trip
ground.slidetime = 21
ground.hittime = 21
guard.hittime = 12 + 2 * floor(Var(5)*0.5)
yaccel = 0.5
fall = 1
fall.recovertime = 510
ground.velocity = -1.75 + 1 * (Var(10)=2||Var(11)>1),-2.25 - 5 * (Var(10)=2||Var(11)>1)
air.velocity = -1.75 + 1 * (Var(10)=2||Var(11)>1),-2.5 - 5 * (Var(10)=2||Var(11)>1)
down.velocity = -1,-4
p2facing = 1
getpower = floor(Var(12)*Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))

[State 0, TargetState]
type = TargetState
triggerall = NumTarget
trigger1 = MoveHit && Var(8) = 1
trigger1 = Target,MoveType = H && (Target,StateNo = [5000,5080))
trigger1 = Var(10) = 2 || Var(11) >= 2
value = 5400
ignorehitpause = 1
[State 0, Map Dire Trigger]
type = MapSet
triggerall = MoveHit && !MoveReversed
triggerall = EnemyNear,MoveType = H
triggerall = Var(10) = 2 || Var(11) > 1
trigger1 = Var(8) = 1
map = "DireAct"
value = ifelse(Var(10)=2,2,Var(11) - 1)
ignorehitpause = 1

[State 0, VarAdd Lucid Gain]
type = VarAdd
triggerall = MoveContact && NumTarget
trigger1 = Var(8) = 1
v = 18
value = (50 + 25 * Var(5)) * (1 + !!MoveHit)
ignorehitpause = 1

[State 0, Map Momentum Loss]
type = MapSet
trigger1 = !Time
map = "AjikBonus"
value = max(0,Map(AjikBonus)-1)
[State 0, Map Momentum Loss]
type = MapSet
trigger1 = Var(8) = 1 && NumTarget
map = "AjikBonus"
value = max(0,Map(AjikBonus)-!!MoveContact-!!MoveHit)
ignorehitpause = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 6
movetype = I

[State 1000, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; CTech, SK
[Statedef 968]
type    = S
movetype= A
physics = N
velset = 0,0
ctrl = 0
facep2 = 1
anim = 1612
sprpriority = 2

[State 0, VarSet]
type = VarSet
trigger1 = !Time
v = 5
value = floor(Map(AjikBonus))

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 4
x = max(0,min(3.5 + 0.5 * Var(5),p2dist x * 0.05))
y = -2.25
[State 0, VelAdd]
type = VelAdd
trigger1 = AnimElemNo(0) = [4,9]
y = 0.25
[State 0, VelSet]
type = VelSet
trigger1 = Var(8) = 1
x = min(1.5,Vel X * 0.5)
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 10
x = 0
y = 0
[State 0, PosSet]
type = PosSet
trigger1 = AnimElem = 10
y = 0

[State 0, Var Voice Bank]
type = VarSet
trigger1 = AnimElem = 2
v = 33
value = 2300
[State 0, Var Voice Variant]
type = VarSet
trigger1 = AnimElem = 2
v = 34
value = random%6

[State 210, 1]
type = PlaySnd
trigger1 = AnimElem = 7
value = F0, 4

[State 0, Var Damage Value]
type = VarSet
trigger1 = !MoveContact && !MoveReversed
v = 12
value = 136 + 4 * Var(5)

[State 0, HitDef]
type = HitDef
trigger1 = !MoveContact && !MoveReversed
attr = S,SA
hitflag = MAF
guardflag = HA
animtype = heavy
priority = 4,Hit
damage = Ceil(Var(12) * FVar(10) * FVar(20)),Ceil(Var(12)*const(BC.ChipMid))
guardpoints = floor((16 + Var(12)) * 0.75)
pausetime = 12,12+Var(13)
guard.pausetime = 12,12
sparkno = ifelse(Var(10)=2,30,10 + random%4 + (Var(10)=1) * 5)
guard.sparkno = 40
sparkxy = -40+Floor(P2Dist X*0.5),-48+Floor(P2Dist Y*0.5)
hitsound = 1,3
guardsound = 5,1
ground.type = Low
ground.slidetime = 21 + floor(Var(5)*0.5)
ground.hittime = 21 + floor(Var(5)*0.5)
guard.hittime = 11 + 2 * floor(Var(5)*0.5)
yaccel = 0.5
air.fall = 1
ground.velocity = -3,0
air.velocity = -2,8
p2facing = 1
getpower = floor(Var(12)*Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))

[State 0, TargetState]
type = TargetState
triggerall = NumTarget
trigger1 = MoveHit && Var(8) = 1
trigger1 = Target,MoveType = H && (Target,StateNo = [5000,5100))
value = ifelse(Var(10) = 2 || Var(11) >= 2,5345,5355)
ignorehitpause = 1
[State 0, Map Dire Trigger]
type = MapSet
triggerall = MoveHit && !MoveReversed
triggerall = EnemyNear,MoveType = H
triggerall = Var(10) = 2
trigger1 = Var(8) = 1
map = "DireAct"
value = 2
ignorehitpause = 1

[State 0, VarAdd Lucid Gain]
type = VarAdd
triggerall = MoveContact && NumTarget
trigger1 = Var(8) = 1
v = 18
value = (50 + 25 * Var(5)) * (1 + !!MoveHit)
ignorehitpause = 1

[State 0, Map Momentum Loss]
type = MapSet
trigger1 = !Time
map = "AjikBonus"
value = max(0,Map(AjikBonus)-1)
[State 0, Map Momentum Loss]
type = MapSet
trigger1 = Var(8) = 1 && NumTarget
map = "AjikBonus"
value = max(0,Map(AjikBonus)-!!MoveContact-!!MoveHit)
ignorehitpause = 1

[State 0, CtrlSet]
type = CtrlSet
trigger1 = AnimElem = 12
value = 1
[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 4
statetype = A
[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 9
movetype = I
[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 10
statetype = S

[State 1000, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; QCF+LP
[Statedef 1000]
type    = S
movetype= A
physics = S
velset = 0,0
movehitpersist = 1
anim = 1000
ctrl = 0
sprpriority = 2

[State 0, VarSet]
type = VarSet
trigger1 = !Time
trigger1 = PrevStateNo != 1001
v = 5
value = 0

[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 2
trigger2 = AnimElem = 3
x = -8
[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 4
trigger2 = AnimElem = 5
x = 8

[State 210, 1]
type = PlaySnd
trigger1 = AnimElem = 4
value = F0, 3

[State 0, Var Voice Bank]
type = VarSet
trigger1 = AnimElem = 4
v = 33
value = 1000
[State 0, Var Voice Variant]
type = VarSet
trigger1 = AnimElem = 4
trigger1 = Random > Var(35)
v = 34
value = random%6

[State 0, Explod]
type = Explod
trigger1 = AnimElem = 3, 1
anim = 1005
id = 3000
postype = p1
bindtime = 666
removetime = -2
sprpriority = 3
ownpal = 1
removeongethit = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = AnimElem = 5
value = ,NP,SP
time = 1

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 5
name = "Sunspot"
ID = 1010
stateno = 1010
pos = 24 + min(32,p2bodydist x),-36
ownpal = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 5, 1
movetype = I
[State 0, CtrlSet]
type = CtrlSet
trigger1 = AnimElem = 11
value = 1

[State 1000, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; QCF+SP
[Statedef 1001]
type    = S
movetype= A
physics = S
movehitpersist = 1
anim = 666

[State 0, VarSet]
type = VarSet
trigger1 = !Time
v = 5
value = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = !Time
value = 1000

;---------------------------------------------------------------------------
; H - Sunspot
[Statedef 1010]
type    = S
movetype= A
physics = N
anim = 1010
velset = 4 + (Parent,Var(5) * 2) - (Parent,Name="TRAI")*2,0
sprpriority = 3

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, Counter Check Reset]
type = VarSet
trigger1 = !MoveContact
v = 10
value = Parent,Var(10) * !Root,Var(51)
ignorehitpause = 1
[State 0, Scaling Reset]
type = VarSet
trigger1 = !MoveContact
fv = 10
value = max(Parent,FVar(8) + (Var(10)=1)*const(BC.CounterBonus),const(BC.ScalingMin))
ignorehitpause = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = !Time
value = ,NA,SA,HA,NT,ST,HT
time = 666
[State 0, HitOverride]
type = HitOverride
trigger1 = !Time
attr = SCA,NP,SP,HP
stateno = stateno + 1
time = 666

[State 0, Snd Fire]
type = PlaySnd
trigger1 = !Time
value = S1000,0

[State 0, VarSet]
type = VarSet
trigger1 = !Time 
v = 12
value = 120

[State 0, HitDef]
type = HitDef
trigger1 = !MoveContact && !MoveReversed
attr = S,SP
hitflag = MAF
guardflag = MAA
animtype = medium
priority = 3,Hit
damage = Ceil(Var(12) * FVar(10) * Parent,FVar(20)),Ceil(Var(12)*const(BC.ChipLight))
guardpoints = floor((32 + Var(12)) * 0.5)
pausetime = 1, 12 + Parent,Var(13)
sparkno = -1;10 + random%4 + (Var(10)=1) * 5
guard.sparkno = 40
sparkxy = 0,0;Floor(P2Dist X*0.5),-16+Floor(P2Dist Y*0.5)
hitsound = -1;1,2
guardsound = 5,1
ground.type = Low
ground.slidetime = 12
ground.hittime = 12
guard.hittime = 8
air.hittime = 12
yaccel = 0.5
air.fall = 1
ground.velocity = -4,0
air.velocity = -3,-1
getpower = floor(Var(12)*Root,Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Root,Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0

[State 0, ParentVarSet]
type = ParentVarSet
trigger1 = 1
v = 31
value = floor(P2Dist X - Vel X)

[State 0, PalFX]
type = PalFX
trigger1 = !Time
time = 666
add = 16,16,16
sinadd = 32,32,32,4

[State 0, DestroySelf]
type = DestroySelf
trigger1 = FrontEdgeDist < -64
[State 0, DestroySelf]
type = ChangeState
trigger1 = MoveContact
trigger2 = MoveReversed
trigger3 = Root,MoveType = H && Root,StateNo != [120,160)
value = 1011

;---------------------------------------------------------------------------
; H - Sunspot Hit
[Statedef 1011]
type    = A
movetype= I
physics = N
anim = 666
velset = 0,0
movehitpersist = 1
hitdefpersist = 1
sprpriority = 3

[State 0, Snd Fire]
type = PlaySnd
triggerall = !Time
trigger1 = !NumTarget && MoveContact
trigger1 = TeamSide = 1
trigger2 = NumTarget && MoveContact
trigger3 = gethitvar(damage) > 0
trigger3 = TeamSide = 1
value = F1,10
[State 0, Snd Hit]
type = PlaySnd
triggerall = !Time
trigger1 = !NumTarget && MoveHit
trigger1 = TeamSide = 1
trigger2 = NumTarget && MoveHit
trigger3 = gethitvar(damage) > 0
trigger3 = TeamSide = 1
value = F1,2

[State 0, Explod HitSpark]
type = Explod
triggerall = !Time
trigger1 = NumTarget && MoveHit && !MoveReversed
anim = F ifelse(Var(10)=2||Parent,Var(11)>=2,30,10 + random%4)
pos = 0,-P2Dist Y
postype = p2
pausemovetime = 666
supermovetime = 666
sprpriority = 9
ontop = 1
ownpal = 1

[State 0, Explod]
type = Explod
trigger1 = !Time
anim = 1011
pos = 0,0;ifelse(P2Dist X < 0,0,floor(p2dist x * 0.5)),0
postype = p1
sprpriority = 3

[State 0, HitAdd]
type = ParentVarAdd
triggerall = !Time
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
v = 51
value = 1

[State 0, ParentVarSet Counter Message]
type = ParentVarSet
triggerall = !Time && Var(10)
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
v = 32
value = 63 + (Var(10) = 2) + (Var(10) = 3) * 10

[State 0, Dampening S]
type = ParentVarSet
triggerall = !Time
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
fv = 8
value = Parent,FVar(8)*(const(BC.ScalingH1) + const(BC.ScalingH2) * ifelse(Parent,FVar(8)<1,1-Parent,FVar(8),0))
ignorehitpause = 1

[State 0, TargetState]
type = RootMapSet
triggerall = !Time
triggerall = NumTarget && MoveHit
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
map = "HitFX"
value = 1
ignorehitpause = 1
redirectid = Target,ID

[State 0, Var Dire Gain]
type = ParentVarSet
triggerall = Root,Name = "AJIT"
triggerall = !Time
triggerall = NumTarget && MoveHit
trigger1 = Var(10) = 2
v = 40
value = min(4,Parent,Var(40)+1)
ignorehitpause = 1

[State 0, TargetState]
type = TargetState
trigger1 = !Time
trigger1 = NumTarget && MoveHit
trigger1 = Var(10) = 2 || Root,Var(11) > 1
value = 5325

[State 0, Map Dire Trigger]
type = RootMapSet
trigger1 = !Time
trigger1 = NumTarget && MoveHit
trigger1 = Var(10) = 2 || Root,Var(11) > 1
map = "DireAct"
value = ifelse(Var(10)=2,2,Root,Var(11) - 1)
ignorehitpause = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = Time = 2

;---------------------------------------------------------------------------
; QCF+2P EX
[Statedef 1050]
type    = S
movetype= A
physics = S
velset = 0,0
movehitpersist = 1
anim = 1050
ctrl = 0
sprpriority = 2

[State 0, Map Ajit EX Palette]
type = MapSet
trigger1 = !Time
map = "AjixEX"
value = 666
[State 210, Snd EX]
type = PlaySnd
trigger1 = !Time
value = S1050, 0

[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 2
trigger2 = AnimElem = 3
x = -8
[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 4
trigger2 = AnimElem = 5
x = 8

[State 210, 1]
type = PlaySnd
trigger1 = AnimElem = 4
value = F0, 3

[State 0, Var Voice Bank]
type = VarSet
trigger1 = AnimElem = 4
v = 33
value = 1050
[State 0, Var Voice Variant]
type = VarSet
trigger1 = AnimElem = 4
v = 34
value = random%5

[State 0, Explod]
type = Explod
trigger1 = AnimElem = 3
anim = 1005
postype = p1
bindtime = 666
removetime = -2
sprpriority = 3
ownpal = 1
removeongethit = 1

[State 0, Width]
type = Width
trigger1 = AnimElemNo(0) = 5
player = 24,0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = AnimElem = 5
value = ,NP,SP
time = 1

[State 0, Snd Fire]
type = PlaySnd
trigger1 = AnimElem = 5
value = S1000,0

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 5
name = "Sunspot EX"
ID = 1010
stateno = 1060
pos = 52,-36
ownpal = 1

[State 0, VarAdd]
type = VarAdd
trigger1 = !Time
v = 18
value = -1000
[State 0, VarSet Side-L Buff]
type = VarSet
trigger1 = !Time
fv = 20
value = min(fvar(20)+0.0667,1.20)

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 6
movetype = I
[State 0, CtrlSet]
type = CtrlSet
trigger1 = AnimElem = 11
value = 1

[State 1000, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; H - Sunspot EX
[Statedef 1060]
type    = A
movetype= A
physics = N
anim = 1010
movehitpersist = 1
velset = 3
sprpriority = 3

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, Counter Check Reset]
type = VarSet
trigger1 = !MoveContact
v = 10
value = Parent,Var(10) * !Root,Var(51)
ignorehitpause = 1
[State 0, Scaling Reset]
type = VarSet
trigger1 = !MoveContact
fv = 10
value = max(Parent,FVar(8) + (Var(10)=1)*const(BC.CounterBonus),const(BC.ScalingMin))
ignorehitpause = 1

[State 0, PosAdd]
type = PosAdd
trigger1 = MoveContact = 1
x = -Vel X

[State 0, VarSet]
type = VarSet
trigger1 = !Time
v = 5
value = 0
[State 0, VarAdd]
type = VarAdd
trigger1 = MoveContact = 1
v = 5
value = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = !Time
value = ,NA,SA,HA,NT,ST,HT,NP,SP
time = 666
[State 0, HitOverride]
type = HitOverride
trigger1 = !Time
attr = SCA,HP
stateno = stateno + 1
time = 666

[State 0, Var Damage Value]
type = VarSet
trigger1 = !Time
v = 12
value = 52

[State 0, HitDef]
type = HitDef
trigger1 = Var(5) < 3
attr = S,SP
hitflag = MAF
guardflag = MAA
animtype = medium
priority = 3,Hit
damage = Ceil((Var(12) * FVar(10) * (0.5 + 1.0 * (!MoveHit||!NumTarget)))*Parent,FVar(20)),Ceil(128*0.33*const(BC.ChipHeavy))
guardpoints = 24
pausetime = 3, 6
guard.pausetime = 6,6
sparkno = ifelse(Parent,Var(11)>1&&Var(5)>=2,30,10 + random%4 + (Var(10)=1) * 5)
guard.sparkno = 40
sparkxy = 0,0;Floor(P2Dist X*0.5),-16+Floor(P2Dist Y*0.5)
hitsound = 1,2
guardsound = 5,1
ground.type = Low
ground.slidetime = 10
ground.hittime = 10
guard.hittime = 4
yaccel = 0.5
air.fall = 1
guard.dist = 32
ground.velocity = -4,0
air.velocity = -3,-1
getpower = floor(Var(12)*Root,Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Root,Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0

[State 0, HitAdd]
type = ParentVarAdd
trigger1 = NumTarget && MoveHit && Var(8) = 1
trigger1 = Target,StateNo = [5000,5400)
v = 51
value = 1
ignorehitpause = 1

[State 0, Snd Fire]
type = PlaySnd
trigger1 = NumTarget && MoveHit && Var(8) = 1
trigger1 = Target,StateNo = [5000,5400)
value = F1,10
channel = 1
ignorehitpause = 1

[State 0, ParentVarSet Counter Message]
type = ParentVarSet
trigger1 = NumTarget && MoveHit && Var(8) = 1 && HitCount = 1
trigger1 = Target,StateNo = [5000,5400)
trigger1 = Var(10)
v = 32
value = 63 + (Var(10) = 2) + (Var(10) = 3) * 10
ignorehitpause = 1

[State 0, TargetState]
type = RootMapSet
triggerall = NumTarget && MoveHit && Var(8) = 1
trigger1 = Target,StateNo = [5000,5400)
map = "HitFX"
value = 1
ignorehitpause = 1
redirectid = Target,ID

[State 0, TargetState]
type = TargetState
trigger1 = NumTarget && MoveHit && Var(8) = 1
trigger1 = Var(10) = 2 || Parent,Var(11) >= 2
trigger1 = Var(5) >= 2
value = 5325
ignorehitpause = 1

[State 0, Var Dull Dire]
type = RootVarSet
trigger1 = Var(10) = 2
trigger1 = Var(5) < 2
trigger1 = NumTarget && MoveHit && Var(8) = 1
var(11) = 2
ignorehitpause = 1
[State 0, Map Dire Trigger]
type = RootMapSet
trigger1 = Root,Var(11) >= 2 || Var(10) = 2
trigger1 = Var(5) >= 2
trigger1 = NumTarget && MoveHit && Var(8) = 1
map = "DireAct"
value = ifelse(Var(10)=2,2,Root,Var(11) - 1)
ignorehitpause = 1

[State 0, Dampening S]
type = ParentVarSet
trigger1 = NumTarget && MoveHit && Var(8) = 1
trigger1 = Target,StateNo = [5000,5400)
trigger1 = HitCount = 1
fv = 8
value = Parent,FVar(8)*(const(BC.ScalingM1) + const(BC.ScalingM2) * ifelse(Parent,FVar(8)<1,1-Parent,FVar(8),0))
ignorehitpause = 1

[State 0, PalFX]
type = PalFX
trigger1 = !Time
time = 666
add = 16,16,16
sinadd = 32,32,32,4

[State 0, DestroySelf]
type = DestroySelf
trigger1 = FrontEdgeDist < -64
[State 0, DestroySelf]
type = ChangeState
trigger1 = MoveContact && Var(5) >= 3
trigger2 = MoveReversed
trigger3 = Var(5) >= 3
trigger4 = Root,MoveType = H && Root,StateNo != [120,160)
value = 1061

;---------------------------------------------------------------------------
; H - Sunspot EX Hit
[Statedef 1061]
type    = A
movetype= A
physics = N
movehitpersist = 1

[State 0, VarSet]
type = VarAdd
trigger1 = !Time
v = 5
value = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = !Time
trigger1 = Var(5) < 3
trigger1 = !(Root,MoveType = H && Root,StateNo != [120,160))
trigger1 = !MoveReversed
value = 1060

[State 0, Explod]
type = Explod
trigger1 = !Time
anim = 1011
pos = 0,0
postype = p1
sprpriority = 3

[State 0, DestroySelf]
type = DestroySelf
trigger1 = !Time

;---------------------------------------------------------------------------
; DP+LP
[Statedef 1100]
type    = A
movetype= A
physics = N
velset = 0,0
anim = 1100 + (PrevStateNo=1101)
ctrl = 0
sprpriority = 2

[State 0, VarSet]
type = VarSet
trigger1 = !Time
v = 5
value = (PrevStateNo=1101)
[State 0, VarSet]
type = VarSet
trigger1 = !Time
trigger2 = Var(6) = -1
v = 6
value = -1 + (!Var(5)&&!map(b_x)||Var(5)&&map(b_y))
[State 0, VarSet]
type = VarSet
triggerall = Var(6) = 0
trigger1 = map(b_x) || map(b_y)
v = 6
value = 1

[State 0, ChangeState]
type = ChangeAnim
triggerall = Anim = [1100,1101] && AnimElem = 7
triggerall = RoundState = 2
triggerall = MoveHit
trigger1 = Var(6)
trigger2 = Var(10) = 2 || Var(11) > 1
value = 1105

[State 0, PosAdd]
type = PosAdd
triggerall = Anim = [1100,1101]
trigger1 = AnimElem = 4
trigger2 = AnimElem = 5
x = 8
[State 0, VelAdd]
type = VelAdd
trigger1 = Anim = 1105
y = 0.2 + 0.2 * (AnimElemNo(0) >= 9)

[State 210, 1]
type = PlaySnd
trigger1 = Anim = [1100,1101] && AnimElem = 2
trigger2 = Anim = 1105 && AnimElem = 6
value = F0, 2
[State 0, Snd Fire]
type = PlaySnd
trigger1 = Anim = [1100,1101] && AnimElem = 2
trigger2 = Anim = 1105 && AnimElem = 6
value = S1100,0
[State 210, 1]
type = PlaySnd
triggerall = Anim = 1105
trigger1 = AnimElem = 2
trigger2 = AnimElem = 3
trigger3 = AnimElem = 4
trigger4 = AnimElem = 5
value = F0, 0
channel = 1

[State 0, Var Voice Bank]
type = VarSet
trigger1 = Time = 3
v = 33
value = 1100 + !!Var(5)
[State 0, Var Voice Variant]
type = VarSet
trigger1 = Time = 3
v = 34
value = random%2
[State 0, Var Voice Bank]
type = VarSet
trigger1 = Anim = 1105 && AnimElem = 6
v = 33
value = 200
[State 0, Var Voice Variant]
type = VarSet
trigger1 = Anim = 1105 && AnimElem = 6
v = 34
value = random % const(BC.VoiceBankExert)

[State 0, NotHitBy]
type = NotHitBy
trigger1 = Var(5) && Time <= 7
value = ,NA,SA,NP,SP,NT,ST,HT
time = 1
[State 0, HitBy]
type = NotHitBy
trigger1 = !Var(5) && Time <= 8
trigger2 = Var(5) && Time = (7,13]
value = A
time = 1

[State 0, Var Damage Value]
type = VarSet
trigger1 = !MoveContact && !MoveReversed
v = 12
value = 112
[State 0, Var Damage Value]
type = VarSet
trigger1 = Anim = 1105 && AnimElem = 7
v = 12
value = 16

[State 0, HitDef]
type = HitDef
triggerall = Anim != 1105
trigger1 = !MoveContact && !MoveReversed
attr = S,SA
hitflag = MAF
guardflag = MA
animtype = heavy
priority = 5,Hit
damage = Ceil(Var(12) * FVar(10) * FVar(20)),Ceil(Var(12)*const(BC.ChipLight))
guardpoints = floor((32 + Var(12)) * 0.5)
pausetime = 12,12
sparkno = 10 + random%4 + (Var(10)=1) * 5
guard.sparkno = 40
sparkxy = -40+Floor(P2Dist X*0.5),-56+Floor(P2Dist Y*0.5)
hitsound = 1,2
guardsound = 5,1
ground.type = Low
ground.slidetime = 21
ground.hittime = 21
guard.hittime = 8
yaccel = 0.5
fall = 1
fall.xvelocity = -0.25
ground.velocity = -3 + (P2Dist X * 0.025),-8 - (Var(5) * 2)
air.velocity = -3 + (P2Dist X * 0.025),-8.5 - (Var(5) * 1.5) - P2Dist Y * 0.033
p2facing = 1
getpower = floor(Var(12)*Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))
[State 0, HitDef]
type = HitDef
trigger1 = Anim = 1105 && AnimElem = 7
attr = A,SA
hitflag = MAF
guardflag = MA
animtype = heavy
priority = 5,Hit
damage = Ceil(Var(12) * FVar(10) * FVar(20)),Ceil(Var(12)*const(BC.ChipLight))
guardpoints = floor((32 + Var(12)) * 0.5)
pausetime = 12,12+Var(13)
guard.pausetime = 12,12
sparkno = ifelse(Var(10)=2||Var(11)>1,30,10 + random%4 + (Var(10)=1) * 5)
guard.sparkno = 40
sparkxy = -32+Floor(P2Dist X*0.5),-40+Floor(P2Dist Y*0.5)
hitsound = 1,3
guardsound = 5,1
ground.type = Low
ground.slidetime = 21
ground.hittime = 21
guard.hittime = 8
yaccel = 0.5
fall = 1
ground.velocity = -6,8
air.velocity = -6,4
fall.yvelocity = -3 + Var(5)
p2facing = 1
getpower = floor(Var(12)*Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))

[State 0, TargetState]
type = TargetState
triggerall = NumTarget
trigger1 = MoveHit && Var(8) = 1
trigger1 = Target,MoveType = H && (Target,StateNo = [5000,5100))
trigger1 = Var(10) != 2 && Var(11) <= 1
trigger1 = Anim = 1105
value = 5355
ignorehitpause = 1
[State 0, Var Dull Dire]
type = VarSet
triggerall = MoveHit && !MoveReversed
triggerall = EnemyNear,MoveType = H
triggerall = Var(10) = 2
trigger1 = Var(8) = 1 && Anim = [1100,1101]
var(11) = 2
[State 0, Map Dire Trigger]
type = MapSet
triggerall = MoveHit && !MoveReversed
triggerall = NumTarget && EnemyNear,MoveType = H
triggerall = Var(10) = 2 || Var(11) > 1
trigger1 = Var(8) = 1
trigger1 = Anim = 1105
map = "DireAct"
value = 5345
ignorehitpause = 1

[State 0, TargetState]
type = MapSet
triggerall = NumTarget && MoveHit && Var(8) = 1
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
map = "HitFX"
value = 1
ignorehitpause = 1
redirectid = Target,ID

[State 0, Explod]
type = Explod
trigger1 = Anim = [1100,1101] && AnimElemNo(0) = 3
trigger1 = GameTime%3
anim = 1110
id = 3000
postype = p1
sprpriority = 4
ownpal = 1
ignorehitpause = 1
[State 0, Explod]
type = Explod
trigger1 = Anim = [1100,1101] && AnimElemNo(0) = 4
trigger1 = GameTime%3
anim = 1111
id = 3000
postype = p1
sprpriority = 4
ownpal = 1
ignorehitpause = 1
[State 0, Explod]
type = Explod
trigger1 = Anim = [1100,1101] && AnimElemNo(0) = 5
trigger1 = GameTime%3
anim = 1112
id = 3000
postype = p1
sprpriority = 4
removetime = 1
ownpal = 1
ignorehitpause = 1
[State 0, Explod]
type = Explod
trigger1 = Anim = [1100,1101] && AnimElem = 6
anim = 1112
id = 3000
postype = p1
sprpriority = 4
ownpal = 1
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = Anim = 1110 && AnimElem = 6
anim = 1115
id = 3000
postype = p1
bindtime = 8
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 0, VelSet]
type = VelSet
trigger1 = Anim = [1100,1101] && AnimElem = 3
x = 4 + Var(5)
[State 0, VelSet]
type = VelSet
trigger1 = Anim = [1100,1101] && AnimElem = 4
y = -7 - (Var(5) * 2)
[State 0, VelAdd]
type = VelAdd
trigger1 = Anim = [1100,1101] && AnimElemNo(0) >= 4
y = 0.5
[State 0, VelMul]
type = VelMul
trigger1 = Anim = [1100,1101] && AnimElemNo(0) >= 4
x = 0.85 + (Var(5) * 0.05)

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = Anim = [1100,1101] && AnimElem = 6
trigger2 = Anim = 1105 && AnimElem = 9
movetype = I
[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = Anim = 1105 && AnimElem = 1
movetype = A

[State 1000, 7]
type = ChangeState
trigger1 = Pos Y + Vel Y > Map(StageGround)
value = 1105

;---------------------------------------------------------------------------
; DP+SP
[Statedef 1101]
type    = S
movetype= A
physics = S
anim = 666

[State 0, VarSet]
type = VarSet
trigger1 = !Time
v = 5
value = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = !Time
value = 1100

;---------------------------------------------------------------------------
; DP Land
[Statedef 1105]
type    = S
movetype= I
physics = S
anim = 47
velset = 0,0
ctrl = 0

[State 0, PosSet]
type = PosSet
trigger1 = !Time
y = 0

[State 0, MapSet]
type = MapSet
trigger1 = !Time
map = "LandDustFX"
value = 1

[State 0, CtrlSet]
type = CtrlSet
trigger1 = Time = 6
trigger1 = PrevStateNo != 900
value = 1

[State 1000, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; DP+2P
[Statedef 1150]
type    = A
movetype= A
physics = N
velset = 0,0
anim = 1150
ctrl = 0
sprpriority = 2

[State 0, Map Ajit EX Palette]
type = MapSet
trigger1 = !Time
map = "AjixEX"
value = 666
[State 210, Snd EX]
type = PlaySnd
trigger1 = !Time
value = S1050, 0

[State 0, VarSet]
type = VarSet
trigger1 = !Time
v = 5
value = 0
[State 0, VarSet]
type = VarSet
trigger1 = MoveHit && Var(8) = 1
trigger1 = NumTarget && AnimElemNo(0) <= 4
v = 5
value = 1
ignorehitpause = 1

[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 4
trigger3 = AnimElem = 5
x = max(0,min(12,P2BodyDist X+666*(abs(P2Dist Y)>const(size.height))))

[State 210, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = F0, 2
[State 0, Snd Fire]
type = PlaySnd
trigger1 = AnimElem = 2
value = S1100,0

[State 0, Var Voice Bank]
type = VarSet
trigger1 = Time = 3
v = 33
value = 1150
[State 0, Var Voice Variant]
type = VarSet
trigger1 = Time = 3
v = 34
value = random%3

[State 0, NotHitBy]
type = NotHitBy
trigger1 = Time < 10
value = ,NA,SA,NP,SP,NT,ST
time = 2

[State 0, Var Damage Value]
type = VarSet
trigger1 = !MoveContact && !MoveReversed
v = 12
value = 136

[State 0, HitDef]
type = HitDef
trigger1 = !MoveContact && !MoveReversed
attr = S,SA
hitflag = MAF
guardflag = MA
animtype = heavy
priority = 9,Hit
damage = Ceil(Var(12)*FVar(10)*FVar(20)),Ceil(Var(12)*const(BC.ChipHeavy))
guardpoints = floor((32 + Var(12)) * 0.5)
pausetime = 12,12
sparkno = 10 + random%4 + (Var(10)=1) * 5
guard.sparkno = 40
sparkxy = -40+Floor(P2Dist X*0.5),-56+Floor(P2Dist Y*0.5)
hitsound = 1,2
guardsound = 5,1
ground.type = Low
ground.slidetime = 32
ground.hittime = 32
guard.hittime = 16
yaccel = 0.5
fall = 1
fall.xvelocity = -0.5
ground.velocity = -2 + (P2BodyDist X * 0.05),-8.5 - 3*(AnimElemNo(0)>4)
air.velocity = -2 + (P2BodyDist X * 0.05),-7.5 - (P2Dist Y*0.015*(AnimElemNo(0)<=4)) - 3*(AnimElemNo(0)>4)
p2facing = 1
getpower = floor(Var(12)*Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))

[State 0, Var Dire Counter Stack On]
type = VarSet
triggerall = MoveHit && !MoveReversed
triggerall = EnemyNear,MoveType = H
trigger1 = Var(8) = 1 && Var(10) = 2
v = 11
value = 3
ignorehitpause = 1
[State 0, TargetState]
type = TargetState
triggerall = NumTarget
trigger1 = MoveHit && Var(8) = 1
trigger1 = Target,MoveType = H && (Target,StateNo = [5000,5100))
trigger1 = Var(11) > 1 && !Var(5)
value = 5335
ignorehitpause = 1
[State 0, Dire Counter Stack Reduce]
type = VarAdd
triggerall = MoveHit && !MoveReversed
triggerall = EnemyNear,MoveType = H && Var(8) = 1
trigger1 = Var(11) > 1 && !Var(5)
v = 11
value = -1
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = AnimElemNo(0) = 4
trigger1 = GameTime%3
anim = 1110
postype = p1
sprpriority = 4
ownpal = 1
ignorehitpause = 1
[State 0, Explod]
type = Explod
trigger1 = AnimElemNo(0) = 5
trigger1 = GameTime%3
anim = 1111
postype = p1
sprpriority = 4
ownpal = 1
ignorehitpause = 1
[State 0, Explod]
type = Explod
trigger1 = AnimElemNo(0) = 6
trigger1 = GameTime%3
anim = 1112
postype = p1
sprpriority = 4
removetime = 1
ownpal = 1
ignorehitpause = 1
[State 0, Explod]
type = Explod
trigger1 = AnimElem = 7
anim = 1112
postype = p1
sprpriority = 4
ownpal = 1
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 4
x = max(1,min(4,p2dist x * 0.1))
[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 5
y = -8
[State 0, VelAdd]
type = VelAdd
trigger1 = AnimElemNo(0) >= 5
y = 0.5
[State 0, VelMul]
type = VelMul
trigger1 = AnimElemNo(0) >= 5
x = 0.85

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 7
movetype = I

[State 0, VarAdd]
type = VarAdd
trigger1 = !Time
v = 18
value = -1000
[State 0, VarSet Side-L Buff]
type = VarSet
trigger1 = !Time
fv = 20
value = min(fvar(20)+0.0667,1.20)

[State 0, TargetState]
type = MapSet
triggerall = NumTarget && MoveHit && Var(8) = 1
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
map = "HitFX"
value = 1
ignorehitpause = 1
redirectid = Target,ID

[State 0, ChangeState]
type = ChangeState
triggerall = AnimElem = 8
triggerall = RoundState = 2
triggerall = MoveHit
trigger1 = Var(5)
value = 1160
[State 1000, 7]
type = ChangeState
trigger1 = Pos Y + Vel Y > Map(StageGround)
trigger1 = AnimElemNo(0) >= 6
value = 1105

;---------------------------------------------------------------------------
; DP+2P Followup
[Statedef 1160]
type    = A
movetype= A
physics = N
anim = 1105
ctrl = 0
sprpriority = 2

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = AnimElem = 5
value = Anim
elem = 6

[State 0, VelAdd]
type = VelAdd
trigger1 = AnimElemNo(0) <= 6
y = 0.5
[State 0, VelAdd]
type = VelAdd
trigger1 = 1
y = 0.2 + 0.3 * (AnimElemNo(0) >= 9)

[State 210, 1]
type = PlaySnd
trigger1 = AnimElem = 2
trigger2 = AnimElem = 3
trigger3 = AnimElem = 4
trigger4 = AnimElem = 5
value = F0, 0
channel = 1
[State 210, 1]
type = PlaySnd
trigger1 = AnimElem = 6
value = F0, 2
channel = 1
[State 0, Snd Fire]
type = PlaySnd
trigger1 = AnimElem = 6
value = S1100,0

[State 0, Var Voice Bank]
type = VarSet
trigger1 = AnimElem = 6
v = 33
value = 200
[State 0, Var Voice Variant]
type = VarSet
trigger1 = AnimElem = 6
v = 34
value = random%44

[State 0, Explod]
type = Explod
trigger1 = AnimElem = 6
anim = 1115
postype = p1
bindtime = 8
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 0, Var Damage Value]
type = VarSet
trigger1 = !MoveContact && !MoveReversed
v = 12
value = 48

[State 0, HitDef]
type = HitDef
trigger1 = !MoveContact && !MoveReversed
attr = A,SA
hitflag = MAF
guardflag = MA
animtype = heavy
priority = 5,Hit
damage = Ceil(Var(12)*FVar(10)*FVar(20)),Ceil(Var(12)*const(BC.ChipHeavy))
guardpoints = floor((32 + Var(12)) * 0.5)
pausetime = 12,12+Var(13)
guard.pausetime = 12,12
sparkno = ifelse(Var(10)=2||Var(11)>=2,30,10 + random%4 + (Var(10)=1) * 5)
guard.sparkno = 40
sparkxy = -32+Floor(P2Dist X*0.5),-40+Floor(P2Dist Y*0.5)
hitsound = 1,2
guardsound = 5,1
ground.type = Low
ground.slidetime = 32
ground.hittime = 32
guard.hittime = 16
air.hittime = 32
yaccel = 0.5
fall = 1
fall.recover = 0
fall.recovertime = 510
ground.velocity = -2,8
air.velocity = -2,8
fall.yvelocity = -2
p2facing = 1
getpower = floor(Var(12)*Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))

[State 0, TargetState]
type = TargetState
triggerall = NumTarget
trigger1 = MoveHit && Var(8) = 1
trigger1 = Target,MoveType = H && (Target,StateNo = [5000,5100))
trigger1 = Var(10) = 2 || Var(11) >= 2
value = 5345
ignorehitpause = 1
[State 0, Dire Counter Stack Reduce]
type = VarAdd
triggerall = MoveHit && !MoveReversed
triggerall = EnemyNear,MoveType = H
trigger1 = Var(11) > 1 && Var(8) = 1
v = 11
value = -1
ignorehitpause = 1
[State 0, Var Dire Counter Stack On]
type = VarSet
triggerall = MoveHit && !MoveReversed
triggerall = EnemyNear,MoveType = H
trigger1 = Var(8) = 1 && Var(10) = 2
v = 11
value = 2
ignorehitpause = 1

[State 0, TargetState]
type = MapSet
triggerall = NumTarget && MoveHit && Var(8) = 1
trigger1 = Target,StateNo = [5000,5100) && Target,StateNo%10 = 0
map = "HitFX"
value = 1
ignorehitpause = 1
redirectid = Target,ID

[State 1000, 7]
type = ChangeState
trigger1 = Pos Y + Vel Y > Map(StageGround)
trigger1 = AnimElemNo(0) >= 9
value = 1105

;---------------------------------------------------------------------------
; QCB+LK S-L
[Statedef 1200]
type    = U
movetype= A
physics = N
velset = 0,0
ctrl = 0
sprpriority = 2

[State 0, VarSet]
type = VarSet
trigger1 = !Time
trigger1 = PrevStateNo != 1201
v = 5
value = 0
[State 0, VarSet]
type = VarSet
trigger1 = !Time
v = 6
value = StateType = A
[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = !Time
statetype = A

[State 210, 1]
type = PlaySnd
trigger1 = Anim = 1200 && AnimElem = 4
trigger2 = Anim = 1200 && AnimElem = 8
trigger3 = Anim = 1201 && AnimElem = 6
value = F0, 2
[State 210, 1]
type = PlaySnd
trigger1 = Anim = 1201 && AnimElem = 3
value = F0, 1

[State 0, Var Voice Bank]
type = VarSet
trigger1 = Anim = 1200 && AnimElem = 4 && !Var(5)
trigger2 = Anim = 1200 && AnimElem = 8 && !Var(5)
trigger3 = Anim = 1201 && AnimElem = 6
trigger4 = Anim = 1201 && AnimElem = 3
v = 33
value = 1200
[State 0, Var Voice Variant]
type = VarSet
trigger1 = Anim = 1200 && AnimElem = 4 && !Var(5)
trigger2 = Anim = 1200 && AnimElem = 8 && !Var(5)
trigger3 = Anim = 1201 && AnimElem = 6
trigger4 = Anim = 1201 && AnimElem = 3
v = 34
value = 4 + random%5
[State 0, Var Voice Bank]
type = VarSet
trigger1 = Anim = 1200 && AnimElem = 4 && Var(5)
v = 33
value = 1201
[State 0, Var Voice Variant]
type = VarSet
trigger1 = Anim = 1200 && AnimElem = 4 && Var(5)
v = 34
value = random%2

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = !Time
value = 1200
elem = 1 + 2 * Var(6)
[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = AnimElem = 11, 2
trigger1 = Anim = 1200
trigger1 = Var(5)
value = 1201

[State 0, VelSet]
type = VelSet
trigger1 = Anim = 1200 && AnimElem = 3
trigger1 = Var(6) = 0
trigger2 = !Time && Var(6) = 1
y = -4.5 + (Var(6)>0 || Pos Y < -16)
[State 0, VelSet]
type = VelSet
trigger1 = Anim = 1200 && AnimElemNo(0) = 3
x = 4
[State 0, VelSet]
type = VelSet
trigger1 = Anim = 1201 && AnimElem = 2
y = -2.5
[State 0, VelMul]
type = VelMul
trigger1 = Time <= 16
y = 0.80
[State 0, VelMul]
type = VelMul
trigger1 = Anim = 1200 && AnimElemNo(0) >= 9
trigger2 = Anim = 1201 && AnimElemNo(0) >= 4
x = 0.975
[State 0, VelAdd]
type = VelAdd
trigger1 = Anim = 1200 && AnimElemNo(0) >= 9
trigger2 = Anim = 1201 && AnimElemNo(0) >= 8
y = 0.4
[State 0, VelAdd]
type = VelAdd
trigger1 = Anim = 1201 && AnimElemNo(0) < 8
y = 0.15

[State 0, Var Damage Value]
type = VarSet
trigger1 = Anim = 1200
v = 12
value = 56 - (20 * Var(5))

[State 0, HitDef 1st 2nd]
type = HitDef
trigger1 = Anim = 1200 && AnimElem = 5
trigger2 = Anim = 1200 && AnimElem = 9
attr = A,SA
hitflag = MAF
guardflag = MAA
animtype = heavy
priority = 4,Hit
damage = Ceil(Var(12) * FVar(10) * FVar(20) * (1.5 - 0.75 * !!MoveHit)),Ceil(128*0.25*const(BC.ChipLight))
guardpoints = floor((16 + Var(12)) * 0.5)
pausetime = 9 + 3 * (AnimElemNo(0)>=9&&!Var(5)),9 + (3 + Var(13)) * (AnimElemNo(0)>=9&&!Var(5))
guard.pausetime = 9 + 3 * (AnimElemNo(0)>=9&&!Var(5)),9 + 3 * (AnimElemNo(0)>=9&&!Var(5))
sparkno = 5 + random%4 + (Var(10)=1) * 5
guard.sparkno = 40
sparkxy = -40+Floor(P2Dist X*0.5),-40+Floor(P2Dist Y*0.5)
hitsound = 1,2
guardsound = 5,1
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
guard.hittime = 14
yaccel = 0.5
air.fall = 1
ground.velocity = -6.5 + p2dist x * 0.01,0
air.velocity = -4 + p2dist x * 0.02 + (!Var(5) && AnimElemNo(0) = 9) * 2,-3 + (-1 - p2dist y * 0.01) * (Var(5)=0&&AnimElemNo(0)>=9)
p2facing = 1
forcestand = 1
getpower = floor(Var(12)*Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))

[State 0, HitDef 2nd DH]
type = HitDef
trigger1 = Anim = 1200 && AnimElem = 9
trigger1 = !Var(5) && Var(11) >= 2
attr = A,SA
hitflag = MAF
guardflag = MAA
animtype = heavy
priority = 4,Hit
damage = Ceil(Var(12) * FVar(10) * FVar(20) * (1.5 - 0.75 * !!MoveHit)),Ceil(128*0.25*const(BC.ChipLight))
guardpoints = floor((16 + Var(12)) * 0.5)
pausetime = 12,12+Var(13)
guard.pausetime = 12,12
sparkno = 30
guard.sparkno = 40
sparkxy = -40+Floor(P2Dist X*0.5),-40+Floor(P2Dist Y*0.5)
hitsound = 1,2
guardsound = 5,1
ground.type = Low
ground.slidetime = 21
ground.hittime = 21
guard.hittime = 15
air.hittime = 18
yaccel = 0.5
air.fall = 1
ground.velocity = -6 + p2dist x * 0.01,0
air.velocity = -2 + p2dist x * 0.01,-3
forcestand = 1
getpower = floor(Var(12)*Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))

[State 0, HitDef 3rd]
type = HitDef
trigger1 = Anim = 1201 && AnimElem = 4
attr = A,SA
hitflag = MAF
guardflag = MAA
animtype = heavy
priority = 4,Hit
damage = Ceil(Var(12) * FVar(10) * FVar(20) * (1.5 - 0.75 * !!MoveHit)),Ceil(128*0.25*const(BC.ChipLight))
guardpoints = floor((16 + Var(12)) * 0.5)
pausetime = 9, 9
sparkno = 5 + random%4 + (Var(10)=1) * 5
guard.sparkno = 40
sparkxy = -40+Floor(P2Dist X*0.5),-40+Floor(P2Dist Y*0.5)
hitsound = 1,2
guardsound = 5,1
ground.type = Low
ground.slidetime = 21
ground.hittime = 21
guard.hittime = 15
air.hittime = 18
yaccel = 0.5
fall = 1
ground.velocity = -3 + p2dist x * 0.01,-6
air.velocity = -2.75 + p2dist x * 0.01,-5
forcestand = 1
getpower = floor(Var(12)*Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))

[State 0, HitDef 4th]
type = HitDef
trigger1 = Anim = 1201 && AnimElem = 7
attr = A,SA
hitflag = MAF
guardflag = MAA
animtype = heavy
priority = 4,Hit
damage = Ceil(Var(12) * FVar(10) * FVar(20) * (1.5 - 0.75 * !!MoveHit)),Ceil(128*0.25*const(BC.ChipLight))
guardpoints = floor((16 + Var(12)) * 0.5)
pausetime = 12,12+Var(13)
guard.pausetime = 12,12
sparkno = ifelse(Var(10)=2||Var(11)>=2,30,10 + random%4 + (Var(10)=1) * 5)
guard.sparkno = 40
sparkxy = -40+Floor(P2Dist X*0.5),-40+Floor(P2Dist Y*0.5)
hitsound = 1,3
guardsound = 5,1
ground.type = Low
ground.slidetime = 21
ground.hittime = 21
guard.hittime = 11
yaccel = 0.5
fall = 1
fall.yvelocity = -1.25 + (EnemyNear,Pos Y * 0.02)
ground.velocity = -5,0
air.velocity = -1,6
getpower = floor(Var(12)*Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))

[State 0, TargetState]
type = TargetState
triggerall = NumTarget
triggerall = MoveHit && Var(8) = 1
triggerall = Target,MoveType = H && (Target,StateNo = [5000,5100))
trigger1 = Anim = 1200 && AnimElemNo(0) >= 8 && !Var(5)
trigger1 = (Var(10) = 2 || Var(11) >= 2) || EnemyNear,StateType = A
trigger2 = Anim = 1201 && AnimElemNo(0) >= 7 && Var(5)
value = ifelse(Anim!=1200,ifelse(Var(10) = 2 || Var(11) >= 2,5345,5355),ifelse(Var(10) = 2 || Var(11) >= 2,5330,5090))
ignorehitpause = 1
[State 0, Dire Counter Stack Reduce]
type = VarAdd
triggerall = MoveHit && !MoveReversed
triggerall = EnemyNear,MoveType = H
triggerall = Var(11) > 1 && Var(8) = 1
trigger1 = Anim = 1200 && AnimElemNo(0) >= 8 && !Var(5)
trigger2 = Anim = 1201 && AnimElemNo(0) >= 7 && Var(5)
v = 11
value = -1
ignorehitpause = 1
[State 0, Var Dire Counter Stack On]
type = VarSet
triggerall = MoveHit && !MoveReversed
triggerall = EnemyNear,MoveType = H
trigger1 = Var(8) = 1 && Var(10) = 2
v = 11
value = ifelse(!Var(5)&&AnimElemNo(0)<8||Var(5)&&Anim=1200||Var(5)&&Anim=1201&&AnimElemNo(0)<6,3,2)
ignorehitpause = 1

[State 0, Explod]
type = Explod
triggerall = GameTime%2
trigger1 = Anim = 1200 && AnimElemNo(0) = 4
trigger2 = Anim = 1200 && AnimElemNo(0) = 5
trigger3 = Anim = 1200 && AnimElemNo(0) = 8
trigger4 = Anim = 1200 && AnimElemNo(0) = 9
trigger5 = Anim = 1201 && AnimElemNo(0) = 3
trigger6 = Anim = 1201 && AnimElemNo(0) = 4
trigger7 = Anim = 1201 && AnimElemNo(0) = 6
trigger8 = Anim = 1201 && AnimElemNo(0) = 7
anim = 1210 + (1 * (Anim=1200&&AnimElemNo(0)=5)) + (3 * (Anim=1200&&AnimElemNo(0)=8)) + (4 * (Anim=1200&&AnimElemNo(0)=9)) + (6 * (Anim=1201&&AnimElemNo(0)=3)) + (7 * (Anim=1201&&AnimElemNo(0)=4)) + (9 * (Anim=1201&&AnimElemNo(0)=6)) + (10 * (Anim=1201&&AnimElemNo(0)=7))
id = 3000
postype = p1
bindtime = 666
removetime = 1
pausemovetime = 666
sprpriority = 3
ownpal = 1
removeongethit = 1
ignorehitpause = 1
[State 0, Explod]
type = Explod
trigger1 = Anim = 1200 && AnimElem = 6
trigger2 = Anim = 1200 && AnimElem = 10
trigger3 = Anim = 1201 && AnimElem = 5
trigger4 = Anim = 1201 && AnimElem = 8
anim = 1212 + (3 * (AnimElemNo(0)=10)) + (6 * (AnimElemNo(0)=5)) + (9 * (AnimElemNo(0)=8))
id = 3000
postype = p1
vel = vel x,0
accel = vel x * -0.1,0
sprpriority = 3
ownpal = 1
ignorehitpause = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = Anim = 1200 && AnimElem = 10 && !Var(5)
trigger2 = Anim = 1201 && AnimElem = 8 && Var(5)
movetype = I

[State 0, ChangeState]
type = ChangeState
trigger1 = Time >= 16
trigger1 = Pos Y + Vel Y > Map(StageGround)
value = 1105

;---------------------------------------------------------------------------
; QCB+SK S-L
[Statedef 1201]
type    = U
movetype= A
physics = U
anim = 666

[State 0, VarSet]
type = VarSet
trigger1 = !Time
v = 5
value = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = !Time
value = 1200

;---------------------------------------------------------------------------
; QCB+LK S-C
[Statedef 1205]
type    = U
movetype= A
physics = N
velset = 0,0
ctrl = 0
sprpriority = 2
anim = 1205 + (PrevStateNo=1206)

[State 0, VarSet]
type = VarSet
trigger1 = !Time
v = 5
value = (PrevStateNo=1206)
[State 0, VarSet]
type = VarSet
trigger1 = !Time
v = 6
value = (StateType = A)
[State 0, VarSet]
type = VarSet
trigger1 = !MoveContact
v = 7
value = min(500,floor(300*(EnemyNear,StateType!=A||Var(10)=2||Var(11)>=2)-Pos Y*2.5-EnemyNear,Pos Y*2.5))
[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = !Time && StateType = C
statetype = S
[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = !Time && Pos Y != 0
trigger2 = AnimElem = 3
statetype = A

[State 210, 1]
type = PlaySnd
trigger1 = AnimElem = 4
trigger2 = AnimElem = 8
trigger3 = AnimElem = 13
trigger4 = AnimElem = 16 && Var(5)
value = F0, 2

[State 0, Var Voice Bank]
type = VarSet
trigger1 = AnimElem = 4 && !Var(5)
trigger2 = AnimElem = 8 && !Var(5)
trigger3 = AnimElem = 13 && !Var(5)
trigger4 = AnimElem = 16 && Var(5)
v = 33
value = 1200
[State 0, Var Voice Variant]
type = VarSet
trigger1 = AnimElem = 4 && !Var(5)
trigger2 = AnimElem = 8 && !Var(5)
trigger3 = AnimElem = 13 && !Var(5)
trigger4 = AnimElem = 16 && Var(5)
v = 34
value = 4 + random%5
[State 0, Var Voice Bank]
type = VarSet
trigger1 = AnimElem = 4 && Var(5)
v = 33
value = 1201
[State 0, Var Voice Variant]
type = VarSet
trigger1 = AnimElem = 4 && Var(5)
v = 34
value = random%2

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = !Time
value = Anim
elem = 1 + 2 * (StateType=A)

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 3
x = 1.5 + 3 * Var(5)
y = -3.75 + 1.25 * Var(5) + 0.25 * Var(6)
[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 7
x = 1.5 + 3 * Var(5)
y = -2.75 + 1.25 * Var(5) + 0.5 * Var(6)
[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 12
x = 1.0 + 1.5 * Var(5)
y = -4.5 - EnemyNear,Pos Y * 0.01 ;-2.5 + 0.25 * Var(6)
[State 0, VelAdd]
type = VelAdd
trigger1 = AnimElem = 16 && Var(5)
y = -Vel Y * 0.5
[State 0, VelAdd]
type = VelAdd
trigger1 = AnimElemNo(0) >= 4
y = 0.3 + (0.1 + 0.1 * !Var(5)) * (AnimElemNo(0) >= 16 + Var(5))
[State 0, VelMul]
type = VelMul
triggerall = MoveGuarded
trigger1 = AnimElem = 7
trigger2 = AnimElem = 12
trigger3 = AnimElem = 16 && Var(5)
x = 0.5

[State 0, Var Damage Value]
type = VarSet
trigger1 = !Time
v = 12
value = 52 - (2 * Var(5))

[State 0, HitDef]
type = HitDef
trigger1 = !MoveContact && !MoveReversed
trigger1 = AnimElemNo(0) < 6
attr = A,SA
hitflag = MAF
guardflag = MAA
animtype = heavy
priority = 4,Hit
damage = Ceil(Var(12) * FVar(10) * FVar(20) * (1.5 - 1.0 * !!MoveHit)),Ceil(152*0.25*const(BC.ChipLight))
guardpoints = floor((16 + Var(12)) * 0.5)
pausetime = 6,6
guard.pausetime = 6,6
sparkno = 5 + random%4
guard.sparkno = 40
sparkxy = -40+Floor(P2Dist X*0.5),-40+Floor(P2Dist Y*0.5)
hitsound = 1,2
guardsound = 5,1
ground.type = Low
ground.slidetime = 21
ground.hittime = 21
guard.hittime = 15
yaccel = 0.5
air.fall = 1
fall = !Var(5)
ground.velocity = -Vel X*1.5 + (P2BodyDist X * 0.05),(-6 - P2Dist Y * 0.05)
air.velocity = -Vel X*1.1 + p2bodydist x * 0.025,-3 - P2Dist Y * 0.05
guard.velocity = Vel X * -1.5
p2facing = 1
forcestand = 1
getpower = floor(Var(12)*Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))
[State 0, HitDef]
type = HitDef
trigger1 = !MoveContact && !MoveReversed
trigger1 = AnimElemNo(0) = [6,9]
trigger2 = AnimElem = 9
attr = A,SA
hitflag = MAF
guardflag = MAA
animtype = heavy
priority = 4,Hit
damage = Ceil(Var(12) * FVar(10) * FVar(20) * (1.5 - 1.0 * !!MoveHit)),Ceil(152*0.25*const(BC.ChipLight))
guardpoints = floor((16 + Var(12)) * 0.25)
pausetime = 6,6
guard.pausetime = 6,6
sparkno = 5 + random%4
guard.sparkno = 40
sparkxy = -40+Floor(P2Dist X*0.5),-40+Floor(P2Dist Y*0.5)
hitsound = 1,2
guardsound = 5,1
ground.type = Low
ground.slidetime = 21
ground.hittime = 21
guard.hittime = 15
yaccel = 0.5
air.fall = 1
fall = 1
ground.velocity = -Vel X*1.5 + (P2BodyDist X * 0.05),(-4 - P2Dist Y * 0.05)
air.velocity = -Vel X*1.1 + p2bodydist x * 0.025,-3 - P2Dist Y * 0.025
guard.velocity = Vel X * -1.5
p2facing = 1
forcestand = 1
getpower = floor(Var(12)*Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))
[State 0, HitDef]
type = HitDef
trigger1 = !MoveContact && !MoveReversed
trigger1 = AnimElemNo(0) = [10,14]
trigger2 = AnimElem = 14
attr = A,SA
hitflag = MAF
guardflag = MAA
animtype = heavy
priority = 4,Hit
damage = Ceil(Var(12) * FVar(10) * FVar(20) * (1.5 - 1.0 * !!MoveHit)),Ceil(152*0.25*const(BC.ChipLight))
guardpoints = floor((16 + Var(12)) * 0.25)
pausetime = 6+6*!Var(5),6+(6+Var(13))*!Var(5)
guard.pausetime = 6+6*!Var(5),6+6*!Var(5)
sparkno = ifelse((Var(10)=2||Var(11)>=2)&&!Var(5),30,10 + random%4 + (Var(10)=1&&!Var(5)) * 5)
guard.sparkno = 40
sparkxy = -40+Floor(P2Dist X*0.5),-40+Floor(P2Dist Y*0.5)
hitsound = 1,2+!Var(5)
guardsound = 5,1
ground.type = Low
ground.slidetime = 19
ground.hittime = 19
guard.hittime = 14
yaccel = 0.5
fall = 1
ground.velocity = -Vel X*0.9 + p2bodydist x * 0.025 * !Var(5),-6 + P2Dist Y * 0.02 - Var(7) * 0.01
air.velocity = -Vel X*0.9 + p2bodydist x * 0.025 * !Var(5),-5 - Var(7) * 0.01 * !Var(5) - P2Dist Y * 0.015 * Var(5)
guard.velocity = Vel X * -1.5
p2facing = 1
forcestand = 1
getpower = floor(Var(12)*Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))
[State 0, HitDef]
type = HitDef
trigger1 = !MoveContact && !MoveReversed
trigger1 = AnimElemNo(0) >= 15
trigger2 = AnimElem = 17
attr = A,SA
hitflag = MAF
guardflag = HAA
animtype = heavy
priority = 4,Hit
damage = Ceil(Var(12) * FVar(10) * FVar(20) * (1.5 - 1.0 * !!MoveHit)),Ceil(152*0.25*const(BC.ChipLight))
guardpoints = floor((16 + Var(12)) * 0.25)
pausetime = 12,12+Var(13)
guard.pausetime = 12,12
sparkno = ifelse(Var(10)=2||Var(11)>=2,30,10 + random%4 + (Var(10)=1) * 5)
guard.sparkno = 40
sparkxy = -40+Floor(P2Dist X*0.5),-40+Floor(P2Dist Y*0.5)
hitsound = 1,3
guardsound = 5,1
ground.type = Low
ground.slidetime = 21
ground.hittime = 21
guard.hittime = 12
yaccel = 0.5
fall = 1
fall.yvelocity = -1.5; + Var(7) * 0.001
ground.velocity = -3,6
air.velocity = -1 - Var(5) + p2dist x * 0.015 * !Var(5),8
guard.velocity = Vel X * -1.5
p2facing = 1
forcestand = 1
getpower = floor(Var(12)*Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))

[State 0, TargetState]
type = TargetState
triggerall = MoveHit && !MoveReversed
triggerall = NumTarget && EnemyNear,MoveType = H
trigger1 = Var(8) = 1
trigger1 = Var(10) != 2 && Var(11) <= 1
trigger1 = AnimElemNo(0) >= 17 && Var(5)
value = 5355
ignorehitpause = 1
[State 0, Var Dull Dire]
type = VarSet
triggerall = MoveHit && !MoveReversed
triggerall = EnemyNear,MoveType = H
triggerall = Var(10) = 2
trigger1 = Var(8) = 1
trigger1 = AnimElemNo(0) < 14 && !Var(5) || AnimElemNo(0) < 17 && Var(5)
var(11) = 2
ignorehitpause = 1
[State 0, Map Dire Trigger]
type = MapSet
triggerall = MoveHit && !MoveReversed
triggerall = NumTarget && EnemyNear,MoveType = H
triggerall = Var(10) = 2 || Var(11) > 1
trigger1 = Var(8) = 1
trigger1 = AnimElemNo(0) >= 14 && !Var(5) || AnimElemNo(0) >= 17 && Var(5)
map = "DireAct"
value = ifelse(Var(5),5345,5400)
ignorehitpause = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 15 && !Var(5)
trigger2 = AnimElem = 18 && Var(5)
movetype = I

[State 0, ChangeState]
type = ChangeState
trigger1 = Pos Y + Vel Y > Map(StageGround)
value = 1105

;---------------------------------------------------------------------------
; QCB+SK S-C
[Statedef 1206]
type    = U

[State 0, ChangeState]
type = ChangeState
trigger1 = !Time
value = StateNo-1

;---------------------------------------------------------------------------
; QCB+2K
[Statedef 1250]
type    = A
movetype= A
physics = N
velset = 0,0
anim = 1250
ctrl = 0
sprpriority = 2

[State 0, Map Ajit EX Palette]
type = MapSet
trigger1 = !Time
map = "AjixEX"
value = 666
[State 210, Snd EX]
type = PlaySnd
trigger1 = !Time
value = S1050, 0

[State 210, 1]
type = PlaySnd
trigger1 = Anim = 1250 && AnimElem = 2
trigger2 = Anim = 1250 && AnimElem = 6
trigger3 = Anim = 1250 && AnimElem = 9
trigger4 = Anim = 1250 && AnimElem = 13
trigger5 = Anim = 1201 && AnimElem = 6
value = F0, 2
[State 210, 1]
type = PlaySnd
trigger1 = Anim = 1201 && AnimElem = 3
value = F0, 1

[State 0, Var Voice Bank]
type = VarSet
trigger1 = Anim = 1201 && AnimElem = 6
trigger2 = Anim = 1201 && AnimElem = 3
v = 33
value = 1200
[State 0, Var Voice Variant]
type = VarSet
trigger1 = Anim = 1201 && AnimElem = 6
trigger2 = Anim = 1201 && AnimElem = 3
v = 34
value = 4 + random%5

[State 0, Var Voice Bank]
type = VarSet
trigger1 = Time = 4
v = 33
value = 1250
[State 0, Var Voice Variant]
type = VarSet
trigger1 = Time = 4
v = 34
value = random%2

[State 0, VelSet]
type = VelSet
trigger1 = !Time
x = 3
y = -2.25 + (Pos Y * -0.01)
[State 0, VelAdd]
type = VelAdd
trigger1 = Anim = 1250
y = 0.1 + 0.0005 * (Pos Y)
[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 2
trigger1 = Anim = 1201
x = 2
y = -4
[State 0, VelAdd]
type = VelAdd
trigger1 = Anim = 1201
y = 0.3

[State 0, Explod]
type = Explod
triggerall = GameTime%2
trigger1 = Anim = 1250 && AnimElemNo(0) = 2
trigger2 = Anim = 1250 && AnimElemNo(0) = 9
anim = 1210
postype = p1
removetime = 1
pausemovetime = 666
sprpriority = 3
ownpal = 1
ignorehitpause = 1
[State 0, Explod]
type = Explod
triggerall = GameTime%2
trigger1 = Anim = 1250 && AnimElemNo(0) = 3
trigger2 = Anim = 1250 && AnimElemNo(0) = 10
anim = 1211
postype = p1
removetime = 1
pausemovetime = 666
sprpriority = 3
ownpal = 1
ignorehitpause = 1
[State 0, Explod]
type = Explod
triggerall = GameTime%2
trigger1 = Anim = 1250 && AnimElemNo(0) = 6
trigger2 = Anim = 1250 && AnimElemNo(0) = 13
anim = 1213
postype = p1
removetime = 1
pausemovetime = 666
sprpriority = 3
ownpal = 1
ignorehitpause = 1
[State 0, Explod]
type = Explod
triggerall = GameTime%2
trigger1 = Anim = 1250 && AnimElemNo(0) = 7
trigger2 = Anim = 1250 && AnimElemNo(0) = 14
anim = 1214
postype = p1
removetime = 1
pausemovetime = 666
sprpriority = 3
ownpal = 1
ignorehitpause = 1
[State 0, Explod]
type = Explod
trigger1 = Anim = 1250 && AnimElem = 4
trigger2 = Anim = 1250 && AnimElem = 11
anim = 1212
postype = p1
vel = vel x,0
accel = vel x * -0.1,0
sprpriority = 3
ownpal = 1
ignorehitpause = 1
[State 0, Explod]
type = Explod
trigger1 = Anim = 1250 && AnimElem = 8
trigger2 = Anim = 1250 && AnimElem = 15
anim = 1215
postype = p1
vel = vel x,0
accel = vel x * -0.1,0
sprpriority = 3
ownpal = 1
ignorehitpause = 1
[State 0, Explod]
type = Explod
triggerall = GameTime%2
trigger1 = Anim = 1201 && AnimElemNo(0) = 3
anim = 1216
postype = p1
removetime = 1
pausemovetime = 666
sprpriority = 3
ownpal = 1
ignorehitpause = 1
[State 0, Explod]
type = Explod
triggerall = GameTime%2
trigger1 = Anim = 1201 && AnimElemNo(0) = 4
anim = 1217
postype = p1
removetime = 1
pausemovetime = 666
sprpriority = 3
ownpal = 1
ignorehitpause = 1
[State 0, Explod]
type = Explod
trigger1 = Anim = 1201 && AnimElem = 5
anim = 1218
postype = p1
vel = vel x,0
accel = vel x * -0.1,0
sprpriority = 3
ownpal = 1
ignorehitpause = 1
[State 0, Explod]
type = Explod
triggerall = GameTime%2
trigger1 = Anim = 1201 && AnimElemNo(0) = 7
anim = 1220
postype = p1
removetime = 1
pausemovetime = 666
sprpriority = 3
ownpal = 1
ignorehitpause = 1
[State 0, Explod]
type = Explod
trigger1 = Anim = 1201 && AnimElem = 8
anim = 1221
postype = p1
vel = vel x,0
accel = vel x * -0.1,0
sprpriority = 3
ownpal = 1
ignorehitpause = 1

[State 0, Var Damage Value]
type = VarSet
trigger1 = Anim = 1250
v = 12
value = 24
[State 0, Var Damage Value]
type = VarSet
trigger1 = Anim = 1201 && AnimElem = 3
v = 12
value = 28
[State 0, Var Damage Value]
type = VarSet
trigger1 = Anim = 1201 && AnimElem = 7
v = 12
value = 32

[State 0, HitDef 1st-4th]
type = HitDef
trigger1 = Anim = 1250 && AnimElem = 3
trigger2 = Anim = 1250 && AnimElem = 7
trigger3 = Anim = 1250 && AnimElem = 10
trigger4 = Anim = 1250 && AnimElem = 14
attr = A,SA
hitflag = MAF
guardflag = MAA
animtype = heavy
priority = 5,Hit
damage = Ceil(Var(12)*FVar(20)*0.25+Var(12)*FVar(10)*FVar(20)*0.75),Ceil(152*0.167*const(BC.ChipHeavy))
guardpoints = floor((16 + Var(12)) * 0.5)
pausetime = 9,9
sparkno = 10 + random%4 + (Var(10)=1) * 5
guard.sparkno = 40
sparkxy = -40+Floor(P2Dist X*0.5),-40+Floor(P2Dist Y*0.5)
hitsound = 1,2
guardsound = 5,1
ground.type = Low
ground.slidetime = 19
ground.hittime = 19
guard.hittime = 15
air.hittime = 21
yaccel = 0.5
fall = 1
ground.velocity = -1 + Vel X * -1 + p2dist x * 0.01,-4.5 - p2dist y * 0.01
air.velocity = -1 + Vel X * -0.5 + p2dist x * 0.01,-2.5 - p2dist y * 0.01
p2facing = 1
forcestand = 1
getpower = floor(Var(12)*Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))

[State 0, HitDef 5th]
type = HitDef
trigger1 = Anim = 1201 && AnimElem = 4
attr = A,SA
hitflag = MAF
guardflag = MAA
animtype = heavy
priority = 5,Hit
damage = Ceil(Var(12)*FVar(20)*0.25+Var(12)*FVar(10)*FVar(20)*0.75),Ceil(152*0.167*const(BC.ChipHeavy))
guardpoints = floor((16 + Var(12)) * 0.5)
pausetime = 9,9
sparkno = 10 + random%4 + (Var(10)=1) * 5
guard.sparkno = 40
sparkxy = -40+Floor(P2Dist X*0.5),-40+Floor(P2Dist Y*0.5)
hitsound = 1,2
guardsound = 5,1
ground.type = Low
ground.slidetime = 21
ground.hittime = 21
guard.hittime = 15
air.hittime = 18
yaccel = 0.5
fall = 1
ground.velocity = -2,-5
air.velocity = -1.5,-4
forcestand = 1
getpower = floor(Var(12)*Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))

[State 0, HitDef 6th]
type = HitDef
trigger1 = Anim = 1201 && AnimElem = 7
attr = A,SA
hitflag = MAF
guardflag = MAA
animtype = heavy
priority = 5,Hit
damage = Ceil(Var(12)*FVar(20)*0.25+Var(12)*FVar(10)*FVar(20)*0.75),Ceil(152*0.167*const(BC.ChipHeavy))
guardpoints = floor((16 + Var(12)) * 0.5)
pausetime = 18,18
sparkno = ifelse(Var(10)=2||Var(11)>=2,30,15 + random%4)
guard.sparkno = 40
sparkxy = -40+Floor(P2Dist X*0.5),-40+Floor(P2Dist Y*0.5)
hitsound = 1,4
guardsound = 5,1
ground.type = Low
ground.slidetime = 21
ground.hittime = 21
guard.hittime = 14
air.hittime = 18
yaccel = 0.5
fall = 1
ground.velocity = -5,0
air.velocity = -7,8
fall.yvelocity = -1 + (EnemyNear,Pos Y * 0.03)
getpower = floor(Var(12)*Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))

[State 0, Var Dull Dire]
type = VarSet
triggerall = MoveHit && !MoveReversed
triggerall = EnemyNear,MoveType = H
triggerall = Var(10) = 2
trigger1 = Var(8) = 1
trigger1 = !(Anim = 1201 && AnimElemNo(0) >= 7)
var(11) = 2
ignorehitpause = 1
[State 0, TargetState]
type = TargetState
triggerall = MoveHit && !MoveReversed
triggerall = NumTarget && EnemyNear,MoveType = H
triggerall = Var(10) != 2 && Var(11) <= 1
triggerall = Anim = 1201 && AnimElemNo(0) >= 7
trigger1 = Var(8) = 1
value = 5355
ignorehitpause = 1
[State 0, Map Dire Trigger]
type = MapSet
triggerall = MoveHit && !MoveReversed
triggerall = NumTarget && EnemyNear,MoveType = H
triggerall = Var(10) = 2 || Var(11) > 1
triggerall = Anim = 1201 && AnimElemNo(0) >= 7
trigger1 = Var(8) = 1
map = "DireAct"
value = 5345
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = 1250
value = 1201

[State 0, VarAdd]
type = VarAdd
trigger1 = !Time
v = 18
value = -1000
[State 0, VarSet Side-L Buff]
type = VarSet
trigger1 = !Time
fv = 20
value = min(fvar(20)+0.0667,1.20)

[State 0, ChangeState]
type = ChangeState
trigger1 = Time >= 16
trigger1 = Pos Y + Vel Y > Map(StageGround)
value = 1105

;---------------------------------------------------------------------------
; HCB+LP
[Statedef 1300]
type    = S
movetype= A
physics = S
velset = 0,0
ctrl = 0
sprpriority = 2

[State 0, VarSet]
type = VarSet
trigger1 = !Time
trigger1 = PrevStateNo != 1301
v = 5
value = 0
[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = !Time
value = 1300 + Var(5)

[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 2
trigger2 = AnimElem = 3
x = -8
[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 6
trigger2 = AnimElem = 7
x = max(0,min(12+(Var(5)!=0)*4,P2BodyDist X+666*(abs(P2Dist Y)>const(size.height))))
[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElemNo(0) = 8
x = max(0,min(8+(Var(5)!=0)*6,P2BodyDist X+666*(abs(P2Dist Y)>const(size.height))))

[State 210, 1]
type = PlaySnd
trigger1 = AnimElem = 6
value = F0, 4
[State 0, Snd Fire]
type = PlaySnd
trigger1 = AnimElem = 6
value = S1000,0

[State 0, Var Voice Bank]
type = VarSet
trigger1 = AnimElem = 6
v = 33
value = 1300
[State 0, Var Voice Variant]
type = VarSet
trigger1 = AnimElem = 6
v = 34
value = random%4

[State 0, Explod]
type = Explod
trigger1 = AnimElem = 7
anim = 1305
id = 3000
postype = p1
bindtime = 6
removetime = -2
sprpriority = 3
ownpal = 1
removeongethit = 1

[State 0, Var Damage Value]
type = VarSet
trigger1 = !MoveContact && !MoveReversed
v = 12
value = 132 + Var(5) * 8

[State 0, HitDef]
type = HitDef
trigger1 = !MoveContact && !MoveReversed
attr = S,SA
hitflag = MAF
guardflag = MA
animtype = medium
priority = 4,Hit
damage = Ceil(Var(12) * FVar(10) * FVar(20)),Ceil(Var(12)*const(BC.ChipHeavy))
guardpoints = floor((16 + Var(12)) * (0.75 + 0.50 * Var(5)))
pausetime = 2,12+Var(13)
guard.pausetime = 2,12
sparkno = ifelse(Var(10)=2||Var(11)>=2&&!Var(5),30,10 + random%4 + (Var(10)=1) * 5)
guard.sparkno = 40
sparkxy = -40+Floor(P2Dist X*0.5),-56+Floor(P2Dist Y*0.5)
hitsound = 1,2
guardsound = 5,1
ground.type = Low
ground.slidetime = 17
ground.hittime = 17
guard.hittime = 12 + Var(5)
yaccel = 0.5
air.fall = 1
ground.velocity = -5,0
air.velocity = -1,-4
p2facing = 1
getpower = floor(Var(12)*Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))

[State 0, TargetState]
type = TargetState
triggerall = MoveHit && !MoveReversed
triggerall = NumTarget && EnemyNear,MoveType = H
triggerall = Var(10) != 2
triggerall = Var(5)
trigger1 = Var(8) = 1
value = ifelse(EnemyNear,StateType=A,5390,5350)
ignorehitpause = 1
[State 0, Map Dire Trigger]
type = MapSet
triggerall = MoveHit && !MoveReversed
triggerall = NumTarget && EnemyNear,MoveType = H
triggerall = Var(10) = 2 || Var(11) > 1 && !Var(5)
trigger1 = Var(8) = 1
map = "DireAct"
value = 5340
ignorehitpause = 1

[State 0, TargetState]
type = MapSet
triggerall = NumTarget && MoveHit && Var(8) = 1
trigger1 = Target,StateNo = [5000,5400]
map = "HitFX"
value = 1
ignorehitpause = 1
redirectid = Target,ID

[State 0, CtrlSet]
type = CtrlSet
trigger1 = AnimElem = 17
value = 1
[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 11
movetype = I

[State 1000, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; HCB+SP
[Statedef 1301]
type    = S
movetype= A
physics = S
anim = 666

[State 0, VarSet]
type = VarSet
trigger1 = !Time
v = 5
value = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = !Time
value = 1300

;---------------------------------------------------------------------------
; HCB+2P
[Statedef 1350]
type    = S
movetype= A
physics = S
velset = 0,0
ctrl = 0
sprpriority = 2
anim = 1300

[State 0, Map Ajit EX Palette]
type = MapSet
trigger1 = !Time
map = "AjixEX"
value = 666
[State 210, Snd EX]
type = PlaySnd
trigger1 = !Time
value = S1050, 0

[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 2
trigger2 = AnimElem = 3
x = -8
[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 6
trigger2 = AnimElem = 7
x = max(0,min(18,P2BodyDist X+666*(abs(P2Dist Y)>const(size.height))))
[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElemNo(0) = 8
x = max(0,min(16,P2BodyDist X+666*(abs(P2Dist Y)>const(size.height))))

[State 210, 1]
type = PlaySnd
trigger1 = AnimElem = 6
value = F0, 4
[State 0, Snd Fire]
type = PlaySnd
trigger1 = AnimElem = 6
value = S1000,0

[State 0, Var Voice Bank]
type = VarSet
trigger1 = AnimElem = 6
v = 33
value = 1300
[State 0, Var Voice Variant]
type = VarSet
trigger1 = AnimElem = 6
v = 34
value = random%4

[State 0, Explod]
type = Explod
trigger1 = AnimElem = 7
anim = 1305
postype = p1
bindtime = 6
removetime = -2
sprpriority = 3
ownpal = 1
removeongethit = 1

[State 0, Var Damage Value]
type = VarSet
trigger1 = !MoveContact && !MoveReversed
v = 12
value = 152

[State 0, HitDef]
type = HitDef
trigger1 = !MoveContact && !MoveReversed
attr = S,SA
hitflag = MAF
guardflag = MA
animtype = heavy
priority = 5,Hit
damage = Ceil(Var(12)*FVar(10)*FVar(20)),Ceil(Var(12)*const(BC.ChipHeavy))
guardpoints = floor((16 + Var(12)) * (1.5))
pausetime = 6,12+Var(13)
guard.pausetime = 6,12
sparkno = ifelse(Var(10)=2||Var(11)>=2,30,10 + random%4 + (Var(10)=1) * 5)
guard.sparkno = 40
sparkxy = -40+Floor(P2Dist X*0.5),-56+Floor(P2Dist Y*0.5)
hitsound = 1,3
guardsound = 5,1
ground.type = Low
ground.slidetime = 20
ground.hittime = 20
guard.hittime = 12
yaccel = 0.5
fall = 1
ground.velocity = -5,0
air.velocity = -1,-4
p2facing = 1
getpower = floor(Var(12)*Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))

[State 0, TargetState]
type = TargetState
triggerall = MoveHit && !MoveReversed
triggerall = NumTarget && EnemyNear,MoveType = H
triggerall = Var(10) != 2 && Var(11) <= 0
trigger1 = Var(8) = 1 && EnemyNear,StateType != A
value = 5390
ignorehitpause = 1
[State 0, Map Dire Trigger]
type = MapSet
triggerall = MoveHit && !MoveReversed
triggerall = NumTarget && EnemyNear,MoveType = H
triggerall = Var(10) = 2 || Var(11) > 1
trigger1 = Var(8) = 1
map = "DireAct"
value = 5340
ignorehitpause = 1

[State 0, TargetState]
type = MapSet
triggerall = NumTarget && MoveHit && Var(8) = 1
trigger1 = Target,StateNo = [5000,5400]
map = "HitFX"
value = 1
ignorehitpause = 1
redirectid = Target,ID

[State 0, VarAdd]
type = VarAdd
trigger1 = !Time
v = 18
value = -1000
[State 0, VarSet Side-L Buff]
type = VarSet
trigger1 = !Time
fv = 20
value = min(fvar(20)+0.0667,1.20)

[State 0, CtrlSet]
type = CtrlSet
trigger1 = AnimElem = 16, 6
value = 1
[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 11
movetype = I

[State 1000, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; FBF+LP
[Statedef 1400]
type    = S
movetype= A
physics = S
velset = 0,0
ctrl = 0
sprpriority = 2
anim = 1400 + (PrevStateNo=1401); + (Name="AJIX")

[State 0, VarSet]
type = VarSet
trigger1 = !Time
v = 5
value = (PrevStateNo=1401)
[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = AnimElem = 12, 2
trigger1 = Time <= 36 * Var(5); + 12 * (Name="AJIX")
value = Anim
elem = 5
[State 0, VarSet]
type = VarSet
trigger1 = !MoveContact
v = 6
value = (Name = "AJIX" && EnemyNear,StateType = A)
ignorehitpause = 1

[State 0, Offset]
type = PosAdd
trigger1 = AnimElem = 4
x = 8

[State 0, Explod]
type = Explod
trigger1 = AnimElemNo(0) = [6,11]
trigger1 = Time%3 = 2
trigger1 = MoveType = A
anim = 1405 + floor((Time%12)*0.33)
ID = 3000
pos = -8,0
postype = p1
bindtime = 4
sprpriority = -5
removeongethit = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4, 2
trigger2 = AnimElem = 6, 2
trigger3 = AnimElem = 8, 2
trigger4 = AnimElem = 10, 2
value = F0,1
channel = 1

[State 0, Var Voice Bank]
type = VarSet
trigger1 = !Time
v = 33
value = 1400
[State 0, Var Voice Variant]
type = VarSet
trigger1 = !Time
v = 34
value = random%3

[State 0, Var Damage Value]
type = VarSet
trigger1 = !MoveContact && !MoveReversed
v = 12
value = 16

[State 0, HitDef]
type = HitDef
trigger1 = !MoveContact && !MoveReversed
attr = S,SA
hitflag = MAF
guardflag = MA
animtype = heavy
priority = 4,Hit
damage = Ceil(Var(12) * FVar(10) * FVar(20)),Ceil(120*const(BC.ChipLight))
guardpoints = floor((32 + Var(12)) * 0.5)
pausetime = 4,4
sparkno = (Var(10)=1) * 5
guard.sparkno = 40
sparkxy = -40+Floor(P2Dist X*0.5),-56+Floor(P2Dist Y*0.5)
hitsound = 1,1
guardsound = 5,1
ground.type = Low
ground.slidetime = 21
ground.hittime = 21
guard.hittime = 14
kill = 0
guard.kill = 1
yaccel = 0.5
air.fall = 1
ground.velocity = 0,0
guard.velocity = -1.5
air.velocity = -1.5,-3
fall.xvelocity = -0.6
p2facing = 1
getpower = floor(Var(12)*Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))
ground.cornerpush.veloff = 0

[State 0, Var Dire Counter Stack On]
type = VarSet
triggerall = MoveHit && !MoveReversed
triggerall = EnemyNear,MoveType = H
trigger1 = Var(8) = 1 && Var(10) = 2
v = 11
value = 3
ignorehitpause = 1
[State 0, TargetState]
type = TargetState
triggerall = NumTarget
trigger1 = MoveHit = 1
trigger1 = Target,StateNo = [5000,6000)
value = 1410
[State 0, ChangeState]
type = ChangeState
triggerall = NumTarget
trigger1 = MoveHit = 1
trigger1 = Target,StateNo = 1410
value = 1402

[State 0, ChangeAnim]
type = ChangeAnim
triggerall  = MoveGuarded
trigger1 = AnimElemNo(0) = [9,11]
value = anim
elem = 13

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 13 && MoveType = A
movetype = I

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; FBF+SP
[Statedef 1401]
type    = S
movetype= A
physics = S

[State 0, ChangeState]
type = ChangeState
trigger1 = !Time
value = 1400

;---------------------------------------------------------------------------
; FBF+P S
[Statedef 1402]
type    = S
movetype= A
physics = S
anim = 1402
velset = 0,0
ctrl = 0
sprpriority = 2

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, TargetBind]
type = TargetBind
trigger1 = Time < 63
trigger1 = Time%6 = 3
time = 1
pos = 32 - (Time**2 * (0.0075)),floor(-Time*0.5)
[State 0, TargetState]
type = TargetState
trigger1 = Time < 63
trigger1 = Time%6 = 3
value = 1410
[State 0, TargetState]
type = TargetState
trigger1 = Time = 63
value = 1411
[State 0, TargetState]
type = TargetState
trigger1 = Time = 78
value = 1412
[State 0, TargetState]
type = TargetState
trigger1 = Time = 78
trigger1 = Var(11) >= 2
value = 1413
[State 0, Var Dire Gauge Gain]
type = VarAdd
trigger1 = Time = 78
trigger1 = Var(11) >= 2
var(18) = 500

[State 0, Var Stack Reduce]
type = VarAdd
trigger1 = Time = 78
trigger1 = Var(11) >= 2
v = 11
value = -1

[State 0, HitAdd]
type = VarAdd
trigger1 = Time < 63
trigger1 = Time%6 = 3
trigger2 = Time = 78
v = 51
value = 1

[State 0, Snd Hit1]
type = PlaySnd
trigger1 = Time < 63
trigger1 = Time%6 = 3
value = F1,0
channel = 1
[State 0, Snd Hit2]
type = PlaySnd
trigger1 = Time = 78
value = F1,3
channel = 1

[State 0, Var Voice Bank]
type = VarSet
trigger1 = Time = 74
v = 33
value = 1401
[State 0, Var Voice Variant]
type = VarSet
trigger1 = Time = 74
v = 34
value = random%2

[State 0, Var Damage Value]
type = VarSet
trigger1 = !Time
v = 12
value = Ceil(4 * FVar(20))
[State 0, Var Damage Value]
type = VarSet
trigger1 = Time = 78
v = 12
value = Ceil((72 + 8 * Var(5) + 16 * (Name="AJIT")) * FVar(20))
[State 0, LifeAdd]
type = TargetLifeAdd
trigger1 = Time < 63
trigger1 = Time%6 = 3
value = -Ceil(Var(12) * FVar(10))
kill = 0
[State 0, LifeAdd]
type = TargetLifeAdd
trigger1 = Time = 78
value = -Ceil(Var(12) * FVar(10))
[State 0, PowerAdd]
type = PowerAdd
trigger1 = Time < 63
trigger1 = Time%6 = 3
trigger2 = Time = 78
value = Ceil(Var(12) * Map(ScaledPowerGetHit))
[State 0, PowerAdd]
type = TargetPowerAdd
trigger1 = Time < 63
trigger1 = Time%6 = 3
trigger2 = Time = 78
value = Ceil(Var(12) * Map(ScaledPowerGiveHit))

[State 0, Snd Swing1]
type = PlaySnd
trigger1 = Time < 63
trigger1 = Time%6 = 0
value = F0,1
channel = 2
[State 0, Snd Swing2]
type = PlaySnd
trigger1 = Time = 74
value = F0,3
channel = 2

[State 0, Explod HitSpark S]
type = Explod
trigger1 = Time < 63
trigger1 = Time%6 = 3
anim = F0 + random%4
pos = 40 - (Time**2 * (0.00875)) + random%16,-40-floor(Time*0.6) - random%16
postype = p1
removetime = -2
sprpriority = 9
supermovetime = 666
ontop = 1
ownpal = 1
[State 0, Explod HitSpark H]
type = Explod
trigger1 = Time = 74
anim = F10 + ((Var(11)>=2)*20)
pos = 32,-88
postype = p1
sprpriority = 9
supermovetime = 666
ontop = 1
ownpal = 1

[State 0, ChangeAnim]
type = ChangeAnim
triggerall = Name = "AJIX"
triggerall = Var(6) = 0
trigger1 = AnimElem = 27, 12
value = Anim
elem = AnimElemNo(0)+1

[State 0, CtrlSet]
type = CtrlSet
triggerall = Name = "AJIX"
triggerall = Var(6) = 0
trigger1 = AnimElem = 29
value = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; FBF+P V1
[Statedef 1410]
type    = A
movetype= H
physics = N
velset = 0,0
ctrl = 0
sprpriority = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = !Time
value = 5011
[State 0, Offset]
type = Offset
trigger1 = Time <= 3
x = -1+random%3
y = -1+random%3

[State 0, VarAdd P.Life Reduction]
type = VarAdd
trigger1 = !Time
v = 22
value = -ceil(EnemyNear,Var(12) * const(BC.GetHitPLife) * Enemy,FVar(10))
ignorehitpause = 1
[State 0, VarAdd Lucid Meter Gain]
type = VarAdd
trigger1 = !Time
v = 18
value = floor(EnemyNear,Var(12) * const(BC.GetHitGaugeGain) * FVar(18) * Enemy,FVar(10))
ignorehitpause = 1

[State 0, SelfState]
type = SelfState
trigger1 = Time = 8
value = 5100

;---------------------------------------------------------------------------
; FBF+P V2
[Statedef 1411]
type    = A
movetype= H
physics = N
velset = -1,-4
ctrl = 0
sprpriority = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = 1
value = 5012

[State 0, VelAdd]
type = VelAdd
trigger1 = 1
y = 0.5

;---------------------------------------------------------------------------
; FBF+P V3
[Statedef 1412]
type    = A
movetype= H
physics = N
velset = 0,0
ctrl = 0
sprpriority = 1

[State 0, ChangeAnim]
type = ChangeAnim2
trigger1 = !Time
value = 1420

[State 0, Offset]
type = Offset
trigger1 = Time <= 12
x = -1+random%3
y = -1+random%3

[State 0, VelSet]
type = VelSet
trigger1 = Time = 12
x = -2; - 4.0 * (EnemyNear,Var(5))
y = -6; + 3 * (EnemyNear,Var(5))
[State 0, VelAdd]
type = VelAdd
trigger1 = Time > 12
y = 0.75

[State 0, VarAdd P.Life Reduction]
type = VarAdd
trigger1 = !Time
v = 22
value = -ceil(EnemyNear,Var(12) * const(BC.GetHitPLife) * Enemy,FVar(10))
ignorehitpause = 1
[State 0, VarAdd Lucid Meter Gain]
type = VarAdd
trigger1 = !Time
v = 18
value = floor(EnemyNear,Var(12) * const(BC.GetHitGaugeGain) * FVar(18) * Enemy,FVar(10))
ignorehitpause = 1

[State 5110, 12]
type = VarSet
trigger1 = 1
sysvar(2) = 0
ignorehitpause = 1

[State 0, SelfState]
type = SelfState
trigger1 = Pos Y + Vel Y > Map(StageGround)
value = 5110

;---------------------------------------------------------------------------
; FBF+P V4
[Statedef 1413]
type    = A
movetype= H
physics = N
velset = 0,0
ctrl = 0
sprpriority = 1

[State 0, ChangeAnim]
type = ChangeAnim2
trigger1 = !Time
value = 1420

[State 0, Offset]
type = Offset
trigger1 = Time <= 12
x = -1+random%3
y = -1+random%3

[State 0, VarAdd P.Life Reduction]
type = VarAdd
trigger1 = !Time
v = 22
value = -ceil(EnemyNear,Var(12) * const(BC.GetHitPLife) * Enemy,FVar(10))
ignorehitpause = 1
[State 0, VarAdd Lucid Meter Gain]
type = VarAdd
trigger1 = !Time
v = 18
value = floor(EnemyNear,Var(12) * const(BC.GetHitGaugeGain) * FVar(18) * Enemy,FVar(10))
ignorehitpause = 1

[State 5110, 12]
type = VarSet
trigger1 = 1
sysvar(2) = 0
ignorehitpause = 1

[State 0, SelfState]
type = SelfState
trigger1 = Time = 12
value = 5336


;---------------------------------------------------------------------------
; FBF+2P
[Statedef 1450]
type    = S
movetype= A
physics = S
velset = 0,0
ctrl = 0
sprpriority = 2
anim = 1450

[State 0, Map Ajit EX Palette]
type = MapSet
trigger1 = !Time
map = "AjixEX"
value = 666
[State 210, Snd EX]
type = PlaySnd
trigger1 = !Time
value = S1050, 0
[State 0, VarAdd]
type = VarAdd
trigger1 = !Time
v = 18
value = -1000
[State 0, VarSet Side-L Buff]
type = VarSet
trigger1 = !Time
fv = 20
value = min(fvar(20)+0.0667,1.20)

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = AnimElem = 12, 2
trigger1 = Time <= 36
value = Anim
elem = 5

[State 0, Offset]
type = PosAdd
trigger1 = AnimElem = 4
x = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4, 2
trigger2 = AnimElem = 6, 2
trigger3 = AnimElem = 8, 2
trigger4 = AnimElem = 10, 2
value = F0,1
channel = 1

[State 0, Var Voice Bank]
type = VarSet
trigger1 = !Time
v = 33
value = 1400
[State 0, Var Voice Variant]
type = VarSet
trigger1 = !Time
v = 34
value = random%3

[State 0, Var Damage Value]
type = VarSet
trigger1 = !MoveContact && !MoveReversed
v = 12
value = 16

[State 0, HitDef]
type = HitDef
trigger1 = !MoveContact && !MoveReversed
attr = S,SA
hitflag = MAF
guardflag = MA
animtype = heavy
priority = 4,Hit
damage = Ceil(Var(12) * FVar(10) * FVar(20)),Ceil(120*const(BC.ChipHeavy))
guardpoints = floor((32 + Var(12)) * 0.5)
pausetime = 6,6
sparkno = (Var(10)=1) * 5
guard.sparkno = 40
sparkxy = -40+Floor(P2Dist X*0.5),-56+Floor(P2Dist Y*0.5)
hitsound = 1,1
guardsound = 5,1
ground.type = Low
ground.slidetime = 21
ground.hittime = 21
guard.hittime = 10
kill = 0
guard.kill = 1
yaccel = 0.5
forcenofall = 1
ground.velocity = 0,0
guard.velocity = -4
p2facing = 1
getpower = floor(Var(12)*Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))
ground.cornerpush.veloff = 0

[State 0, VarSet]
type = VarSet
trigger1 = Var(8) = 1 && MoveHit
trigger1 = NumTarget
v = 5
value = (Target,StateType = A && Var(51)>0 && Name="AJIX")
ignorehitpause = 1

[State 0, Var Dire Counter Stack On]
type = VarSet
triggerall = MoveHit && !MoveReversed
triggerall = EnemyNear,MoveType = H
trigger1 = Var(8) = 1 && Var(10) = 2
v = 11
value = 3
ignorehitpause = 1
[State 0, TargetState]
type = TargetState
triggerall = NumTarget
trigger1 = MoveHit = 1
trigger1 = Target,StateNo = [5000,6000)
value = 1470
[State 0, ChangeState]
type = ChangeState
triggerall = NumTarget
trigger1 = MoveHit = 1
trigger1 = Target,StateNo = 1470
value = 1460

[State 0, ChangeAnim]
type = ChangeAnim
triggerall  = MoveGuarded
trigger1 = AnimElemNo(0) = [9,11]
value = anim
elem = 13

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 12, >= 2 && MoveType = A
movetype = I

[State 0, ChangeState]
type = ChangeState
triggerall = movecontact
trigger1 = (command="FF" || map(b_66))
value = 100
ctrl = 1
[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; FBF+2P S
[Statedef 1460]
type    = S
movetype= A
physics = S
anim = 1460
velset = 0,0
ctrl = 0
sprpriority = 2

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, Width]
type = Width
trigger1 = 1
edge = 56,0

[State 0, TargetBind]
type = TargetBind
trigger1 = AnimElemNo(0) < 18 && AnimTime < -1
time = 1
pos = 48,0
[State 0, TargetState]
type = TargetState
triggerall = NumTarget
trigger1 = AnimElem = 18, 2
value = ifelse(Var(11)>1,5326,1471)

[State 0, HitAdd]
type = VarAdd
trigger1 = Time%4 = 2
trigger1 = AnimElemNo(0) < 18 && AnimTime < -1
trigger2 = AnimElem = 18
v = 51
value = 1

[State 0, Snd Swing1]
type = PlaySnd
trigger1 = Time%4 = 1
trigger1 = AnimElemNo(0) <= 18 && AnimTime < -1
value = F0,1
channel = 1
[State 0, Snd Hit1]
type = PlaySnd
trigger1 = Time%4 = 2
trigger1 = AnimElemNo(0) < 18 && AnimTime < -1
value = F1,1
channel = 1
[State 0, Snd Hit2]
type = PlaySnd
trigger1 = AnimElem = 18
value = F1,4
channel = 1

[State 0, Var Voice Bank]
type = VarSet
trigger1 = AnimElem = 5
v = 33
value = 1450
[State 0, Var Voice Variant]
type = VarSet
trigger1 = AnimElem = 5
v = 34
value = random%2

[State 0, Var Voice Bank]
type = VarSet
trigger1 = AnimElem = 19
v = 33
value = 200
[State 0, Var Voice Variant]
type = VarSet
trigger1 = AnimElem = 19
v = 34
value = random%40

[State 0, Explod HitSpark S]
type = Explod
trigger1 = Time%4 = 2
trigger1 = AnimElemNo(0) < 18 && AnimTime < -1
anim = F5 + random%4
pos = 36 + random%17,-32 - random%17
postype = p1
removetime = -2
sprpriority = 9
supermovetime = 666
ontop = 1
ownpal = 1
[State 0, Explod HitSpark H]
type = Explod
trigger1 = AnimElem = 18
anim = F ifelse(Var(11)>1,30,15 + random%4)
pos = 48,-40
postype = p1
sprpriority = 9
supermovetime = 666
ontop = 1
ownpal = 1

[State 0, VarSet]
type = VarSet
trigger1 = AnimElem = 18 
v = 9
value = 8

[State 0, Var Dire Gauge Gain]
type = VarAdd
triggerall = Var(11) > 1
trigger1 = AnimElem = 18, 2
var(18) = 500
[State 0, Var Stack Reduce]
type = VarAdd
triggerall = Var(11) > 1
trigger1 = AnimElem = 18, 2
v = 11
value = -1

[State 0, Var Damage Value]
type = VarSet
trigger1 = !Time
v = 12
value = Ceil(4 * FVar(20))
[State 0, Var Damage Value]
type = VarSet
trigger1 = AnimElem = 18
v = 12
value = Ceil(88 * FVar(20))
[State 0, LifeAdd]
type = TargetLifeAdd
trigger1 = Time%4 = 2
trigger1 = AnimElemNo(0) < 18 && AnimTime < -1
trigger2 = AnimElem = 18
value = -Ceil(Var(12)*FVar(10))
kill = AnimElemNo(0) >= 18
[State 0, PowerAdd]
type = PowerAdd
trigger1 = Time%4 = 2
trigger1 = AnimElemNo(0) < 18 && AnimTime < -1
trigger2 = AnimElem = 18
value = Ceil(Var(12) * Map(ScaledPowerGetHit))
[State 0, PowerAdd]
type = TargetPowerAdd
trigger1 = Time%4 = 2
trigger1 = AnimElemNo(0) < 18 && AnimTime < -1
trigger2 = AnimElem = 18
value = Ceil(Var(12) * Map(ScaledPowerGiveHit))

[State 0, CtrlSet]
type = CtrlSet
trigger1 = AnimElem = 22
value = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; FBF+2P V1
[Statedef 1470]
type    = S
movetype= H
physics = N
velset = 0,0
ctrl = 0
sprpriority = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 0, VelSet]
type = VelSet
trigger1 = AnimTime = 0
trigger1 = Anim = 1470
x = -4
[State 0, VelMul]
type = VelMul
trigger1 = 1
x = 0.85

[State 0, ChangeAnim2]
type = ChangeAnim2
trigger1 = !Time
value = 1470
[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = 1470
value = 5325

[State 0, Offset]
type = Offset
trigger1 = Anim = 1470
trigger1 = Time%4 = [2,3]
x = -1+random%3
y = -1+random%3

[State 0, VarAdd P.Life Reduction]
type = VarAdd
trigger1 = Anim = 1470
trigger1 = Time%4 = 2
v = 22
value = -ceil(EnemyNear,Var(12) * const(BC.GetHitPLife) * Enemy,FVar(10))
ignorehitpause = 1
[State 0, VarAdd Lucid Meter Gain]
type = VarAdd
trigger1 = Anim = 1470
trigger1 = Time%4 = 2
v = 18
value = floor(EnemyNear,Var(12) * const(BC.GetHitGaugeGain) * FVar(18) * Enemy,FVar(10))
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = !Time
sysvar(2) = 5

[State 0, SelfState]
type = SelfState
trigger1 = AnimTime = 0
trigger1 = Anim = 5325
value = 5105

;---------------------------------------------------------------------------
; FBF+2P V2
[Statedef 1471]
type    = S
movetype= H
physics = N
velset = 0,0
ctrl = 0
sprpriority = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 0, PosSet]
type = PosSet
trigger1 = !Time
y = 0

[State 0, VelSet]
type = VelSet
trigger1 = Time = 9
x = -5
[State 0, VelMul]
type = VelMul
trigger1 = 1
x = 0.7 

[State 0, Offset]
type = Offset
trigger1 = Time <= 8
x = -1+random%3
y = -1+random%3
[State 0, ChangeAnim2]
type = ChangeAnim
trigger1 = Time < 8
value = 5012
[State 0, ChangeAnim2]
type = ChangeAnim
trigger1 = Time = 8
value = 5017

[State 0, SelfState]
type = SelfState
trigger1 = Time = 22
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; ju.QCB+LK S-K
[Statedef 1500]
type    = A
movetype= A
physics = N
velset = 0,0
ctrl = 0
anim = 1500
sprpriority = 2

[State 0, VarSet]
type = VarSet
trigger1 = !Time
trigger1 = PrevStateNo != 1502
v = 5
value = (PrevStateNo=1501)

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = !Time
trigger1 = PrevStateNo = 1502
value = 1500
elem = 6

[State 0, VelSet]
type = VelSet
trigger1 = !Time
x = max(0,min(1 + 2.5 * Var(5),p2dist x * 0.05))
y = -1 - Var(5)
[State 0, VelAdd]
type = VelAdd
trigger1 = AnimElemNo(0) >= 2
y = 0.25
[State 0, VelSet]
type = VelSet
trigger1 = AnimElemNo(0) = 6
x = max(1,min(3.5 + 2.5 * Var(5),p2dist x * 0.1))
y = 8

[State 0, PosAdd]
type = PosAdd
trigger1 = PrevStateNo != 1502
trigger1 = Time <= 14
trigger1 = Pos Y + Vel Y > Map(StageGround)
y = -Vel Y

[State 210, 1]
type = PlaySnd
trigger1 = AnimElem = 4
trigger2 = !Time && PrevStateNo = 1502
value = F2, 3

[State 0, Var Voice Bank]
type = VarSet
trigger1 = AnimElem = 6
v = 33
value = 1500
[State 0, Var Voice Variant]
type = VarSet
trigger1 = AnimElem = 6
v = 34
value = random%6

[State 0, Var Damage Value]
type = VarSet
trigger1 = !Time
v = 12
value = 128

[State 0, HitDef]
type = HitDef
trigger1 = !MoveContact && !MoveReversed
attr = A,SA
hitflag = MAF
guardflag = HA
animtype = heavy
priority = 4,Hit
damage = Ceil(Var(12) * FVar(10) * FVar(20)),Ceil(Var(12)*const(BC.ChipLight))
guardpoints = floor((16 + Var(12)) * 0.5)
pausetime = 12,12+Var(13)
guard.pausetime = 12,12
sparkno = ifelse(Var(10)=2,30,10 + random%4 + (Var(10)=1) * 5)
guard.sparkno = 40
sparkxy = -40+Floor(P2Dist X*0.5),-40+Floor(P2Dist Y*0.5)
hitsound = 1,3
guardsound = 5,1
ground.type = Low
ground.slidetime = 14 + (Pos Y * -0.1)
ground.hittime = 14 + (Pos Y * -0.1)
guard.hittime = 6
yaccel = 0.5
air.fall = 1
ground.velocity = -4,0
air.velocity = -7,6
fall.yvelocity = -2.5 + (Pos Y + EnemyNear,Pos Y) * 0.01
getpower = floor(Var(12)*Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))

[State 0, TargetState]
type = TargetState
triggerall = MoveHit && !MoveReversed
triggerall = NumTarget && EnemyNear,MoveType = H
triggerall = Var(10) != 2
triggerall = EnemyNear,StateType = A
trigger1 = Var(8) = 1
value = 5355
ignorehitpause = 1
[State 0, Map Dire Trigger]
type = MapSet
triggerall = MoveHit && !MoveReversed
triggerall = NumTarget && EnemyNear,MoveType = H
triggerall = Var(10) = 2
trigger1 = Var(8) = 1
map = "DireAct"
value = ifelse(EnemyNear,StateType = A,5345,5320)
ignorehitpause = 1

[State 0, MapSet]
type = MapSet
trigger1 = AnimElem = 6
map = "AjikBonus"
value = min(4,Map(AjikBonus)+1)

[State 0, ChangeState]
type = ChangeState
trigger1 = Time
trigger1 = Pos Y + Vel Y > Map(StageGround)
value = 1105

;---------------------------------------------------------------------------
; ju.QCB+SK S-K
[Statedef 1501]
type    = A
movetype= A
physics = N
anim = 666

[State 0, ChangeState]
type = ChangeState
trigger1 = !Time
value = 1500

;---------------------------------------------------------------------------
; QCB+LK S-K
[Statedef 1502]
type    = S
movetype= A
physics = N
velset = 0,0
anim = 1502
ctrl = 0
sprpriority = 2

[State 0, VarSet]
type = VarSet
trigger1 = !Time
v = 5
value = (PrevStateNo=1503)

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 2
x = -6 + 4 * Var(5) + max(1,min(6,p2dist x * 0.05))
y = -12
[State 0, VelAdd]
type = VelAdd
trigger1 = AnimElemNo(0) >= 2
y = 0.25
[State 0, VelMul]
type = VelMul
trigger1 = 1
x = 0.925
y = 0.9

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 2
statetype = A

[State 1000, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 1500

;---------------------------------------------------------------------------
; QCB+SK S-K
[Statedef 1503]
type    = S
movetype= A
physics = N
anim = 666

[State 0, ChangeState]
type = ChangeState
trigger1 = !Time
value = 1502

;---------------------------------------------------------------------------
; QCB+LP S-K
[Statedef 1600]
type    = S
movetype= A
physics = N
velset = 0,0
ctrl = 0
anim = 940+(PrevStateNo=1601)

[State 0, VarSet]
type = VarSet
trigger1 = !Time
v = 5
value = (PrevStateNo=1601)
[State 0, VarSet]
type = VarSet
trigger1 = !Time
trigger2 = Var(6)
trigger2 = Time < 8
v = 6
value = (Var(5)&&command="holdy")
[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = Anim = 941 && AnimElem = 6
trigger1 = Var(6) && Time < 19
value = Anim
elem = 5

[State 0, Snd Swing]
type = PlaySnd
trigger1 = Anim = [940,941] && AnimElem = 6
value = F0,4

[State 0, Var Voice Bank]
type = VarSet
trigger1 = Anim = [940,941] && AnimElem = 6
v = 33
value = 200 + 10 * (Var(6)>=4)
[State 0, Var Voice Variant]
type = VarSet
trigger1 = Anim = [940,941] && AnimElem = 6
v = 34
value = random%4

[State 0, PosAdd]
type = PosAdd
triggerall = Anim = [940,941]
trigger1 = AnimElem = 2
trigger2 = AnimElem = 4
trigger3 = AnimElem = 5 && Time < 15
trigger4 = AnimElem = 10
trigger5 = AnimElem = 11
trigger6 = AnimElem = 12
trigger7 = AnimElem = 13
x = -4
[State 0, PosAdd]
type = PosAdd
triggerall = Anim = [940,941]
trigger1 = AnimElem = 3
x = -8
[State 0, PosAdd]
type = PosAdd
trigger1 = Anim = [940,941] && AnimElem = 6
trigger2 = Anim = [940,941] && AnimElem = 7
x = 16
[State 0, PosAdd]
type = PosAdd
trigger1 = Anim = [940,941] && AnimElem = 8
x = 4

[State 0, Var Damage Value]
type = VarSet
trigger1 = !MoveContact && !MoveReversed
v = 12
value = 136 + 8 * Var(6)

[State 0, HitDef]
type = HitDef
trigger1 = !MoveContact && !MoveReversed
attr = S,SA
hitflag = MAF
guardflag = MA
animtype = medium
priority = 4,Hit
damage = Ceil(Var(12) * FVar(10) * FVar(20)),Ceil(Var(12)*const(BC.ChipMid))
guardpoints = floor((const(BC.GuardFlat) + Var(12)) * (0.25 + 0.25 * (1 + Var(5) + 2 * Var(6))))
pausetime = 12,12+Var(13)
guard.pausetime = 12,12
sparkno = ifelse(Var(10)=2||Var(11)>=2&&!Var(5),30,10 + random%4 + (Var(10)=1) * 5)
guard.sparkno = 40
sparkxy = -40+Floor(P2Dist X*0.5),-56+Floor(P2Dist Y*0.5)
hitsound = 1,3 + Var(6)
guardsound = 5,1
ground.type = Low
ground.slidetime = 21
ground.hittime = 21
guard.hittime = 16 + 3 * Var(6)
yaccel = 0.5
air.fall = 1
ground.velocity = -2,0
air.velocity = -1,-5 + EnemyNear,Pos Y * -0.025
p2facing = 1
getpower = floor(Var(12)*Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))

[State 0, TargetState]
type = TargetState
triggerall = MoveHit && !MoveReversed
triggerall = NumTarget && EnemyNear,MoveType = H
triggerall = Var(5) || !Var(5) && EnemyNear,StateType = A
trigger1 = Var(8) = 1
trigger1 = Var(10) != 2
value = ifelse(Var(6)&&EnemyNear,StateType!=A,5340,ifelse(!Var(5),5090,5350))
ignorehitpause = 1
[State 0, Map Dire Trigger]
type = MapSet
triggerall = MoveHit && !MoveReversed
triggerall = NumTarget && EnemyNear,MoveType = H
triggerall = Var(10) = 2 || Var(11) > 1 && !Var(5)
trigger1 = Var(8) = 1
map = "DireAct"
value = 5340
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = Anim = [940,941] && AnimElem = 7 && Var(6)
v = 9
value = 6

[State 0, CtrlSet]
type = CtrlSet
trigger1 = Anim = [940,941] && AnimElem = 12
value = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = Anim = [940,941] && AnimElem = 9
trigger2 = Anim = 942 && AnimElem = 1
movetype = I

[State 0, MapSet]
type = MapSet
trigger1 = AnimElem = 6
map = "AjikBonus"
value = min(4,Map(AjikBonus)+1)

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; QCB+SP S-K
[Statedef 1601]
type    = S
movetype= A
physics = S
anim = 666

[State 0, ChangeState]
type = ChangeState
trigger1 = !Time
value = 1600

;---------------------------------------------------------------------------
; QCF+LP S-K
[Statedef 1700]
type    = A
movetype= A
physics = N
ctrl = 0
anim = 1700
sprpriority = 2

[State 0, VarSet]
type = VarSet
trigger1 = !Time
var(5) = (PrevStateNo=1701)
[State 0, VarSet]
type = VarSet
trigger1 = !Time
var(6) = Var(5)
[State 0, VarSet]
type = VarSet
trigger1 = Var(6) && Time < 20
trigger1 = command != "holdy"
var(6) = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = !Time
value = 1700
elem = 1 + (Pos Y != 0)
[State 0, ChangeAnim]
type = ChangeAnim
triggerall = AnimElem = 8
trigger1 = Time < 20 && Var(5)
trigger2 = Var(6)
value = Anim
elem = 6

[State 0, Turn]
type = Turn
trigger1 = AnimElem = 8
trigger1 = P2Dist X < 0

[State 0, VelMul]
type = VelMul
trigger1 = !Time
trigger1 = Pos Y >= 0
x = 0
y = 0
[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 2
x = max(0.25,min(1.5,p2bodydist x * 0.05)) + Var(5)
y = -3 - 1.5 * Var(5) + Pos Y * -0.035 + Pos Y * -0.015 * !Var(5)
[State 0, VelSet]
type = VelSet
trigger1 = MoveGuarded = 1
x = -1
y = -1 * !Var(5)
[State 0, VelAdd]
type = VelAdd
trigger1 = AnimElemNo(0) = [2,7]
y = 0.15 + 0.15 * Var(5)
[State 0, VelAdd]
type = VelAdd
trigger1 = AnimElemNo(0) >= 8
y = 0.5

[State 210, 1]
type = PlaySnd
trigger1 = AnimElemNo(0) = [4,7]
trigger1 = Time%4 = 0
value = F0, 0
channel = 1
[State 210, 1]
type = PlaySnd
trigger1 = AnimElem = 8
value = F0, 3
channel = 1

[State 0, Var Voice Bank]
type = VarSet
trigger1 = AnimElem = 8
v = 33
value = 1700
[State 0, Var Voice Variant]
type = VarSet
trigger1 = AnimElem = 8
v = 34
value = random%4

[State 0, Var Damage Value]
type = VarSet
trigger1 = !MoveContact && !MoveReversed
v = 12
value = 136 + 8 * Var(6)

[State 0, HitDef]
type = HitDef
trigger1 = !MoveContact && !MoveReversed
attr = A,SA
hitflag = MAF
guardflag = HA
animtype = heavy
priority = 5,Hit
damage = Ceil(Var(12) * FVar(10) * FVar(20)),Ceil(Var(12)*const(BC.ChipMid))
guardpoints = floor((32 + Var(12)) * (0.5 + 0.125 * Var(6)))
pausetime = 12,12+Var(13)
guard.pausetime = 12,12
sparkno = ifelse(Var(10)=2,30,10 + random%4 + (Var(10)=1) * 5)
guard.sparkno = 40
sparkxy = -32+Floor(P2Dist X*0.5),-40+Floor(P2Dist Y*0.5)
hitsound = 1,3
guardsound = 5,1
ground.type = Low
ground.slidetime = 21
ground.hittime = 21
guard.hittime = 12 + Var(6)
yaccel = 0.5
fall = 1
ground.velocity = -1,8
air.velocity = -1,8
fall.yvelocity = -2.5 - 1.5 * (EnemyNear,StateType!=A) - Var(5) - Var(6)
p2facing = 1
getpower = floor(Var(12)*Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))

[State 0, TargetState]
type = TargetState
triggerall = MoveHit && !MoveReversed
triggerall = NumTarget && EnemyNear,MoveType = H
triggerall = Var(10) != 2
trigger1 = Var(8) = 1
value = 5355
ignorehitpause = 1
[State 0, Map Dire Trigger]
type = MapSet
triggerall = MoveHit && !MoveReversed
triggerall = NumTarget && EnemyNear,MoveType = H
triggerall = Var(10) = 2
trigger1 = Var(8) = 1
map = "DireAct"
value = 5345
ignorehitpause = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 11
movetype = I

[State 0, MapSet]
type = MapSet
trigger1 = AnimElem = 3
map = "AjikBonus"
value = min(4,Map(AjikBonus)+1)

[State 1000, 7]
type = ChangeState
trigger1 = Pos Y + Vel Y > Map(StageGround)
trigger1 = AnimElemNo(0) >= 2
value = 1105

;---------------------------------------------------------------------------
; QCF+SP S-K
[Statedef 1701]
type    = A
movetype= A
physics = N
anim = 666

[State 0, ChangeState]
type = ChangeState
trigger1 = !Time
value = 1700

;---------------------------------------------------------------------------
; QCF+LK S-K
[Statedef 1800]
type    = A
movetype= A
physics = N
velset = 0,0
anim = 1800 + (PrevStateNo=1801)
ctrl = 0
sprpriority = 2

[State 0, VarSet]
type = VarSet
trigger1 = !Time
trigger1 = PrevStateNo != 1801
v = 5
value = 0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = Var(5) && Time <= 14
value = ,NA,SA,NP,SP,NT,ST,HT
time = 1
[State 0, HitBy]
type = NotHitBy
trigger1 = !Var(5) && Time <= 13
trigger2 = Var(5) && Time = (14,17]
value = A
time = 1

[State 210, 1]
type = PlaySnd
trigger1 = AnimElem = 3
value = F0, 2

[State 0, Var Voice Bank]
type = VarSet
trigger1 = AnimElem = 4
v = 33
value = 1100 + !(Var(5)=0)
[State 0, Var Voice Variant]
type = VarSet
trigger1 = AnimElem = 4
v = 34
value = random%2

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 3
x = 3 + 4 * Var(5)
[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 4
y = -8 - 1 * Var(5)
[State 0, VelAdd]
type = VelAdd
trigger1 = AnimElemNo(0) >= 4
y = 0.5
[State 0, VelMul]
type = VelMul
trigger1 = AnimElemNo(0) >= 4
x = 0.9 - (Var(5) * 0.05)

[State 0, Var Damage Value]
type = VarSet
trigger1 = !MoveContact && !MoveReversed
v = 12
value = 96 + 8 * (Var(5))

[State 0, HitDef]
type = HitDef
triggerall = AnimElemNo(0)=5
trigger1 = !MoveContact && !MoveReversed
attr = S,SA
hitflag = MAF
guardflag = MA
animtype = heavy
priority = 5,Hit
damage = Ceil(Var(12) * FVar(10) * FVar(20) * 0.25),Ceil(128*0.5*const(BC.ChipLight))
guardpoints = floor((32 + Var(12)) * 0.5 * 0.25)
pausetime = 4,4
sparkno = 5 + random%4 + (Var(10)=1) * 5
guard.sparkno = 40
sparkxy = -40+Floor(P2Dist X*0.5),-56+Floor(P2Dist Y*0.5)
hitsound = 1,1
guardsound = 5,0
ground.type = Low
ground.slidetime = 24
ground.hittime = 24
guard.hittime = 12
yaccel = 0.5
air.fall = 1
forcestand = 1
ground.velocity = -1,0;-8
air.velocity = -1,-4
p2facing = 1
getpower = floor(Var(12)*Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))

[State 0, HitDef]
type = HitDef
trigger1 = AnimElemNo(0)>5
trigger1 = !MoveContact && !MoveReversed
trigger2 = AnimElem = 6
attr = S,NA
hitflag = MAF
guardflag = MA
animtype = heavy
priority = 5,Hit
damage = Ceil(Var(12) * FVar(10) * FVar(20)),Ceil(128*0.5*const(BC.ChipLight))
guardpoints = floor((32 + Var(12)) * 0.5)
pausetime = 12,12+Var(13)
guard.pausetime = 12,12
sparkno = ifelse(Var(10)=2||Var(11)>=2,30,10 + random%4 + (Var(10)=1) * 5)
guard.sparkno = 40
sparkxy = -40+Floor(P2Dist X*0.5),-56+Floor(P2Dist Y*0.5)
hitsound = 1,3
guardsound = 5,1
ground.type = Low
ground.slidetime = 24
ground.hittime = 24
guard.hittime = 8
yaccel = 0.5
fall = 1
ground.velocity = -0.5 - Var(5),-10.5 + Var(5)
air.velocity = -2,-7 + Var(5)
p2facing = 1
getpower = floor(Var(12)*Map(ScaledPowerGetHit)),floor(Var(12)*const(BC.PowerGetGuard))
givepower = floor(Var(12)*Map(ScaledPowerGiveHit)),floor(Var(12)*const(BC.PowerGiveGuard))

[State 0, Var Dull Dire]
type = VarSet
triggerall = MoveHit && !MoveReversed
triggerall = EnemyNear,MoveType = H
triggerall = Var(10) = 2
trigger1 = Var(8) = 1 && AnimElemNo(0) < 6
var(11) = 2
ignorehitpause = 1
[State 0, Map Dire Trigger]
type = MapSet
triggerall = MoveHit && !MoveReversed
triggerall = NumTarget && EnemyNear,MoveType = H
triggerall = Var(10) = 2 || Var(11) > 1
trigger1 = Var(8) = 1
trigger1 = AnimElemNo(0) >= 6
map = "DireAct"
value = 5335
ignorehitpause = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 7
movetype = I

[State 0, MapSet]
type = MapSet
trigger1 = AnimElem = 4 && !Var(5)
map = "AjikBonus"
value = min(4,Map(AjikBonus)+1)

[State 1000, 7]
type = ChangeState
trigger1 = Pos Y + Vel Y > Map(StageGround)
trigger1 = AnimElemNo(0) >= 6
value = 1105

;---------------------------------------------------------------------------
; QCF+SK S-K
[Statedef 1801]
type    = A
movetype= A
physics = N
anim = 666

[State 0, VarSet]
type = VarSet
trigger1 = !Time
v = 5
value = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = !Time
value = 1800